"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[932],{27015:function(e,t,l){var o=l(64836);t.Z=void 0;var n=o(l(64938)),r=l(85893),a=(0,n.default)((0,r.jsx)("path",{d:"M14 2H4c-1.11 0-2 .9-2 2v10h2V4h10V2zm4 4H8c-1.11 0-2 .9-2 2v10h2V8h10V6zm2 4h-8c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2z"}),"AutoAwesomeMotion");t.Z=a},64938:function(e,t,l){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.createSvgIcon}});var o=l(52869)},52869:function(e,t,l){l.r(t),l.d(t,{capitalize:function(){return n.Z},createChainedFunction:function(){return r},createSvgIcon:function(){return a.Z},debounce:function(){return i},deprecatedPropType:function(){return u},isMuiElement:function(){return d},ownerDocument:function(){return s},ownerWindow:function(){return c},requirePropFactory:function(){return v},setRef:function(){return p},unstable_ClassNameGenerator:function(){return w},unstable_useEnhancedEffect:function(){return h},unstable_useId:function(){return m},unsupportedProp:function(){return f},useControlled:function(){return b},useEventCallback:function(){return x},useForkRef:function(){return y},useIsFocusVisible:function(){return g}});var o=l(37078),n=l(98216),r=function(...e){return e.reduce((e,t)=>null==t?e:function(...l){e.apply(this,l),t.apply(this,l)},()=>{})},a=l(34678),i=l(39336).Z,u=function(e,t){return()=>null},d=l(18719).Z,s=l(82690).Z,c=l(74161).Z;l(87462);var v=function(e,t){return()=>null},p=l(7960).Z,h=l(73546).Z,m=l(92996).Z,f=function(e,t,l,o,n){return null},b=l(19032).Z,x=l(59948).Z,y=l(33703).Z,g=l(99962).Z;let w={configure:e=>{o.Z.configure(e)}}},53913:function(e,t,l){l.r(t),l.d(t,{default:function(){return K}});var o=l(85893),n=l(67294),r=l(577),a=l(61685),i=l(63366),u=l(87462),d=l(90512),s=l(14142),c=l(19032),v=l(92996),p=l(59948),h=l(99962),m=l(33703),f=l(94780),b=l(53406),x=l(74312),y=l(20407),g=l(30220),w=l(78653),Z=l(26821);function T(e){return(0,Z.d6)("MuiTooltip",e)}(0,Z.sI)("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let S=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],j=e=>{let{arrow:t,variant:l,color:o,size:n,placement:r,touch:a}=e,i={root:["root",t&&"tooltipArrow",a&&"touch",n&&`size${(0,s.Z)(n)}`,o&&`color${(0,s.Z)(o)}`,l&&`variant${(0,s.Z)(l)}`,`tooltipPlacement${(0,s.Z)(r.split("-")[0])}`],arrow:["arrow"]};return(0,f.Z)(i,T,{})},_=(0,x.Z)("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var l,o,n;let r=null==(l=t.variants[e.variant])?void 0:l[e.color];return(0,u.Z)({},"sm"===e.size&&{"--Icon-fontSize":t.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:t.spacing(.25,.625)},"md"===e.size&&{"--Icon-fontSize":t.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:t.spacing(.5,.75)},"lg"===e.size&&{"--Icon-fontSize":t.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:t.spacing(.75,1)},{zIndex:t.vars.zIndex.tooltip,borderRadius:t.vars.radius.sm,boxShadow:t.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},t.typography[`body-${({sm:"xs",md:"sm",lg:"md"})[e.size]}`],r,!r.backgroundColor&&{backgroundColor:t.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:null!=(o=e.placement)&&o.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:null!=(n=e.placement)&&n.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),k=(0,x.Z)("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e,ownerState:t})=>{var l,o,n;let r=null==(l=e.variants[t.variant])?void 0:l[t.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&:before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:null!=(o=null==r?void 0:r.backgroundColor)?o:e.vars.palette.background.surface,borderRightColor:null!=(n=null==r?void 0:r.backgroundColor)?n:e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${r.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}}),z=!1,N=null,C={x:0,y:0};function R(e,t){return l=>{t&&t(l),e(l)}}function E(e,t){return l=>{t&&t(l),e(l)}}let M=n.forwardRef(function(e,t){var l;let r=(0,y.Z)({props:e,name:"JoyTooltip"}),{children:a,className:s,component:f,arrow:x=!1,describeChild:Z=!1,disableFocusListener:T=!1,disableHoverListener:M=!1,disableInteractive:P=!1,disableTouchListener:q=!1,enterDelay:D=100,enterNextDelay:O=0,enterTouchDelay:I=700,followCursor:A=!1,id:F,leaveDelay:L=0,leaveTouchDelay:W=1500,onClose:B,onOpen:V,open:$,disablePortal:Y,direction:H,keepMounted:J,modifiers:U,placement:X="bottom",title:K,color:G="neutral",variant:Q="solid",size:ee="md",slots:et={},slotProps:el={}}=r,eo=(0,i.Z)(r,S),{getColor:en}=(0,w.VT)(Q),er=Y?en(e.color,G):G,[ea,ei]=n.useState(),[eu,ed]=n.useState(null),es=n.useRef(!1),ec=P||A,ev=n.useRef(),ep=n.useRef(),eh=n.useRef(),em=n.useRef(),[ef,eb]=(0,c.Z)({controlled:$,default:!1,name:"Tooltip",state:"open"}),ex=ef,ey=(0,v.Z)(F),eg=n.useRef(),ew=n.useCallback(()=>{void 0!==eg.current&&(document.body.style.WebkitUserSelect=eg.current,eg.current=void 0),clearTimeout(em.current)},[]);n.useEffect(()=>()=>{clearTimeout(ev.current),clearTimeout(ep.current),clearTimeout(eh.current),ew()},[ew]);let eZ=e=>{N&&clearTimeout(N),z=!0,eb(!0),V&&!ex&&V(e)},eT=(0,p.Z)(e=>{N&&clearTimeout(N),N=setTimeout(()=>{z=!1},800+L),eb(!1),B&&ex&&B(e),clearTimeout(ev.current),ev.current=setTimeout(()=>{es.current=!1},150)}),eS=e=>{es.current&&"touchstart"!==e.type||(ea&&ea.removeAttribute("title"),clearTimeout(ep.current),clearTimeout(eh.current),D||z&&O?ep.current=setTimeout(()=>{eZ(e)},z?O:D):eZ(e))},ej=e=>{clearTimeout(ep.current),clearTimeout(eh.current),eh.current=setTimeout(()=>{eT(e)},L)},{isFocusVisibleRef:e_,onBlur:ek,onFocus:ez,ref:eN}=(0,h.Z)(),[,eC]=n.useState(!1),eR=e=>{ek(e),!1===e_.current&&(eC(!1),ej(e))},eE=e=>{ea||ei(e.currentTarget),ez(e),!0===e_.current&&(eC(!0),eS(e))},eM=e=>{es.current=!0;let t=a.props;t.onTouchStart&&t.onTouchStart(e)};n.useEffect(()=>{if(ex)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){("Escape"===e.key||"Esc"===e.key)&&eT(e)}},[eT,ex]);let eP=(0,m.Z)(ei,t),eq=(0,m.Z)(eN,eP),eD=(0,m.Z)(a.ref,eq);"number"==typeof K||K||(ex=!1);let eO=n.useRef(null),eI={},eA="string"==typeof K;Z?(eI.title=ex||!eA||M?null:K,eI["aria-describedby"]=ex?ey:null):(eI["aria-label"]=eA?K:null,eI["aria-labelledby"]=ex&&!eA?ey:null);let eF=(0,u.Z)({},eI,eo,{component:f},a.props,{className:(0,d.Z)(s,a.props.className),onTouchStart:eM,ref:eD},A?{onMouseMove:e=>{let t=a.props;t.onMouseMove&&t.onMouseMove(e),C={x:e.clientX,y:e.clientY},eO.current&&eO.current.update()}}:{}),eL={};q||(eF.onTouchStart=e=>{eM(e),clearTimeout(eh.current),clearTimeout(ev.current),ew(),eg.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",em.current=setTimeout(()=>{document.body.style.WebkitUserSelect=eg.current,eS(e)},I)},eF.onTouchEnd=e=>{a.props.onTouchEnd&&a.props.onTouchEnd(e),ew(),clearTimeout(eh.current),eh.current=setTimeout(()=>{eT(e)},W)}),M||(eF.onMouseOver=R(eS,eF.onMouseOver),eF.onMouseLeave=R(ej,eF.onMouseLeave),ec||(eL.onMouseOver=eS,eL.onMouseLeave=ej)),T||(eF.onFocus=E(eE,eF.onFocus),eF.onBlur=E(eR,eF.onBlur),ec||(eL.onFocus=eE,eL.onBlur=eR));let eW=(0,u.Z)({},r,{arrow:x,disableInteractive:ec,placement:X,touch:es.current,color:er,variant:Q,size:ee}),eB=j(eW),eV=(0,u.Z)({},eo,{component:f,slots:et,slotProps:el}),e$=n.useMemo(()=>[{name:"arrow",enabled:!!eu,options:{element:eu,padding:6}},{name:"offset",options:{offset:[0,10]}},...U||[]],[eu,U]),[eY,eH]=(0,g.Z)("root",{additionalProps:(0,u.Z)({id:ey,popperRef:eO,placement:X,anchorEl:A?{getBoundingClientRect:()=>({top:C.y,left:C.x,right:C.x,bottom:C.y,width:0,height:0})}:ea,open:!!ea&&ex,disablePortal:Y,keepMounted:J,direction:H,modifiers:e$},eL),ref:null,className:eB.root,elementType:_,externalForwardedProps:eV,ownerState:eW}),[eJ,eU]=(0,g.Z)("arrow",{ref:ed,className:eB.arrow,elementType:k,externalForwardedProps:eV,ownerState:eW}),eX=(0,o.jsxs)(eY,(0,u.Z)({},eH,!(null!=(l=r.slots)&&l.root)&&{as:b.r,slots:{root:f||"div"}},{children:[K,x?(0,o.jsx)(eJ,(0,u.Z)({},eU)):null]}));return(0,o.jsxs)(n.Fragment,{children:[n.isValidElement(a)&&n.cloneElement(a,eF),Y?eX:(0,o.jsx)(w.ZP.Provider,{value:void 0,children:eX})]})});var P=l(40911),q=l(99056),D=l(57814),O=l(48665),I=l(71577),A=l(27015),F=l(59566),L=l(32983),W=l(57346),B=l(44442),V=l(99513),$=l(30119),Y=l(39332),H=l(34625),J=l(13135);let{Search:U}=F.default;function X(e){var t,l,r;let{editorValue:i,chartData:u,tableData:d,handleChange:s}=e,c=n.useMemo(()=>u?(0,o.jsx)("div",{className:"flex-1 overflow-auto p-3",style:{flexShrink:0,overflow:"hidden"},children:(0,o.jsx)(J.ZP,{chartsData:[u]})}):(0,o.jsx)("div",{}),[u]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,o.jsx)("div",{className:"flex-1",style:{flexShrink:0,overflow:"auto"},children:(0,o.jsx)(V.Z,{value:(null==i?void 0:i.sql)||"",language:"mysql",onChange:s,thoughts:(null==i?void 0:i.thoughts)||""})}),c]}),(0,o.jsx)("div",{className:"h-96 border-[var(--joy-palette-divider)] border-t border-solid overflow-auto",children:(null==d?void 0:null===(t=d.values)||void 0===t?void 0:t.length)>0?(0,o.jsxs)(a.Z,{"aria-label":"basic table",stickyHeader:!0,children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:null==d?void 0:null===(l=d.columns)||void 0===l?void 0:l.map((e,t)=>(0,o.jsx)("th",{children:e},e+t))})}),(0,o.jsx)("tbody",{children:null==d?void 0:null===(r=d.values)||void 0===r?void 0:r.map((e,t)=>{var l;return(0,o.jsx)("tr",{children:null===(l=Object.keys(e))||void 0===l?void 0:l.map(t=>(0,o.jsx)("td",{children:e[t]},t))},t)})})]}):(0,o.jsx)("div",{className:"h-full flex justify-center items-center",children:(0,o.jsx)(L.Z,{})})})]})}var K=function(){var e,t,l,a,i;let[u,d]=n.useState([]),[s,c]=n.useState(""),[v,p]=n.useState(),[h,m]=n.useState(!0),[f,b]=n.useState(),[x,y]=n.useState(),[g,w]=n.useState(),[Z,T]=n.useState(),[S,j]=n.useState(),_=(0,Y.useSearchParams)(),k=null==_?void 0:_.get("id"),z=null==_?void 0:_.get("scene"),{data:N,loading:C}=(0,r.Z)(async()=>await (0,$.Tk)("/v1/editor/sql/rounds",{con_uid:k}),{onSuccess:e=>{var t,l;let o=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t[(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.length)-1];o&&p(null==o?void 0:o.round)}}),{run:R,loading:E}=(0,r.Z)(async()=>{var e,t;let l=null===(e=null==N?void 0:null===(t=N.data)||void 0===t?void 0:t.find(e=>e.round===v))||void 0===e?void 0:e.db_name;return await (0,$.PR)("/api/v1/editor/sql/run",{db_name:l,sql:null==g?void 0:g.sql})},{manual:!0,onSuccess:e=>{var t,l;T({columns:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.colunms,values:null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.values})}}),{run:F,loading:L}=(0,r.Z)(async()=>{var e,t;let l=null===(e=null==N?void 0:null===(t=N.data)||void 0===t?void 0:t.find(e=>e.round===v))||void 0===e?void 0:e.db_name,o={db_name:l,sql:null==g?void 0:g.sql};return"chat_dashboard"===z&&(o.chart_type=null==g?void 0:g.showcase),await (0,$.PR)("/api/v1/editor/chart/run",o)},{manual:!0,ready:!!(null==g?void 0:g.sql),onSuccess:e=>{if(null==e?void 0:e.success){var t,l,o,n,r,a,i;T({columns:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(l=t.sql_data)||void 0===l?void 0:l.colunms)||[],values:(null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(n=o.sql_data)||void 0===n?void 0:n.values)||[]}),(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.chart_values)?b({type:null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.chart_type,values:null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.chart_values,title:null==g?void 0:g.title,description:null==g?void 0:g.thoughts}):b(void 0)}}}),{run:V,loading:J}=(0,r.Z)(async()=>{var e,t,l,o,n;let r=null===(e=null==N?void 0:null===(t=N.data)||void 0===t?void 0:t.find(e=>e.round===v))||void 0===e?void 0:e.db_name;return await (0,$.PR)("/api/v1/sql/editor/submit",{conv_uid:k,db_name:r,conv_round:v,old_sql:null==x?void 0:x.sql,old_speak:null==x?void 0:x.thoughts,new_sql:null==g?void 0:g.sql,new_speak:(null===(l=null==g?void 0:null===(o=g.thoughts)||void 0===o?void 0:o.match(/^\n--(.*)\n\n$/))||void 0===l?void 0:null===(n=l[1])||void 0===n?void 0:n.trim())||(null==g?void 0:g.thoughts)})},{manual:!0,onSuccess:e=>{(null==e?void 0:e.success)&&R()}}),{run:K,loading:G}=(0,r.Z)(async()=>{var e,t,l,o,n,r;let a=null===(e=null==N?void 0:null===(t=N.data)||void 0===t?void 0:t.find(e=>e.round===v))||void 0===e?void 0:e.db_name;return await (0,$.PR)("/api/v1/chart/editor/submit",{conv_uid:k,chart_title:null==g?void 0:g.title,db_name:a,old_sql:null==x?void 0:null===(l=x[S])||void 0===l?void 0:l.sql,new_chart_type:null==g?void 0:g.showcase,new_sql:null==g?void 0:g.sql,new_comment:(null===(o=null==g?void 0:null===(n=g.thoughts)||void 0===n?void 0:n.match(/^\n--(.*)\n\n$/))||void 0===o?void 0:null===(r=o[1])||void 0===r?void 0:r.trim())||(null==g?void 0:g.thoughts),gmt_create:new Date().getTime()})},{manual:!0,onSuccess:e=>{(null==e?void 0:e.success)&&F()}}),{data:Q}=(0,r.Z)(async()=>{var e,t;let l=null===(e=null==N?void 0:null===(t=N.data)||void 0===t?void 0:t.find(e=>e.round===v))||void 0===e?void 0:e.db_name;return await (0,$.Tk)("/v1/editor/db/tables",{db_name:l,page_index:1,page_size:200})},{ready:!!(null===(e=null==N?void 0:null===(t=N.data)||void 0===t?void 0:t.find(e=>e.round===v))||void 0===e?void 0:e.db_name),refreshDeps:[null===(l=null==N?void 0:null===(a=N.data)||void 0===a?void 0:a.find(e=>e.round===v))||void 0===l?void 0:l.db_name]}),{run:ee}=(0,r.Z)(async e=>await (0,$.Tk)("/v1/editor/sql",{con_uid:k,round:e}),{manual:!0,onSuccess:e=>{let t;try{if(Array.isArray(null==e?void 0:e.data))t=null==e?void 0:e.data,j("0");else if("string"==typeof(null==e?void 0:e.data)){let l=JSON.parse(null==e?void 0:e.data);t=l}else t=null==e?void 0:e.data}catch(e){console.log(e)}finally{y(t),Array.isArray(t)?w(null==t?void 0:t[Number(S||0)]):w(t)}}}),et=n.useMemo(()=>{let e=(t,l)=>t.map(t=>{let n=t.title,r=n.indexOf(s),a=n.substring(0,r),i=n.slice(r+s.length),u=r>-1?(0,o.jsx)(M,{title:((null==t?void 0:t.comment)||(null==t?void 0:t.title))+((null==t?void 0:t.can_null)==="YES"?"(can null)":"(can't null)"),children:(0,o.jsxs)("span",{children:[a,(0,o.jsx)("span",{className:"text-[#1677ff]",children:s}),i,(null==t?void 0:t.type)&&(0,o.jsx)(P.ZP,{gutterBottom:!0,level:"body3",className:"pl-0.5",style:{display:"inline"},children:"[".concat(null==t?void 0:t.type,"]")})]})}):(0,o.jsx)(M,{title:((null==t?void 0:t.comment)||(null==t?void 0:t.title))+((null==t?void 0:t.can_null)==="YES"?"(can null)":"(can't null)"),children:(0,o.jsxs)("span",{children:[n,(null==t?void 0:t.type)&&(0,o.jsx)(P.ZP,{gutterBottom:!0,level:"body3",className:"pl-0.5",style:{display:"inline"},children:"[".concat(null==t?void 0:t.type,"]")})]})});if(t.children){let o=l?String(l)+"_"+t.key:t.key;return{title:n,showTitle:u,key:o,children:e(t.children,o)}}return{title:n,showTitle:u,key:t.key}});return(null==Q?void 0:Q.data)?(d([null==Q?void 0:Q.data.key]),e([null==Q?void 0:Q.data])):[]},[s,Q]),el=n.useMemo(()=>{let e=[],t=(l,o)=>{if(l&&!((null==l?void 0:l.length)<=0))for(let n=0;n<l.length;n++){let r=l[n],{key:a,title:i}=r;e.push({key:a,title:i,parentKey:o}),r.children&&t(r.children,a)}};return et&&t(et),e},[et]),eo=(e,t)=>{let l;for(let o=0;o<t.length;o++){let n=t[o];n.children&&(n.children.some(t=>t.key===e)?l=n.key:eo(e,n.children)&&(l=eo(e,n.children)))}return l};function en(e){let t;if(!e)return{sql:"",thoughts:""};let l=e&&e.match(/(--.*)\n([\s\S]*)/),o="";return l&&l.length>=3&&(o=l[1],t=l[2]),{sql:t,thoughts:o}}return n.useEffect(()=>{v&&ee(v)},[ee,v]),n.useEffect(()=>{x&&"chat_dashboard"===z&&S&&F()},[S,z,x,F]),n.useEffect(()=>{x&&"chat_dashboard"!==z&&R()},[z,x,R]),(0,o.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,o.jsx)(H.Z,{}),(0,o.jsxs)("div",{className:"relative flex flex-1 overflow-auto",children:[(0,o.jsxs)("div",{className:"text h-full border-[var(--joy-palette-divider)] border-r border-solid p-3 max-h-full overflow-auto",style:{width:"300px"},children:[(0,o.jsxs)("div",{className:"absolute right-4 top-2 z-10",children:[(0,o.jsx)(I.ZP,{className:"mr-2",type:"primary",loading:E||L,onClick:async()=>{"chat_dashboard"===z?F():R()},children:"Run"}),(0,o.jsx)(I.ZP,{loading:J||G,onClick:async()=>{"chat_dashboard"===z?await K():await V()},children:"Save"})]}),(0,o.jsxs)("div",{className:"flex items-center py-3",children:[(0,o.jsx)(q.Z,{className:"h-4 min-w-[240px]",size:"sm",value:v,onChange:(e,t)=>{p(t)},children:null==N?void 0:null===(i=N.data)||void 0===i?void 0:i.map(e=>(0,o.jsx)(D.Z,{value:null==e?void 0:e.round,children:null==e?void 0:e.round_name},null==e?void 0:e.round))}),(0,o.jsx)(A.Z,{className:"ml-2"})]}),(0,o.jsx)(U,{style:{marginBottom:8},placeholder:"Search",onChange:e=>{let{value:t}=e.target;if(null==Q?void 0:Q.data){if(t){let e=el.map(e=>e.title.indexOf(t)>-1?eo(e.key,et):null).filter((e,t,l)=>e&&l.indexOf(e)===t);d(e)}else d([]);c(t),m(!0)}}}),et&&et.length>0&&(0,o.jsx)(W.Z,{onExpand:e=>{d(e),m(!1)},expandedKeys:u,autoExpandParent:h,treeData:et,fieldNames:{title:"showTitle"}})]}),(0,o.jsx)("div",{className:"flex flex-col flex-1 max-w-full overflow-hidden",children:Array.isArray(x)?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(O.Z,{className:"h-full",sx:{".ant-tabs-content, .ant-tabs-tabpane-active":{height:"100%"},"& .ant-tabs-card.ant-tabs-top >.ant-tabs-nav .ant-tabs-tab, & .ant-tabs-card.ant-tabs-top >div>.ant-tabs-nav .ant-tabs-tab":{borderRadius:"0"}},children:(0,o.jsx)(B.Z,{className:"h-full dark:text-white px-2",activeKey:S,onChange:e=>{j(e),w(null==x?void 0:x[Number(e)])},items:null==x?void 0:x.map((e,t)=>({key:t+"",label:null==e?void 0:e.title,children:(0,o.jsx)("div",{className:"flex flex-col h-full",children:(0,o.jsx)(X,{editorValue:e,handleChange:e=>{let{sql:t,thoughts:l}=en(e);w(e=>Object.assign({},e,{sql:t,thoughts:l}))},tableData:Z,chartData:f})})}))})})}):(0,o.jsx)(X,{editorValue:x,handleChange:e=>{let{sql:t,thoughts:l}=en(e);w(e=>Object.assign({},e,{sql:t,thoughts:l}))},tableData:Z,chartData:void 0})})]})]})}}}]);