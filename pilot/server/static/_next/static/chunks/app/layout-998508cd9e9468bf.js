(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{72431:function(){},8454:function(e,t,r){Promise.resolve().then(r.bind(r,50902))},57931:function(e,t,r){"use strict";r.d(t,{ZP:function(){return c},Cg:function(){return a}});var n=r(9268),i=r(89081),s=r(89749),l=r(86006);let[a,o]=function(){let e=l.createContext(void 0);return[function(){let t=l.useContext(e);if(void 0===t)throw Error("useCtx must be inside a Provider with a value");return t},e.Provider]}();var c=e=>{let{children:t}=e,{run:r,data:l,refresh:a}=(0,i.Z)(async()=>await (0,s.Tk)("/v1/chat/dialogue/list"),{manual:!0});return(0,n.jsx)(o,{value:{dialogueList:l,queryDialogueList:r,refreshDialogList:a},children:t})}},50902:function(e,t,r){"use strict";let n,i;r.r(t),r.d(t,{default:function(){return U}});var s=r(9268);r(97402),r(23517);var l=r(86006),a=r(56008),o=r(35846),c=r.n(o),d=r(67713),u=r(78635),f=r(90545),h=r(53113),x=r(18818),m=r(4882),p=r(70092),v=r(64579),g=r(22046),j=r(53047),b=r(62921),y=r(40020),Z=r(18936),w=r(11515),k=r(84892),C=r(601),B=r(1301),P=r(98703),N=r(57931),_=r(66664),E=r(89749),D=r(76394),S=r.n(D),L=()=>{var e;let t=(0,a.usePathname)(),r=(0,a.useSearchParams)(),n=r.get("id"),i=(0,a.useRouter)(),[o,D]=(0,l.useState)("/LOGO_1.png"),{dialogueList:L,queryDialogueList:O,refreshDialogList:z}=(0,N.Cg)(),{mode:H,setMode:F}=(0,u.tv)(),I=(0,l.useMemo)(()=>[{label:"Database",route:"/database",icon:(0,s.jsx)(Z.Z,{}),active:"/database"===t},{label:"Knowledge Space",route:"/datastores",icon:(0,s.jsx)(y.Z,{fontSize:"small"}),active:"/datastores"===t}],[t]);return(0,l.useEffect)(()=>{"light"===H?D("/LOGO_1.png"):D("/WHITE_LOGO.png")},[H]),(0,l.useEffect)(()=>{(async()=>{await O()})()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("nav",{className:"flex h-12 items-center justify-between border-b px-4 dark:border-gray-800 dark:bg-gray-800/70 md:hidden",children:[(0,s.jsx)("div",{children:(0,s.jsx)(C.Z,{})}),(0,s.jsx)("span",{className:"truncate px-4",children:"New Chat"}),(0,s.jsx)("a",{href:"",className:"-mr-3 flex h-9 w-9 shrink-0 items-center justify-center",children:(0,s.jsx)(B.Z,{})})]}),(0,s.jsx)("nav",{className:"grid max-h-screen h-full max-md:hidden",children:(0,s.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",borderRight:"1px solid",borderColor:"divider",maxHeight:"100vh",position:"sticky",left:"0px",top:"0px",overflow:"hidden"},children:[(0,s.jsx)(f.Z,{sx:{p:2,gap:2,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsx)(S(),{src:o,alt:"DB-GPT",width:633,height:157,className:"w-full max-w-full",unoptimized:!0})})}),(0,s.jsx)(f.Z,{sx:{px:2},children:(0,s.jsx)(c(),{href:"/",children:(0,s.jsx)(h.Z,{color:"primary",className:"w-full bg-gradient-to-r from-[#31afff] to-[#1677ff] dark:bg-gradient-to-r dark:from-[#6a6a6a] dark:to-[#80868f]",style:{color:"#fff"},children:"+ New Chat"})})}),(0,s.jsx)(f.Z,{sx:{p:2,display:{xs:"none",sm:"initial"},maxHeight:"100%",overflow:"auto"},children:(0,s.jsx)(x.Z,{size:"sm",sx:{"--ListItem-radius":"8px"},children:(0,s.jsx)(m.Z,{nested:!0,children:(0,s.jsx)(x.Z,{size:"sm","aria-labelledby":"nav-list-browse",sx:{"& .JoyListItemButton-root":{p:"8px"},gap:"4px"},children:null==L?void 0:null===(e=L.data)||void 0===e?void 0:e.map(e=>{let l=("/chat"===t||"/chat/"===t)&&n===e.conv_uid;return(0,s.jsx)(m.Z,{children:(0,s.jsx)(p.Z,{selected:l,variant:l?"soft":"plain",sx:{"&:hover .del-btn":{visibility:"visible"}},children:(0,s.jsx)(v.Z,{children:(0,s.jsxs)(c(),{href:"/chat?id=".concat(e.conv_uid,"&scene=").concat(null==e?void 0:e.chat_mode),className:"flex items-center justify-between",children:[(0,s.jsxs)(g.ZP,{fontSize:14,noWrap:!0,children:[(0,s.jsx)(P.Z,{style:{marginRight:"0.5rem"}}),(null==e?void 0:e.user_name)||(null==e?void 0:e.user_input)||"undefined"]}),(0,s.jsx)(j.ZP,{color:"neutral",variant:"plain",size:"sm",onClick:n=>{n.preventDefault(),n.stopPropagation(),d.Z.confirm({title:"Delete Chat",content:"Are you sure delete this chat?",width:"276px",centered:!0,async onOk(){await (0,E.Kw)("/v1/chat/dialogue/delete?con_uid=".concat(e.conv_uid)),await z(),"/chat"===t&&r.get("id")===e.conv_uid&&i.push("/")}})},className:"del-btn invisible",children:(0,s.jsx)(_.Z,{})})]})})})},e.conv_uid)})})})})}),(0,s.jsxs)("div",{className:"flex flex-col justify-between flex-1",children:[(0,s.jsx)("div",{}),(0,s.jsx)(f.Z,{sx:{p:2,pt:3,pb:6,borderTop:"1px solid",borderColor:"divider",display:{xs:"none",sm:"initial"},position:"sticky",bottom:0,zIndex:100,background:"var(--joy-palette-background-body)"},children:(0,s.jsxs)(x.Z,{size:"sm",sx:{"--ListItem-radius":"8px"},children:[(0,s.jsx)(m.Z,{nested:!0,children:(0,s.jsx)(x.Z,{size:"sm","aria-labelledby":"nav-list-browse",sx:{"& .JoyListItemButton-root":{p:"8px"}},children:I.map(e=>(0,s.jsx)(c(),{href:e.route,children:(0,s.jsx)(m.Z,{children:(0,s.jsxs)(p.Z,{color:"neutral",sx:{marginBottom:1,height:"2.5rem"},selected:e.active,variant:e.active?"soft":"plain",children:[(0,s.jsx)(b.Z,{sx:{color:e.active?"inherit":"neutral.500"},children:e.icon}),(0,s.jsx)(v.Z,{children:e.label})]})})},e.route))})}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(p.Z,{sx:{height:"2.5rem"},onClick:()=>{"light"===H?F("dark"):F("light")},children:[(0,s.jsx)(b.Z,{children:"dark"===H?(0,s.jsx)(w.Z,{fontSize:"small"}):(0,s.jsx)(k.Z,{fontSize:"small"})}),(0,s.jsx)(v.Z,{children:"Theme"})]})})]})})]})]})})]})},O=r(29720),z=r(41287),H=r(38230);let F=(0,z.Z)({colorSchemes:{light:{palette:{mode:"dark",primary:{...H.Z.grey,solidBg:"#e6f4ff",solidColor:"#1677ff",solidHoverBg:"#e6f4ff"},neutral:{plainColor:"#4d4d4d",plainHoverColor:"#131318",plainHoverBg:"#EBEBEF",plainActiveBg:"#D8D8DF",plainDisabledColor:"#B9B9C6"},background:{body:"#fff",surface:"#fff"},text:{primary:"#505050"}}},dark:{palette:{mode:"light",primary:{...H.Z.grey,softBg:"#353539",softHoverBg:"#35353978",softDisabledBg:"#353539",solidBg:"#51525beb",solidHoverBg:"#51525beb"},neutral:{plainColor:"#D8D8DF",plainHoverColor:"#F7F7F8",plainHoverBg:"#353539",plainActiveBg:"#434356",plainDisabledColor:"#434356",outlinedBorder:"#353539",outlinedHoverBorder:"#454651"},text:{primary:"#EBEBEF"},background:{body:"#212121",surface:"#51525beb"}}}},fontFamily:{body:"Josefin Sans, sans-serif",display:"Josefin Sans, sans-serif"},typography:{display1:{background:"linear-gradient(-30deg, var(--joy-palette-primary-900), var(--joy-palette-primary-400))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},zIndex:{modal:1001}});var I=r(53794),T=r.n(I),R=r(54486),A=r.n(R);let J=0;function G(){"loading"!==i&&(i="loading",n=setTimeout(function(){A().start()},250))}function W(){J>0||(i="stop",clearTimeout(n),A().done())}if(T().events.on("routeChangeStart",G),T().events.on("routeChangeComplete",W),T().events.on("routeChangeError",W),"function"==typeof(null==window?void 0:window.fetch)){let e=window.fetch;window.fetch=async function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];0===J&&G(),J++;try{let t=await e(...r);return t}catch(e){return Promise.reject(e)}finally{0==(J-=1)&&W()}}}function K(){return null}function M(e){let{children:t}=e,{mode:r}=(0,u.tv)(),n=l.useRef(null);return(0,l.useEffect)(()=>{if((null==n?void 0:n.current)&&r){var e,t,i,s,l,a;null==n||null===(e=n.current)||void 0===e||null===(t=e.classList)||void 0===t||t.add(r),"light"===r?null==n||null===(i=n.current)||void 0===i||null===(s=i.classList)||void 0===s||s.remove("dark"):null==n||null===(l=n.current)||void 0===l||null===(a=l.classList)||void 0===a||a.remove("light")}},[n,r]),(0,s.jsxs)("div",{ref:n,className:"h-full",children:[(0,s.jsx)(K,{}),(0,s.jsx)(N.ZP,{children:(0,s.jsx)("div",{className:"contents h-full",children:(0,s.jsxs)("div",{className:"grid h-full w-screen grid-cols-1 grid-rows-[auto,1fr] overflow-hidden text-smd dark:text-gray-300 md:grid-cols-[280px,1fr] md:grid-rows-[1fr]",children:[(0,s.jsx)(L,{}),(0,s.jsx)("div",{className:"relative min-h-0 min-w-0",children:t})]})})})]})}var U=function(e){let{children:t}=e;return(0,s.jsx)("html",{lang:"en",className:"h-full font-sans",children:(0,s.jsx)("body",{className:"h-full font-sans",children:(0,s.jsx)(O.Z,{theme:F,children:(0,s.jsx)(u.lL,{theme:F,defaultMode:"light",children:(0,s.jsx)(M,{children:t})})})})})}},53534:function(e,t,r){"use strict";var n=r(24214),i=r(52040);let s=n.Z.create({baseURL:i.env.API_BASE_URL});s.defaults.timeout=1e4,s.interceptors.response.use(e=>e.data,e=>Promise.reject(e)),t.Z=s},89749:function(e,t,r){"use strict";r.d(t,{Ej:function(){return u},Kw:function(){return c},PR:function(){return d},Tk:function(){return o}});var n=r(21628),i=r(53534),s=r(84835);let l={"content-type":"application/json"},a=e=>{if(!(0,s.isPlainObject)(e))return JSON.stringify(e);let t={...e};for(let e in t){let r=t[e];"string"==typeof r&&(t[e]=r.trim())}return JSON.stringify(t)},o=(e,t)=>{if(t){let r=Object.keys(t).filter(e=>void 0!==t[e]&&""!==t[e]).map(e=>"".concat(e,"=").concat(t[e])).join("&");r&&(e+="?".concat(r))}return i.Z.get("/api"+e,{headers:l}).then(e=>e).catch(e=>{n.ZP.error(e),Promise.reject(e)})},c=(e,t)=>{let r=a(t);return i.Z.post("/api"+e,{body:r,headers:l}).then(e=>e).catch(e=>{n.ZP.error(e),Promise.reject(e)})},d=(e,t)=>(a(t),i.Z.post(e,t,{headers:l}).then(e=>e).catch(e=>{n.ZP.error(e),Promise.reject(e)})),u=(e,t)=>i.Z.post(e,t).then(e=>e).catch(e=>{n.ZP.error(e),Promise.reject(e)})},97402:function(){},23517:function(){}},function(e){e.O(0,[180,662,487,358,81,715,273,394,635,713,751,540,253,769,744],function(){return e(e.s=8454)}),_N_E=e.O()}]);