(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{30976:function(e,t,n){Promise.resolve().then(n.bind(n,26257))},26257:function(e,t,n){"use strict";n.r(t);var r=n(9268),a=n(56008),i=n(86006),c=n(78635),s=n(90545),o=n(80937),l=n(44334),d=n(311),h=n(22046),u=n(83192),g=n(23910),f=n(90734),j=n(89749);t.default=()=>{let e=(0,a.useRouter)(),{mode:t}=(0,c.tv)(),n=(0,a.useSearchParams)().get("spacename"),m=(0,a.useSearchParams)().get("documentid"),[p,x]=(0,i.useState)(0),[Z,P]=(0,i.useState)(0),[b,S]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async function(){let e=await (0,j.PR)("/knowledge/".concat(n,"/chunk/list"),{document_id:m,page:1,page_size:20});e.success&&(S(e.data.data),x(e.data.total),P(e.data.page))})()},[]),(0,r.jsxs)(s.Z,{className:"p-4",sx:{"&":{height:"90%"}},children:[(0,r.jsx)(o.Z,{direction:"row",justifyContent:"flex-start",alignItems:"center",sx:{marginBottom:"20px"},children:(0,r.jsxs)(l.Z,{"aria-label":"breadcrumbs",children:[(0,r.jsx)(d.Z,{onClick:()=>{e.push("/datastores")},underline:"hover",color:"neutral",fontSize:"inherit",children:"Knowledge Space"},"Knowledge Space"),(0,r.jsx)(d.Z,{onClick:()=>{e.push("/datastores/documents?name=".concat(n))},underline:"hover",color:"neutral",fontSize:"inherit",children:"Documents"},"Knowledge Space"),(0,r.jsx)(h.ZP,{fontSize:"inherit",children:"Chunks"})]})}),(0,r.jsx)(s.Z,{className:"p-4",sx:{"&":{height:"90%",overflow:"auto"},"&::-webkit-scrollbar":{display:"none"}},children:b.length?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(u.Z,{color:"primary",variant:"plain",size:"lg",sx:{"& tbody tr: hover":{backgroundColor:"light"===t?"rgb(246, 246, 246)":"rgb(33, 33, 40)"},"& tbody tr: hover a":{textDecoration:"underline"}},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Content"}),(0,r.jsx)("th",{children:"Meta Data"})]})}),(0,r.jsx)("tbody",{children:b.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.doc_name}),(0,r.jsx)("td",{children:(0,r.jsx)(g.Z,{content:e.content,trigger:"hover",children:e.content.length>10?"".concat(e.content.slice(0,10),"..."):e.content})}),(0,r.jsx)("td",{children:(0,r.jsx)(g.Z,{content:JSON.stringify(e.meta_info||"{}",null,2),trigger:"hover",children:e.meta_info.length>10?"".concat(e.meta_info.slice(0,10),"..."):e.meta_info})})]},e.id))})]})}):(0,r.jsx)(r.Fragment,{})}),(0,r.jsx)(o.Z,{direction:"row",justifyContent:"flex-end",sx:{marginTop:"20px"},children:(0,r.jsx)(f.Z,{defaultPageSize:20,showSizeChanger:!1,current:Z,total:p,onChange:async e=>{let t=await (0,j.PR)("/knowledge/".concat(n,"/chunk/list"),{document_id:m,page:e,page_size:20});t.success&&(S(t.data.data),x(t.data.total),P(t.data.page))},hideOnSinglePage:!0})})]})}},53534:function(e,t,n){"use strict";var r=n(24214),a=n(52040);let i=r.Z.create({baseURL:a.env.API_BASE_URL});i.defaults.timeout=1e4,i.interceptors.response.use(e=>e.data,e=>Promise.reject(e)),t.Z=i},89749:function(e,t,n){"use strict";n.d(t,{Ej:function(){return h},Kw:function(){return l},PR:function(){return d},Tk:function(){return o}});var r=n(21628),a=n(53534),i=n(84835);let c={"content-type":"application/json"},s=e=>{if(!(0,i.isPlainObject)(e))return JSON.stringify(e);let t={...e};for(let e in t){let n=t[e];"string"==typeof n&&(t[e]=n.trim())}return JSON.stringify(t)},o=(e,t)=>{if(t){let n=Object.keys(t).filter(e=>void 0!==t[e]&&""!==t[e]).map(e=>"".concat(e,"=").concat(t[e])).join("&");n&&(e+="?".concat(n))}return a.Z.get("/api"+e,{headers:c}).then(e=>e).catch(e=>{r.ZP.error(e),Promise.reject(e)})},l=(e,t)=>{let n=s(t);return a.Z.post("/api"+e,{body:n,headers:c}).then(e=>e).catch(e=>{r.ZP.error(e),Promise.reject(e)})},d=(e,t)=>a.Z.post(e,t,{headers:c}).then(e=>e).catch(e=>{r.ZP.error(e),Promise.reject(e)}),h=(e,t)=>a.Z.post(e,t).then(e=>e).catch(e=>{r.ZP.error(e),Promise.reject(e)})}},function(e){e.O(0,[180,355,932,358,649,191,569,919,743,767,635,548,253,769,744],function(){return e(e.s=30976)}),_N_E=e.O()}]);
