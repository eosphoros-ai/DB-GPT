"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[932],{27015:function(e,l,t){var o=t(64836);l.Z=void 0;var a=o(t(64938)),n=t(85893),r=(0,a.default)((0,n.jsx)("path",{d:"M14 2H4c-1.11 0-2 .9-2 2v10h2V4h10V2zm4 4H8c-1.11 0-2 .9-2 2v10h2V8h10V6zm2 4h-8c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2z"}),"AutoAwesomeMotion");l.Z=r},53913:function(e,l,t){t.r(l),t.d(l,{default:function(){return K}});var o=t(85893),a=t(67294),n=t(577),r=t(61685),i=t(63366),d=t(87462),s=t(90512),u=t(14142),c=t(19032),v=t(92996),p=t(59948),h=t(99962),m=t(33703),f=t(94780),b=t(53406),x=t(74312),y=t(20407),g=t(30220),w=t(78653),T=t(26821);function S(e){return(0,T.d6)("MuiTooltip",e)}(0,T.sI)("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let j=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],Z=e=>{let{arrow:l,variant:t,color:o,size:a,placement:n,touch:r}=e,i={root:["root",l&&"tooltipArrow",r&&"touch",a&&`size${(0,u.Z)(a)}`,o&&`color${(0,u.Z)(o)}`,t&&`variant${(0,u.Z)(t)}`,`tooltipPlacement${(0,u.Z)(n.split("-")[0])}`],arrow:["arrow"]};return(0,f.Z)(i,S,{})},_=(0,x.Z)("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,l)=>l.root})(({ownerState:e,theme:l})=>{var t,o,a;let n=null==(t=l.variants[e.variant])?void 0:t[e.color];return(0,d.Z)({},"sm"===e.size&&{"--Icon-fontSize":l.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:l.spacing(.25,.625)},"md"===e.size&&{"--Icon-fontSize":l.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:l.spacing(.5,.75)},"lg"===e.size&&{"--Icon-fontSize":l.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:l.spacing(.75,1)},{zIndex:l.vars.zIndex.tooltip,borderRadius:l.vars.radius.sm,boxShadow:l.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},l.typography[`body-${({sm:"xs",md:"sm",lg:"md"})[e.size]}`],n,!n.backgroundColor&&{backgroundColor:l.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:null!=(o=e.placement)&&o.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:null!=(a=e.placement)&&a.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),k=(0,x.Z)("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,l)=>l.arrow})(({theme:e,ownerState:l})=>{var t,o,a;let n=null==(t=e.variants[l.variant])?void 0:t[l.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&:before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:null!=(o=null==n?void 0:n.backgroundColor)?o:e.vars.palette.background.surface,borderRightColor:null!=(a=null==n?void 0:n.backgroundColor)?a:e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${n.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}}),z=!1,N=null,R={x:0,y:0};function C(e,l){return t=>{l&&l(t),e(t)}}function q(e,l){return t=>{l&&l(t),e(t)}}let E=a.forwardRef(function(e,l){var t;let n=(0,y.Z)({props:e,name:"JoyTooltip"}),{children:r,className:u,component:f,arrow:x=!1,describeChild:T=!1,disableFocusListener:S=!1,disableHoverListener:E=!1,disableInteractive:M=!1,disableTouchListener:P=!1,enterDelay:D=100,enterNextDelay:O=0,enterTouchDelay:A=700,followCursor:L=!1,id:B,leaveDelay:W=0,leaveTouchDelay:I=1500,onClose:F,onOpen:V,open:$,disablePortal:Y,direction:H,keepMounted:J,modifiers:U,placement:X="bottom",title:K,color:G="neutral",variant:Q="solid",size:ee="md",slots:el={},slotProps:et={}}=n,eo=(0,i.Z)(n,j),{getColor:ea}=(0,w.VT)(Q),en=Y?ea(e.color,G):G,[er,ei]=a.useState(),[ed,es]=a.useState(null),eu=a.useRef(!1),ec=M||L,ev=a.useRef(),ep=a.useRef(),eh=a.useRef(),em=a.useRef(),[ef,eb]=(0,c.Z)({controlled:$,default:!1,name:"Tooltip",state:"open"}),ex=ef,ey=(0,v.Z)(B),eg=a.useRef(),ew=a.useCallback(()=>{void 0!==eg.current&&(document.body.style.WebkitUserSelect=eg.current,eg.current=void 0),clearTimeout(em.current)},[]);a.useEffect(()=>()=>{clearTimeout(ev.current),clearTimeout(ep.current),clearTimeout(eh.current),ew()},[ew]);let eT=e=>{N&&clearTimeout(N),z=!0,eb(!0),V&&!ex&&V(e)},eS=(0,p.Z)(e=>{N&&clearTimeout(N),N=setTimeout(()=>{z=!1},800+W),eb(!1),F&&ex&&F(e),clearTimeout(ev.current),ev.current=setTimeout(()=>{eu.current=!1},150)}),ej=e=>{eu.current&&"touchstart"!==e.type||(er&&er.removeAttribute("title"),clearTimeout(ep.current),clearTimeout(eh.current),D||z&&O?ep.current=setTimeout(()=>{eT(e)},z?O:D):eT(e))},eZ=e=>{clearTimeout(ep.current),clearTimeout(eh.current),eh.current=setTimeout(()=>{eS(e)},W)},{isFocusVisibleRef:e_,onBlur:ek,onFocus:ez,ref:eN}=(0,h.Z)(),[,eR]=a.useState(!1),eC=e=>{ek(e),!1===e_.current&&(eR(!1),eZ(e))},eq=e=>{er||ei(e.currentTarget),ez(e),!0===e_.current&&(eR(!0),ej(e))},eE=e=>{eu.current=!0;let l=r.props;l.onTouchStart&&l.onTouchStart(e)};a.useEffect(()=>{if(ex)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){("Escape"===e.key||"Esc"===e.key)&&eS(e)}},[eS,ex]);let eM=(0,m.Z)(ei,l),eP=(0,m.Z)(eN,eM),eD=(0,m.Z)(r.ref,eP);"number"==typeof K||K||(ex=!1);let eO=a.useRef(null),eA={},eL="string"==typeof K;T?(eA.title=ex||!eL||E?null:K,eA["aria-describedby"]=ex?ey:null):(eA["aria-label"]=eL?K:null,eA["aria-labelledby"]=ex&&!eL?ey:null);let eB=(0,d.Z)({},eA,eo,{component:f},r.props,{className:(0,s.Z)(u,r.props.className),onTouchStart:eE,ref:eD},L?{onMouseMove:e=>{let l=r.props;l.onMouseMove&&l.onMouseMove(e),R={x:e.clientX,y:e.clientY},eO.current&&eO.current.update()}}:{}),eW={};P||(eB.onTouchStart=e=>{eE(e),clearTimeout(eh.current),clearTimeout(ev.current),ew(),eg.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",em.current=setTimeout(()=>{document.body.style.WebkitUserSelect=eg.current,ej(e)},A)},eB.onTouchEnd=e=>{r.props.onTouchEnd&&r.props.onTouchEnd(e),ew(),clearTimeout(eh.current),eh.current=setTimeout(()=>{eS(e)},I)}),E||(eB.onMouseOver=C(ej,eB.onMouseOver),eB.onMouseLeave=C(eZ,eB.onMouseLeave),ec||(eW.onMouseOver=ej,eW.onMouseLeave=eZ)),S||(eB.onFocus=q(eq,eB.onFocus),eB.onBlur=q(eC,eB.onBlur),ec||(eW.onFocus=eq,eW.onBlur=eC));let eI=(0,d.Z)({},n,{arrow:x,disableInteractive:ec,placement:X,touch:eu.current,color:en,variant:Q,size:ee}),eF=Z(eI),eV=(0,d.Z)({},eo,{component:f,slots:el,slotProps:et}),e$=a.useMemo(()=>[{name:"arrow",enabled:!!ed,options:{element:ed,padding:6}},{name:"offset",options:{offset:[0,10]}},...U||[]],[ed,U]),[eY,eH]=(0,g.Z)("root",{additionalProps:(0,d.Z)({id:ey,popperRef:eO,placement:X,anchorEl:L?{getBoundingClientRect:()=>({top:R.y,left:R.x,right:R.x,bottom:R.y,width:0,height:0})}:er,open:!!er&&ex,disablePortal:Y,keepMounted:J,direction:H,modifiers:e$},eW),ref:null,className:eF.root,elementType:_,externalForwardedProps:eV,ownerState:eI}),[eJ,eU]=(0,g.Z)("arrow",{ref:es,className:eF.arrow,elementType:k,externalForwardedProps:eV,ownerState:eI}),eX=(0,o.jsxs)(eY,(0,d.Z)({},eH,!(null!=(t=n.slots)&&t.root)&&{as:b.r,slots:{root:f||"div"}},{children:[K,x?(0,o.jsx)(eJ,(0,d.Z)({},eU)):null]}));return(0,o.jsxs)(a.Fragment,{children:[a.isValidElement(r)&&a.cloneElement(r,eB),Y?eX:(0,o.jsx)(w.ZP.Provider,{value:void 0,children:eX})]})});var M=t(40911),P=t(99056),D=t(57814),O=t(48665),A=t(71577),L=t(27015),B=t(59566),W=t(32983),I=t(57346),F=t(44442),V=t(99513),$=t(30119),Y=t(39332),H=t(70803),J=t(39156);let{Search:U}=B.default;function X(e){var l,t,n;let{editorValue:i,chartData:d,tableData:s,handleChange:u}=e,c=a.useMemo(()=>d?(0,o.jsx)("div",{className:"flex-1 overflow-auto p-3",style:{flexShrink:0,overflow:"hidden"},children:(0,o.jsx)(J.Z,{chartsData:[d]})}):(0,o.jsx)("div",{}),[d]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,o.jsx)("div",{className:"flex-1",style:{flexShrink:0,overflow:"auto"},children:(0,o.jsx)(V.Z,{value:(null==i?void 0:i.sql)||"",language:"mysql",onChange:u,thoughts:(null==i?void 0:i.thoughts)||""})}),c]}),(0,o.jsx)("div",{className:"h-96 border-[var(--joy-palette-divider)] border-t border-solid overflow-auto",children:(null==s?void 0:null===(l=s.values)||void 0===l?void 0:l.length)>0?(0,o.jsxs)(r.Z,{"aria-label":"basic table",stickyHeader:!0,children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:null==s?void 0:null===(t=s.columns)||void 0===t?void 0:t.map((e,l)=>(0,o.jsx)("th",{children:e},e+l))})}),(0,o.jsx)("tbody",{children:null==s?void 0:null===(n=s.values)||void 0===n?void 0:n.map((e,l)=>{var t;return(0,o.jsx)("tr",{children:null===(t=Object.keys(e))||void 0===t?void 0:t.map(l=>(0,o.jsx)("td",{children:e[l]},l))},l)})})]}):(0,o.jsx)("div",{className:"h-full flex justify-center items-center",children:(0,o.jsx)(W.Z,{})})})]})}var K=function(){var e,l,t,r,i;let[d,s]=a.useState([]),[u,c]=a.useState(""),[v,p]=a.useState(),[h,m]=a.useState(!0),[f,b]=a.useState(),[x,y]=a.useState(),[g,w]=a.useState(),[T,S]=a.useState(),[j,Z]=a.useState(),_=(0,Y.useSearchParams)(),k=null==_?void 0:_.get("id"),z=null==_?void 0:_.get("scene"),{data:N,loading:R}=(0,n.Z)(async()=>await (0,$.Tk)("/v1/editor/sql/rounds",{con_uid:k}),{onSuccess:e=>{var l,t;let o=null==e?void 0:null===(l=e.data)||void 0===l?void 0:l[(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.length)-1];o&&p(null==o?void 0:o.round)}}),{run:C,loading:q}=(0,n.Z)(async()=>{var e,l;let t=null===(e=null==N?void 0:null===(l=N.data)||void 0===l?void 0:l.find(e=>e.round===v))||void 0===e?void 0:e.db_name;return await (0,$.PR)("/api/v1/editor/sql/run",{db_name:t,sql:null==g?void 0:g.sql})},{manual:!0,onSuccess:e=>{var l,t;S({columns:null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.colunms,values:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.values})}}),{run:B,loading:W}=(0,n.Z)(async()=>{var e,l;let t=null===(e=null==N?void 0:null===(l=N.data)||void 0===l?void 0:l.find(e=>e.round===v))||void 0===e?void 0:e.db_name,o={db_name:t,sql:null==g?void 0:g.sql};return"chat_dashboard"===z&&(o.chart_type=null==g?void 0:g.showcase),await (0,$.PR)("/api/v1/editor/chart/run",o)},{manual:!0,ready:!!(null==g?void 0:g.sql),onSuccess:e=>{if(null==e?void 0:e.success){var l,t,o,a,n,r,i;S({columns:(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(t=l.sql_data)||void 0===t?void 0:t.colunms)||[],values:(null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(a=o.sql_data)||void 0===a?void 0:a.values)||[]}),(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.chart_values)?b({type:null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.chart_type,values:null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.chart_values,title:null==g?void 0:g.title,description:null==g?void 0:g.thoughts}):b(void 0)}}}),{run:V,loading:J}=(0,n.Z)(async()=>{var e,l,t,o,a;let n=null===(e=null==N?void 0:null===(l=N.data)||void 0===l?void 0:l.find(e=>e.round===v))||void 0===e?void 0:e.db_name;return await (0,$.PR)("/api/v1/sql/editor/submit",{conv_uid:k,db_name:n,conv_round:v,old_sql:null==x?void 0:x.sql,old_speak:null==x?void 0:x.thoughts,new_sql:null==g?void 0:g.sql,new_speak:(null===(t=null==g?void 0:null===(o=g.thoughts)||void 0===o?void 0:o.match(/^\n--(.*)\n\n$/))||void 0===t?void 0:null===(a=t[1])||void 0===a?void 0:a.trim())||(null==g?void 0:g.thoughts)})},{manual:!0,onSuccess:e=>{(null==e?void 0:e.success)&&C()}}),{run:K,loading:G}=(0,n.Z)(async()=>{var e,l,t,o,a,n;let r=null===(e=null==N?void 0:null===(l=N.data)||void 0===l?void 0:l.find(e=>e.round===v))||void 0===e?void 0:e.db_name;return await (0,$.PR)("/api/v1/chart/editor/submit",{conv_uid:k,chart_title:null==g?void 0:g.title,db_name:r,old_sql:null==x?void 0:null===(t=x[j])||void 0===t?void 0:t.sql,new_chart_type:null==g?void 0:g.showcase,new_sql:null==g?void 0:g.sql,new_comment:(null===(o=null==g?void 0:null===(a=g.thoughts)||void 0===a?void 0:a.match(/^\n--(.*)\n\n$/))||void 0===o?void 0:null===(n=o[1])||void 0===n?void 0:n.trim())||(null==g?void 0:g.thoughts),gmt_create:new Date().getTime()})},{manual:!0,onSuccess:e=>{(null==e?void 0:e.success)&&B()}}),{data:Q}=(0,n.Z)(async()=>{var e,l;let t=null===(e=null==N?void 0:null===(l=N.data)||void 0===l?void 0:l.find(e=>e.round===v))||void 0===e?void 0:e.db_name;return await (0,$.Tk)("/v1/editor/db/tables",{db_name:t,page_index:1,page_size:200})},{ready:!!(null===(e=null==N?void 0:null===(l=N.data)||void 0===l?void 0:l.find(e=>e.round===v))||void 0===e?void 0:e.db_name),refreshDeps:[null===(t=null==N?void 0:null===(r=N.data)||void 0===r?void 0:r.find(e=>e.round===v))||void 0===t?void 0:t.db_name]}),{run:ee}=(0,n.Z)(async e=>await (0,$.Tk)("/v1/editor/sql",{con_uid:k,round:e}),{manual:!0,onSuccess:e=>{let l;try{if(Array.isArray(null==e?void 0:e.data))l=null==e?void 0:e.data,Z("0");else if("string"==typeof(null==e?void 0:e.data)){let t=JSON.parse(null==e?void 0:e.data);l=t}else l=null==e?void 0:e.data}catch(e){console.log(e)}finally{y(l),Array.isArray(l)?w(null==l?void 0:l[Number(j||0)]):w(l)}}}),el=a.useMemo(()=>{let e=(l,t)=>l.map(l=>{let a=l.title,n=a.indexOf(u),r=a.substring(0,n),i=a.slice(n+u.length),d=n>-1?(0,o.jsx)(E,{title:((null==l?void 0:l.comment)||(null==l?void 0:l.title))+((null==l?void 0:l.can_null)==="YES"?"(can null)":"(can't null)"),children:(0,o.jsxs)("span",{children:[r,(0,o.jsx)("span",{className:"text-[#1677ff]",children:u}),i,(null==l?void 0:l.type)&&(0,o.jsx)(M.ZP,{gutterBottom:!0,level:"body3",className:"pl-0.5",style:{display:"inline"},children:"[".concat(null==l?void 0:l.type,"]")})]})}):(0,o.jsx)(E,{title:((null==l?void 0:l.comment)||(null==l?void 0:l.title))+((null==l?void 0:l.can_null)==="YES"?"(can null)":"(can't null)"),children:(0,o.jsxs)("span",{children:[a,(null==l?void 0:l.type)&&(0,o.jsx)(M.ZP,{gutterBottom:!0,level:"body3",className:"pl-0.5",style:{display:"inline"},children:"[".concat(null==l?void 0:l.type,"]")})]})});if(l.children){let o=t?String(t)+"_"+l.key:l.key;return{title:a,showTitle:d,key:o,children:e(l.children,o)}}return{title:a,showTitle:d,key:l.key}});return(null==Q?void 0:Q.data)?(s([null==Q?void 0:Q.data.key]),e([null==Q?void 0:Q.data])):[]},[u,Q]),et=a.useMemo(()=>{let e=[],l=(t,o)=>{if(t&&!((null==t?void 0:t.length)<=0))for(let a=0;a<t.length;a++){let n=t[a],{key:r,title:i}=n;e.push({key:r,title:i,parentKey:o}),n.children&&l(n.children,r)}};return el&&l(el),e},[el]),eo=(e,l)=>{let t;for(let o=0;o<l.length;o++){let a=l[o];a.children&&(a.children.some(l=>l.key===e)?t=a.key:eo(e,a.children)&&(t=eo(e,a.children)))}return t};function ea(e){let l;if(!e)return{sql:"",thoughts:""};let t=e&&e.match(/(--.*)\n([\s\S]*)/),o="";return t&&t.length>=3&&(o=t[1],l=t[2]),{sql:l,thoughts:o}}return a.useEffect(()=>{v&&ee(v)},[ee,v]),a.useEffect(()=>{x&&"chat_dashboard"===z&&j&&B()},[j,z,x,B]),a.useEffect(()=>{x&&"chat_dashboard"!==z&&C()},[z,x,C]),(0,o.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,o.jsx)(H.Z,{}),(0,o.jsxs)("div",{className:"relative flex flex-1 overflow-auto",children:[(0,o.jsxs)("div",{className:"text h-full border-[var(--joy-palette-divider)] border-r border-solid p-3 max-h-full overflow-auto",style:{width:"300px"},children:[(0,o.jsxs)("div",{className:"absolute right-4 top-2 z-10",children:[(0,o.jsx)(A.ZP,{className:"mr-2",type:"primary",loading:q||W,onClick:async()=>{"chat_dashboard"===z?B():C()},children:"Run"}),(0,o.jsx)(A.ZP,{loading:J||G,onClick:async()=>{"chat_dashboard"===z?await K():await V()},children:"Save"})]}),(0,o.jsxs)("div",{className:"flex items-center py-3",children:[(0,o.jsx)(P.Z,{className:"h-4 min-w-[240px]",size:"sm",value:v,onChange:(e,l)=>{p(l)},children:null==N?void 0:null===(i=N.data)||void 0===i?void 0:i.map(e=>(0,o.jsx)(D.Z,{value:null==e?void 0:e.round,children:null==e?void 0:e.round_name},null==e?void 0:e.round))}),(0,o.jsx)(L.Z,{className:"ml-2"})]}),(0,o.jsx)(U,{style:{marginBottom:8},placeholder:"Search",onChange:e=>{let{value:l}=e.target;if(null==Q?void 0:Q.data){if(l){let e=et.map(e=>e.title.indexOf(l)>-1?eo(e.key,el):null).filter((e,l,t)=>e&&t.indexOf(e)===l);s(e)}else s([]);c(l),m(!0)}}}),el&&el.length>0&&(0,o.jsx)(I.Z,{onExpand:e=>{s(e),m(!1)},expandedKeys:d,autoExpandParent:h,treeData:el,fieldNames:{title:"showTitle"}})]}),(0,o.jsx)("div",{className:"flex flex-col flex-1 max-w-full overflow-hidden",children:Array.isArray(x)?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(O.Z,{className:"h-full",sx:{".ant-tabs-content, .ant-tabs-tabpane-active":{height:"100%"},"& .ant-tabs-card.ant-tabs-top >.ant-tabs-nav .ant-tabs-tab, & .ant-tabs-card.ant-tabs-top >div>.ant-tabs-nav .ant-tabs-tab":{borderRadius:"0"}},children:(0,o.jsx)(F.Z,{className:"h-full dark:text-white px-2",activeKey:j,onChange:e=>{Z(e),w(null==x?void 0:x[Number(e)])},items:null==x?void 0:x.map((e,l)=>({key:l+"",label:null==e?void 0:e.title,children:(0,o.jsx)("div",{className:"flex flex-col h-full",children:(0,o.jsx)(X,{editorValue:e,handleChange:e=>{let{sql:l,thoughts:t}=ea(e);w(e=>Object.assign({},e,{sql:l,thoughts:t}))},tableData:T,chartData:f})})}))})})}):(0,o.jsx)(X,{editorValue:x,handleChange:e=>{let{sql:l,thoughts:t}=ea(e);w(e=>Object.assign({},e,{sql:l,thoughts:t}))},tableData:T,chartData:void 0})})]})]})}}}]);