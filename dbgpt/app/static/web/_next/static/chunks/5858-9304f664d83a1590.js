"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5858],{18458:function(e,t,l){var s=l(96469),r=l(37022);t.Z=function(e){let{visible:t}=e;return t?(0,s.jsx)("div",{className:"absolute w-full h-full top-0 left-0 flex justify-center items-center z-10 bg-white dark:bg-black bg-opacity-50 dark:bg-opacity-50 backdrop-blur-sm text-3xl animate-fade animate-duration-200",children:(0,s.jsx)(r.Z,{})}):null}},53525:function(e,t,l){var s=l(96469),r=l(27623),n=l(97511),a=l(41999),o=l(67853),i=l(62971),c=l(86776),d=l(27691),u=l(38497),p=l(56841),m=l(7289),f=l(28926);let{Search:x}=a.default;t.Z=()=>{let{t:e}=(0,p.$G)(),[t,l]=(0,u.useState)([]),[a,h]=(0,u.useState)([]),[g,j]=(0,u.useState)([]),[v,b]=(0,u.useState)([]),[y,w]=(0,u.useState)("");async function N(){let[e,t]=await (0,r.Vx)((0,r.As)());if(t&&t.length>0){localStorage.setItem(m.zN,JSON.stringify(t));let e=t.filter(e=>"operator"===e.flow_type),s=t.filter(e=>"resource"===e.flow_type);l(e),h(s),j(_(e)),b(_(s))}}function _(e){let t=[],l={};return e.forEach(e=>{let{category:s,category_label:r}=e;l[s]||(l[s]={category:s,categoryLabel:r,nodes:[]},t.push(l[s])),l[s].nodes.push(e)}),t}(0,u.useEffect)(()=>{N()},[]);let Z=(0,u.useMemo)(()=>{if(!y)return g.map(e=>{let{category:t,categoryLabel:l,nodes:r}=e;return{key:t,label:l,children:(0,s.jsx)(f.Z,{nodes:r}),extra:(0,s.jsx)(o.Z,{showZero:!0,count:r.length||0,style:{backgroundColor:r.length>0?"#52c41a":"#7f9474"}})}});{let e=t.filter(e=>e.label.toLowerCase().includes(y.toLowerCase()));return _(e).map(e=>{let{category:t,categoryLabel:l,nodes:r}=e;return{key:t,label:l,children:(0,s.jsx)(f.Z,{nodes:r}),extra:(0,s.jsx)(o.Z,{showZero:!0,count:r.length||0,style:{backgroundColor:r.length>0?"#52c41a":"#7f9474"}})}})}},[g,y]),k=(0,u.useMemo)(()=>{if(!y)return v.map(e=>{let{category:t,categoryLabel:l,nodes:r}=e;return{key:t,label:l,children:(0,s.jsx)(f.Z,{nodes:r}),extra:(0,s.jsx)(o.Z,{showZero:!0,count:r.length||0,style:{backgroundColor:r.length>0?"#52c41a":"#7f9474"}})}});{let e=a.filter(e=>e.label.toLowerCase().includes(y.toLowerCase()));return _(e).map(e=>{let{category:t,categoryLabel:l,nodes:r}=e;return{key:t,label:l,children:(0,s.jsx)(f.Z,{nodes:r}),extra:(0,s.jsx)(o.Z,{showZero:!0,count:r.length||0,style:{backgroundColor:r.length>0?"#52c41a":"#7f9474"}})}})}},[v,y]);return(0,s.jsx)(i.Z,{placement:"bottom",trigger:["click"],content:(0,s.jsxs)("div",{className:"w-[320px] overflow-hidden overflow-y-auto scrollbar-default",children:[(0,s.jsx)("p",{className:"my-2 font-bold",children:e("add_node")}),(0,s.jsx)(x,{placeholder:"Search node",onSearch:function(e){w(e)}}),(0,s.jsx)("h2",{className:"my-2 ml-2 font-semibold",children:e("operators")}),(0,s.jsx)(c.Z,{className:"max-h-[300px] overflow-hidden overflow-y-auto scrollbar-default",size:"small",defaultActiveKey:[""],items:Z}),(0,s.jsx)("h2",{className:"my-2 ml-2 font-semibold",children:e("resource")}),(0,s.jsx)(c.Z,{className:"max-h-[300px] overflow-hidden overflow-y-auto scrollbar-default",size:"small",defaultActiveKey:[""],items:k})]}),children:(0,s.jsx)(d.ZP,{type:"primary",className:"flex items-center justify-center rounded-full left-4 top-4",style:{zIndex:1050},icon:(0,s.jsx)(n.Z,{})})})}},35748:function(e,t,l){var s=l(96469);l(38497);var r=l(71554);t.Z=e=>{let{id:t,sourceX:l,sourceY:n,targetX:a,targetY:o,sourcePosition:i,targetPosition:c,style:d={},data:u,markerEnd:p}=e,[m,f,x]=(0,r.OQ)({sourceX:l,sourceY:n,sourcePosition:i,targetX:a,targetY:o,targetPosition:c}),h=(0,r._K)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.u5,{id:t,style:d,path:m,markerEnd:p}),(0,s.jsx)("foreignObject",{width:40,height:40,x:f-20,y:x-20,className:"bg-transparent w-10 h-10 relative",requiredExtensions:"http://www.w3.org/1999/xhtml",children:(0,s.jsx)("button",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-stone-400 dark:bg-zinc-700 cursor-pointer text-sm",onClick:e=>{e.stopPropagation(),h.setEdges(h.getEdges().filter(e=>e.id!==t))},children:"\xd7"})})]})}},64919:function(e,t,l){l.d(t,{Z:function(){return A}});var s=l(96469),r=l(23852),n=l.n(r),a=l(60205),o=l(99631),i=l(16156),c=l(41999),d=l(29223),u=l(38497),p=e=>{let{optional:t}=e;return t?null:(0,s.jsx)("span",{className:"text-red-600 align-middle inline-block",children:"\xa0*"})},m=l(70351),f=l(21840),x=l(13419),h=l(71554),g=l(97511),j=l(39600),v=l(56841),b=l(26869),y=l.n(b),w=l(7289),N=l(28926),_=e=>{let{node:t,data:l,type:r,label:n,index:o}=e,{t:i}=(0,v.$G)(),c=(0,h._K)(),[d,b]=u.useState([]);function _(){let e=localStorage.getItem(w.zN);if(!e)return;let s=JSON.parse(e),r=l.type_cls,a=[];"inputs"===n?a=s.filter(e=>"operator"===e.flow_type).filter(e=>{var t;return null===(t=e.outputs)||void 0===t?void 0:t.some(e=>e.type_cls===r&&e.is_list===(null==l?void 0:l.is_list))}):"parameters"===n?a=s.filter(e=>"resource"===e.flow_type).filter(e=>{var t;return null===(t=e.parent_cls)||void 0===t?void 0:t.includes(r)}):"outputs"===n&&("operator"===t.flow_type?a=s.filter(e=>"operator"===e.flow_type).filter(e=>{var t;return null===(t=e.inputs)||void 0===t?void 0:t.some(e=>e.type_cls===r&&e.is_list===(null==l?void 0:l.is_list))}):"resource"===t.flow_type&&(a=s.filter(e=>{var l,s;return(null===(l=e.inputs)||void 0===l?void 0:l.some(e=>{var l;return null===(l=t.parent_cls)||void 0===l?void 0:l.includes(e.type_cls)}))||(null===(s=e.parameters)||void 0===s?void 0:s.some(e=>{var l;return null===(l=t.parent_cls)||void 0===l?void 0:l.includes(e.type_cls)}))}))),b(a)}return(0,s.jsxs)("div",{className:y()("relative flex items-center",{"justify-start":"parameters"===n||"inputs"===n,"justify-end":"outputs"===n}),children:[(0,s.jsx)(h.HH,{className:"w-2 h-2",type:r,position:"source"===r?h.Ly.Right:h.Ly.Left,id:"".concat(t.id,"|").concat(n,"|").concat(o),isValidConnection:e=>(function(e){let{sourceHandle:t,targetHandle:l,source:s,target:r}=e,n=c.getNode(s),a=c.getNode(r),{flow_type:o}=null==n?void 0:n.data,{flow_type:d}=null==a?void 0:a.data,u=null==t?void 0:t.split("|")[1],p=null==l?void 0:l.split("|")[1],f=null==t?void 0:t.split("|")[2],x=null==l?void 0:l.split("|")[2],h=null==a?void 0:a.data[p][x].type_cls;if(o===d&&"operator"===o){let e=null==n?void 0:n.data[u][f].type_cls,t=null==n?void 0:n.data[u][f].is_list,l=null==a?void 0:a.data[p][x].is_list;return e===h&&t===l}if("resource"===o&&("operator"===d||"resource"===d)){let e=null==n?void 0:n.data.parent_cls;return e.includes(h)}return m.ZP.warning(i("connect_warning")),!1})(e)}),(0,s.jsxs)(f.Z,{className:y()("p-2",{"pr-4":"outputs"===n}),children:[(0,s.jsx)(x.Z,{placement:"left",icon:null,showCancel:!1,okButtonProps:{className:"hidden"},title:i("related_nodes"),description:(0,s.jsx)("div",{className:"w-60",children:(0,s.jsx)(N.Z,{nodes:d})}),children:["inputs","parameters"].includes(n)&&(0,s.jsx)(g.Z,{className:"mr-2 cursor-pointer",onClick:_})}),l.type_name,":","outputs"!==n&&(0,s.jsx)(p,{optional:l.optional}),l.description&&(0,s.jsx)(a.Z,{title:l.description,children:(0,s.jsx)(j.Z,{className:"ml-2 cursor-pointer"})}),(0,s.jsx)(x.Z,{placement:"right",icon:null,showCancel:!1,okButtonProps:{className:"hidden"},title:i("related_nodes"),description:(0,s.jsx)("div",{className:"w-60",children:(0,s.jsx)(N.Z,{nodes:d})}),children:["outputs"].includes(n)&&(0,s.jsx)(g.Z,{className:"ml-2 cursor-pointer",onClick:_})})]})]})},Z=e=>{let{node:t,data:l,label:r,index:n}=e;function u(e){l.value=e}if("resource"===l.category)return(0,s.jsx)(_,{node:t,data:l,type:"target",label:r,index:n});if("common"===l.category){let e=null!==l.value&&void 0!==l.value?l.value:l.default;switch(l.type_name){case"int":case"float":return(0,s.jsxs)("div",{className:"p-2 text-sm",children:[(0,s.jsxs)("p",{children:[l.label,":",(0,s.jsx)(p,{optional:l.optional}),l.description&&(0,s.jsx)(a.Z,{title:l.description,children:(0,s.jsx)(j.Z,{className:"ml-2 cursor-pointer"})})]}),(0,s.jsx)(o.Z,{className:"w-full",defaultValue:e,onChange:e=>{u(e)}})]});case"str":var m;return(0,s.jsxs)("div",{className:"p-2 text-sm",children:[(0,s.jsxs)("p",{children:[l.label,":",(0,s.jsx)(p,{optional:l.optional}),l.description&&(0,s.jsx)(a.Z,{title:l.description,children:(0,s.jsx)(j.Z,{className:"ml-2 cursor-pointer"})})]}),(null===(m=l.options)||void 0===m?void 0:m.length)>0?(0,s.jsx)(i.default,{className:"w-full nodrag",defaultValue:e,options:l.options.map(e=>({label:e.label,value:e.value})),onChange:u}):(0,s.jsx)(c.default,{className:"w-full",defaultValue:e,onChange:e=>{u(e.target.value)}})]});case"bool":return e="True"===(e="False"!==e&&e)||e,(0,s.jsx)("div",{className:"p-2 text-sm",children:(0,s.jsxs)("p",{children:[l.label,":",(0,s.jsx)(p,{optional:l.optional}),l.description&&(0,s.jsx)(a.Z,{title:l.description,children:(0,s.jsx)(j.Z,{className:"ml-2 cursor-pointer"})}),(0,s.jsx)(d.Z,{className:"ml-2",defaultChecked:e,onChange:e=>{u(e.target.checked)}})]})})}}},k=l(62971),C=l(67576),S=l(2537),z=e=>{let{children:t,className:l}=e;return(0,s.jsx)("div",{className:y()("flex justify-center items-center w-8 h-8 rounded-full dark:bg-zinc-700 hover:bg-stone-200 dark:hover:bg-zinc-900",l),children:t})},E=l(27970),F=l(44766);function L(e){let{label:t}=e;return(0,s.jsx)("div",{className:"w-full h-8 bg-stone-100 dark:bg-zinc-700 px-2 flex items-center justify-center",children:t})}var A=e=>{let{data:t}=e,{inputs:l,outputs:r,parameters:o,flow_type:i}=t,[c,d]=(0,u.useState)(!1),p=(0,h._K)();return(0,s.jsx)(k.Z,{placement:"rightTop",trigger:["hover"],content:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z,{className:"hover:text-blue-500",children:(0,s.jsx)(C.Z,{className:"h-full text-lg cursor-pointer",onClick:function(e){e.preventDefault(),e.stopPropagation();let l=p.getNodes(),s=l.find(e=>e.id===t.id);if(s){let e=(0,E.VZ)(s,l),t=(0,F.cloneDeep)(s),r={...t,id:e,position:{x:t.position.x+400,y:t.position.y},positionAbsolute:{x:t.positionAbsolute.x+400,y:t.positionAbsolute.y},data:{...t.data,id:e},selected:!1};p.setNodes(e=>[...e,r])}}})}),(0,s.jsx)(z,{className:"mt-2 hover:text-red-500",children:(0,s.jsx)(S.Z,{className:"h-full text-lg cursor-pointer",onClick:function(e){e.preventDefault(),e.stopPropagation(),p.setNodes(e=>e.filter(e=>e.id!==t.id)),p.setEdges(e=>e.filter(e=>e.source!==t.id&&e.target!==t.id))}})}),(0,s.jsx)(z,{className:"mt-2",children:(0,s.jsx)(a.Z,{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-bold",children:t.label}),(0,s.jsx)("p",{children:t.description})]}),placement:"right",children:(0,s.jsx)(j.Z,{className:"h-full text-lg cursor-pointer"})})})]}),children:(0,s.jsxs)("div",{className:y()("w-72 h-auto rounded-xl shadow-md p-0 border bg-white dark:bg-zinc-800 cursor-grab",{"border-blue-500":t.selected||c,"border-stone-400 dark:border-white":!t.selected&&!c,"border-dashed":"operator"!==i,"border-red-600":t.invalid}),onMouseEnter:function(){d(!0)},onMouseLeave:function(){d(!1)},children:[(0,s.jsxs)("div",{className:"flex flex-row items-center p-2",children:[(0,s.jsx)(n(),{src:"/icons/node/vis.png",width:24,height:24,alt:""}),(0,s.jsx)("p",{className:"ml-2 text-lg font-bold text-ellipsis overflow-hidden whitespace-nowrap",children:t.label})]}),l&&l.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L,{label:"Inputs"}),(l||[]).map((e,l)=>(0,s.jsx)(_,{node:t,data:e,type:"target",label:"inputs",index:l},"".concat(t.id,"_input_").concat(l)))]}),o&&o.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L,{label:"Parameters"}),(o||[]).map((e,l)=>(0,s.jsx)(Z,{node:t,data:e,label:"parameters",index:l},"".concat(t.id,"_param_").concat(l)))]}),"operator"===i&&(null==r?void 0:r.length)>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L,{label:"Outputs"}),(r||[]).map((e,l)=>(0,s.jsx)(_,{node:t,data:e,type:"source",label:"outputs",index:l},"".concat(t.id,"_input_").concat(l)))]}):"resource"===i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L,{label:"Outputs"}),(0,s.jsx)(_,{node:t,data:t,type:"source",label:"outputs",index:0},"".concat(t.id,"_input_0"))]}):void 0]})})}},28926:function(e,t,l){var s=l(96469),r=l(82141),n=l(19629),a=l(97818);l(38497);var o=l(56841);t.Z=e=>{let{nodes:t}=e,{t:l}=(0,o.$G)();return(null==t?void 0:t.length)>0?(0,s.jsx)(r.Z,{className:"overflow-hidden overflow-y-auto w-full",itemLayout:"horizontal",dataSource:t,renderItem:e=>(0,s.jsx)(r.Z.Item,{className:"cursor-move hover:bg-[#F1F5F9] dark:hover:bg-theme-dark p-0 py-2",draggable:!0,onDragStart:t=>{t.dataTransfer.setData("application/reactflow",JSON.stringify(e)),t.dataTransfer.effectAllowed="move"},children:(0,s.jsx)(r.Z.Item.Meta,{className:"flex items-center justify-center",avatar:(0,s.jsx)(n.C,{src:"/icons/node/vis.png",size:"large"}),title:(0,s.jsx)("p",{className:"line-clamp-1 font-medium",children:e.label}),description:(0,s.jsx)("p",{className:"line-clamp-2",children:e.description})})})}):(0,s.jsx)(a.Z,{className:"px-2",description:l("no_node")})}},27970:function(e,t,l){l.d(t,{Rv:function(){return a},VZ:function(){return s},Wf:function(){return r},z5:function(){return n}});let s=(e,t)=>{let l=0;return t.forEach(t=>{t.data.name===e.name&&l++}),"".concat(e.id,"_").concat(l)},r=e=>{let{nodes:t,edges:l,...s}=e,r=t.map(e=>{let{positionAbsolute:t,...l}=e;return{position_absolute:t,...l}}),n=l.map(e=>{let{sourceHandle:t,targetHandle:l,...s}=e;return{source_handle:t,target_handle:l,...s}});return{nodes:r,edges:n,...s}},n=e=>{let{nodes:t,edges:l,...s}=e,r=t.map(e=>{let{position_absolute:t,...l}=e;return{positionAbsolute:t,...l}}),n=l.map(e=>{let{source_handle:t,target_handle:l,...s}=e;return{sourceHandle:t,targetHandle:l,...s}});return{nodes:r,edges:n,...s}},a=e=>{let{nodes:t,edges:l}=e,s=[!0,t[0],""];e:for(let e=0;e<t.length;e++){let r=t[e].data,{inputs:n=[],parameters:a=[]}=r;for(let a=0;a<n.length;a++)if(!l.some(l=>l.targetHandle==="".concat(t[e].id,"|inputs|").concat(a))){s=[!1,t[e],"The input ".concat(n[a].type_name," of node ").concat(r.label," is required")];break e}for(let n=0;n<a.length;n++){let o=a[n];if(o.optional||"resource"!==o.category||l.some(l=>l.targetHandle==="".concat(t[e].id,"|parameters|").concat(n))){if(!o.optional&&"common"===o.category&&(void 0===o.value||null===o.value)){s=[!1,t[e],"The parameter ".concat(o.type_name," of node ").concat(r.label," is required")];break e}}else{s=[!1,t[e],"The parameter ".concat(o.type_name," of node ").concat(r.label," is required")];break e}}}return s}}}]);