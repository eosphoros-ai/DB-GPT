(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7537],{15531:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construct/app/extra/components/auto-plan",function(){return a(78174)}])},78174:function(e,l,a){"use strict";a.r(l);var n=a(85893),t=a(76212),s=a(25035),r=a(65654),u=a(84567),i=a(83062),d=a(99859),o=a(42075),c=a(93967),m=a.n(c),p=a(96486),v=a(67294),x=a(67421),f=a(83072),g=a(77451);let _=e=>{let{value:l,onChange:a,agents:t,selectedTab:r,setSelectedTab:d}=e;return(0,n.jsx)(u.Z.Group,{className:"grid grid-cols-4 gap-4",onChange:e=>{null==a||a(e)},value:l,children:t.map(e=>(0,n.jsxs)("div",{className:"flex grow h-8 items-center px-3 border ".concat(e.name===r?"border-[#0c75fc]":"border-[#d6d8da]"," rounded-md hover:border-[#0c75fc] cursor-pointer"),onClick:()=>{d(e.name||"")},children:[(0,n.jsx)(u.Z,{value:e.name}),(0,n.jsxs)("div",{className:"flex items-center flex-1 justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"ml-2 mr-1",children:f.agentIcon[e.name||""]}),(0,n.jsx)("span",{className:"text-sm text-[rgba(0,10,26,0.68)] dark:text-[rgba(255,255,255,0.85)]",children:e.label})]}),(0,n.jsx)(i.Z,{title:e.desc,children:(0,n.jsx)(s.Z,{className:"text-sm"})})]})]},e.name))})};l.default=e=>{var l,a,s;let{initValue:u,updateData:i,classNames:c}=e,{t:h,i18n:b}=(0,x.$G)(),[j]=d.default.useForm(),N=d.default.useWatch("agent_name",j),[w,y]=(0,v.useState)(""),k=(0,v.useRef)([]),T="en"===b.language,{data:V,loading:Z}=(0,r.Z)(async()=>{var e,l;let a=await Promise.all([(0,t.Vx)((0,t.j8)()),(0,t.Vx)((0,t.Vd)()),(0,t.Vx)((0,t.Q5)())]),[,n]=(null==a?void 0:a[0])||[];return k.current=(null==n?void 0:n.map(e=>({agent_name:e.name,llm_strategy:"",llm_strategy_value:"",prompt_template:"",resources:[]})))||[],j.setFieldsValue({agent_name:null==u?void 0:u.map(e=>e.agent_name)}),y((null===(e=null==u?void 0:u.map(e=>e.agent_name))||void 0===e?void 0:e[0])||(null==n?void 0:null===(l=n[0])||void 0===l?void 0:l.name)||""),null!=a?a:[]}),{data:C}=(0,r.Z)(async()=>{let[,e]=await (0,t.Vx)((0,t.xA)({page:1,page_size:1e5}));return null!=e?e:{items:[]}}),E=(0,v.useMemo)(()=>{let[,e]=(null==V?void 0:V[1])||[];return(null==e?void 0:e.length)?e.map(e=>({label:T?e.name:e.name_cn,value:e.value})):[]},[V]),I=(0,v.useMemo)(()=>{let[,e]=(null==V?void 0:V[2])||[];if(null==e?void 0:e.length){let l=e.map(e=>({label:(0,n.jsxs)(o.Z,{children:[f.resourceTypeIcon[e],e]}),value:e}));return(0,p.concat)([{label:(0,n.jsxs)("div",{className:"flex items-center text-sm",children:[f.resourceTypeIcon.all,(0,n.jsx)("span",{className:"ml-2 text-[rgba(0,10,26,0.68)] dark:text-[#ffffffD9]",children:h("All")})]}),value:"all"}],l)}return[]},[V]);return(0,v.useEffect)(()=>{i([Z,k.current.filter(e=>null==N?void 0:N.includes(e.agent_name))])},[Z,N,i]),(0,n.jsxs)("div",{className:m()(c),children:[(0,n.jsx)(d.default,{form:j,style:{width:"100%"},labelCol:{span:4},wrapperCol:{span:20},children:(0,n.jsx)(d.default.Item,{label:"".concat(h("choose")," agent"),name:"agent_name",required:!0,rules:[{required:!0,message:h("please_choose")+" agent"}],children:(0,n.jsx)(_,{agents:(null==V?void 0:null===(l=V[0])||void 0===l?void 0:l[1])||[],selectedTab:w,setSelectedTab:y})})}),null==V?void 0:null===(a=V[0])||void 0===a?void 0:null===(s=a[1])||void 0===s?void 0:s.map(e=>(0,n.jsx)(g.default,{classNames:e.name===w?"block":"hidden",updateData:e=>{k.current=k.current.map(l=>l.agent_name===(null==e?void 0:e.agent_name)?{...l,...e}:{...l}),i([Z,k.current.filter(e=>null==N?void 0:N.includes(e.agent_name))])},initValue:u,name:e.name,modelStrategyOptions:E,resourceTypeOptions:I,promptList:(null==C?void 0:C.items)||[]},e.name))]})}}},function(e){e.O(0,[3662,7034,8674,930,3166,2837,2168,8163,7126,2648,3791,2913,5278,8791,4330,1049,5030,4041,2398,9859,3799,2684,1300,4567,9773,3457,4455,5110,4705,9202,5782,7873,5706,8709,9256,8510,9774,2888,179],function(){return e(e.s=15531)}),_N_E=e.O()}]);