(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{50173:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(36282)}])},26953:function(e,t,a){"use strict";var l=a(96469),n=a(67901),c=a(42834),s=a(38497);t.Z=e=>{let{width:t,height:a,scene:r}=e,o=(0,s.useCallback)(()=>{switch(r){case"chat_knowledge":return n.je;case"chat_with_db_execute":return n.zM;case"chat_excel":return n.DL;case"chat_with_db_qa":case"chat_dba":return n.RD;case"chat_dashboard":return n.In;case"chat_agent":return n.si;case"chat_normal":return n.O7;default:return}},[r]);return(0,l.jsx)(c.Z,{className:"w-".concat(t||7," h-").concat(a||7),component:o()})}},58526:function(e,t,a){"use strict";var l=a(96890);let n=(0,l.Z)({scriptUrl:"//at.alicdn.com/t/a/font_4440880_ljyggdw605.js"});t.Z=n},52903:function(e,t,a){"use strict";a.d(t,{TH:function(){return m},ZS:function(){return x}});var l=a(96469),n=a(52896),c=a(60205),s=a(87674),r=a(21840),o=a(80335),i=a(26869),d=a.n(i),p=a(83930),u=a(23852),h=a.n(u);a(38497);var _=a(26953);a(96768);let m=e=>{let{onClick:t,Icon:a="/pictures/card_chat.png",text:n=(0,p.t)("start_chat")}=e;return"string"==typeof a&&(a=(0,l.jsx)(h(),{src:a,alt:a,width:17,height:15})),(0,l.jsxs)("div",{className:"flex items-center gap-1 text-default",onClick:e=>{e.stopPropagation(),t&&t()},children:[a,(0,l.jsx)("span",{children:n})]})},x=e=>{let{menu:t}=e;return(0,l.jsx)(o.Z,{menu:t,getPopupContainer:e=>e.parentNode,placement:"bottomRight",autoAdjustOverflow:!1,children:(0,l.jsx)(n.Z,{className:"p-2 hover:bg-white hover:dark:bg-black rounded-md"})})};t.ZP=e=>{let{RightTop:t,Tags:a,LeftBottom:n,RightBottom:o,onClick:i,rightTopHover:p=!0,logo:u,name:m,description:x,className:f,scene:g,code:b}=e;return"string"==typeof x&&(x=(0,l.jsx)("p",{className:"line-clamp-2 relative bottom-4 text-ellipsis min-h-[42px] text-sm text-[#525964] dark:text-[rgba(255,255,255,0.65)]",children:x})),(0,l.jsx)("div",{className:d()("hover-underline-gradient flex justify-center mt-6 relative group w-1/3 px-2 mb-6",f),children:(0,l.jsxs)("div",{onClick:i,className:"backdrop-filter backdrop-blur-lg cursor-pointer  bg-white bg-opacity-70 border-2 border-white rounded-lg shadow p-4 relative w-full h-full dark:border-[#6f7f95] dark:bg-[#6f7f95] dark:bg-opacity-60",children:[(0,l.jsxs)("div",{className:"flex items-end relative bottom-8 justify-between w-full",children:[(0,l.jsxs)("div",{className:"flex items-end gap-4 w-11/12",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm w-14 h-14 flex items-center p-3",children:g?(0,l.jsx)(_.Z,{scene:g,width:14,height:14}):u&&(0,l.jsx)(h(),{src:u,width:44,height:44,alt:m,className:"w-8 min-w-8 rounded-full"})}),(0,l.jsx)("div",{children:m.length>6?(0,l.jsx)(c.Z,{title:m,children:(0,l.jsx)("span",{className:"truncate font-semibold text-base",style:{maxWidth:"60%"},children:m})}):(0,l.jsx)("span",{className:"truncate font-semibold text-base",style:{maxWidth:"60%"},children:m})})]}),(0,l.jsx)("span",{className:d()({hidden:p,"group-hover:block":p}),onClick:e=>{e.stopPropagation()},children:t})]}),x,(0,l.jsx)("div",{className:"relative bottom-2",children:a}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("div",{children:n}),(0,l.jsx)("div",{children:o})]}),b&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Z,{className:"my-3"}),(0,l.jsx)(r.Z.Text,{copyable:!0,className:"absolute bottom-1 right-4 text-xs text-gray-500",children:b})]})]})})}},36282:function(e,t,a){"use strict";a.r(t);var l=a(96469),n=a(27623),c=a(629),s=a(72804),r=a(29766),o=a(97511),i=a(16602),d=a(70351),p=a(19629),u=a(42518),h=a(197),_=a(41999),m=a(27691),x=a(42786),f=a(26869),g=a.n(f),b=a(87313),v=a(38497),j=a(56841),w=a(97084),N=a(58526),k=a(52903),y=a(45277),Z=a(61671),C=a.n(Z);t.default=()=>{let e=(0,b.useRouter)(),{t}=(0,j.$G)(),{setAgent:a,setCurrentDialogInfo:f,model:Z}=(0,v.useContext)(y.p),[S,P]=(0,v.useState)("all");(0,v.useDeferredValue)(S);let[E,I]=(0,v.useState)({app_list:[],total_count:0}),R=[{value:"recommend",label:t("recommend_apps")},{value:"all",label:t("all_apps")},{value:"collected",label:t("my_collected_apps")}],W=e=>(0,n.Vx)((0,n.yk)({page_no:"1",page_size:"12",...e})),M=e=>(0,n.Vx)((0,n.mW)({page_no:"1",page_size:"12",...e})),{run:O,loading:V,refresh:B}=(0,i.Z)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"12";switch(S){case"recommend":return await M({page_no:t,page_size:a});case"collected":return await W({is_collected:"true",ignore_user:"true",published:"true",need_owner_info:"true",app_name:e,page_no:t,page_size:a});case"all":return await W({ignore_user:"true",published:"true",need_owner_info:"true",app_name:e,page_no:t,page_size:a});default:return[]}},{manual:!0,onSuccess:e=>{var t,a;let[l,n]=e;if("recommend"===S)return I({app_list:n,total_count:n.length});let c=null==n?void 0:null===(t=n.app_list)||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:a.app_code,s=c?E.app_list.findIndex(e=>e.app_code===c):-1;-1!==s?I({app_list:E.app_list.toSpliced(12*Math.floor(s/12),12,...null==n?void 0:n.app_list)||[],total_count:(null==n?void 0:n.total_count)||0}):(console.log("concat"),I({app_list:E.app_list.concat(null==n?void 0:n.app_list)||[],total_count:(null==n?void 0:n.total_count)||0}))},debounceWait:500}),T=async e=>{I({app_list:[],total_count:0}),O(e.target.value)},z=async e=>{let[a]=await (0,n.Vx)("true"===e.is_collected?(0,n.gD)({app_code:e.app_code}):(0,n.mo)({app_code:e.app_code})),l=E.app_list.findIndex(t=>t.app_code===e.app_code);a||("true"===e.is_collected?d.ZP.success(t("cancel_success")):d.ZP.success(t("collect_success")),O("",(Math.floor(l/12)+1).toString()))};function D(e){let{index:t}=e;return!!E.app_list[t]}let L=r=>{var o;let{columnIndex:i,key:d,rowIndex:u,style:h}=r,_=3*u+i;if(!D({index:_}))return null;let m=E.app_list[_];return(0,l.jsx)("div",{style:h,children:(0,l.jsx)(k.ZP,{name:m.app_name,description:m.app_describe,className:"w-11/12",RightTop:"true"===m.is_collected?(0,l.jsx)(c.Z,{onClick:()=>z(m),style:{height:"21px",cursor:"pointer",color:"#f9c533"}}):(0,l.jsx)(s.Z,{onClick:()=>z(m),style:{height:"21px",cursor:"pointer"}}),onClick:async()=>{if("native_app"===m.team_mode){let{chat_scene:t=""}=m.team_context,[,a]=await (0,n.Vx)((0,n.sW)({chat_mode:t}));a&&(null==f||f({chat_scene:a.chat_mode,app_code:m.app_code}),localStorage.setItem("cur_dialog_info",JSON.stringify({chat_scene:a.chat_mode,app_code:m.app_code})),e.push("/chat?scene=".concat(t,"&id=").concat(a.conv_uid).concat(Z?"&model=".concat(Z):"")))}else{let[,t]=await (0,n.Vx)((0,n.sW)({chat_mode:"chat_agent"}));t&&(null==f||f({chat_scene:t.chat_mode,app_code:m.app_code}),localStorage.setItem("cur_dialog_info",JSON.stringify({chat_scene:t.chat_mode,app_code:m.app_code})),null==a||a(m.app_code),e.push("/chat/?scene=chat_agent&id=".concat(t.conv_uid).concat(Z?"&model=".concat(Z):"")))}},LeftBottom:(0,l.jsxs)("div",{className:"flex gap-8 items-center text-[#878c93] text-sm dark:text-stone-200",children:[m.owner_name&&(0,l.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,l.jsx)(p.C,{src:null==m?void 0:m.owner_avatar_url,className:"bg-gradient-to-tr from-[#31afff] to-[#1677ff] cursor-pointer",children:m.owner_name}),(0,l.jsx)("span",{children:m.owner_name})]}),"recommend"===S?(0,l.jsxs)("div",{className:"flex items-start gap-1",children:[(0,l.jsx)(N.Z,{type:"icon-hot",className:"text-lg"}),(0,l.jsx)("span",{className:"text-[#878c93]",children:m.hot_value})]}):(0,l.jsx)("div",{children:C()(null==m?void 0:m.updated_at).fromNow()+" "+t("update")})]}),scene:(null==m?void 0:null===(o=m.team_context)||void 0===o?void 0:o.chat_scene)||"chat_agent"},m.app_code)},d)};return(0,v.useEffect)(()=>{I({app_list:[],total_count:0})},[S]),(0,v.useEffect)(()=>{O()},[S,O]),(0,l.jsx)("div",{className:"flex flex-col h-full w-full backdrop-filter backdrop-blur dark:bg-gradient-dark bg-gradient-light  p-10 pt-12 ",id:"home-container",children:(0,l.jsx)(u.ZP,{theme:{components:{Button:{defaultBorderColor:"white"},Segmented:{itemSelectedBg:"#2867f5",itemSelectedColor:"white"}}},children:(0,l.jsxs)("div",{className:"flex flex-col h-full mt-4 overflow-hidden relative",style:{paddingBottom:E.total_count>12?45:20},children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(h.Z,{className:"h-10 backdrop-filter backdrop-blur-lg bg-white bg-opacity-30 border border-white rounded-lg shadow p-1 dark:border-[#6f7f95] dark:bg-[#6f7f95] dark:bg-opacity-60",options:R,onChange:e=>P(e),value:S}),(0,l.jsx)(_.default,{variant:"filled",prefix:(0,l.jsx)(r.Z,{}),placeholder:t("please_enter_the_keywords"),onChange:T,onPressEnter:T,allowClear:!0,className:g()("w-[230px] h-[40px] border-1 border-white backdrop-filter backdrop-blur-lg bg-white bg-opacity-30 dark:border-[#6f7f95] dark:bg-[#6f7f95] dark:bg-opacity-60",{hidden:"recommend"===S})})]}),(0,l.jsx)("div",{className:"flex items-center gap-4",children:(0,l.jsx)(m.ZP,{className:"border-none text-white bg-button-gradient",icon:(0,l.jsx)(o.Z,{}),onClick:()=>{localStorage.removeItem("new_app_info"),e.push("/construct/app?openModal=true")},children:t("create_app")})})]}),V&&!E.app_list.length?(0,l.jsx)(x.Z,{size:"large",className:"flex items-center justify-center h-full",spinning:V}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(w.b2,{isRowLoaded:D,loadMoreRows:function(e){let{startIndex:t,stopIndex:a}=e,l=Math.ceil(t/12)+1;return console.log(t,a,l),O("",l.toString())},rowCount:E.total_count,children:e=>{let{onRowsRendered:t,registerChild:a}=e;return(0,l.jsx)(w.qj,{children:e=>{let{width:n,height:c}=e;return(0,l.jsx)(w.rj,{ref:a,onSectionRendered:e=>{let{rowStartIndex:a,rowStopIndex:l}=e;t({startIndex:3*a,stopIndex:3*l+2})},cellRenderer:L,columnWidth:n/3,columnCount:3,height:c,rowHeight:200,rowCount:E.total_count,width:n})}})}}),V&&E.app_list.length&&(0,l.jsx)(x.Z,{className:"flex items-end justify-center h-full",spinning:V})]})]})})})}},96768:function(){}},function(e){e.O(0,[2768,2994,2003,5677,1999,2786,5722,749,1840,5444,3355,9774,2888,179],function(){return e(e.s=50173)}),_N_E=e.O()}]);