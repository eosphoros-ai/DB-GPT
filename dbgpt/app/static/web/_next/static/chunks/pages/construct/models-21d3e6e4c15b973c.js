(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1113],{47329:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construct/models",function(){return l(10730)}])},81799:function(e,t,l){"use strict";l.d(t,{A:function(){return u}});var a=l(85893),s=l(41468),n=l(19284),r=l(34041),i=l(25675),c=l.n(i),o=l(67294),d=l(67421);let m="/models/huggingface.svg";function u(e,t){var l,s;let{width:r,height:i}=t||{};return e?(0,a.jsx)(c(),{className:"rounded-full border border-gray-200 object-contain bg-white inline-block",width:r||24,height:i||24,src:(null===(l=n.Hf[e])||void 0===l?void 0:l.icon)||m,alt:"llm"},(null===(s=n.Hf[e])||void 0===s?void 0:s.icon)||m):null}t.Z=function(e){let{onChange:t}=e,{t:l}=(0,d.$G)(),{modelList:i,model:c}=(0,o.useContext)(s.p);return!i||i.length<=0?null:(0,a.jsx)(r.default,{value:c,placeholder:l("choose_model"),className:"w-52",onChange:e=>{null==t||t(e)},children:i.map(e=>{var t;return(0,a.jsx)(r.default.Option,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[u(e),(0,a.jsx)("span",{className:"ml-2",children:(null===(t=n.Hf[e])||void 0===t?void 0:t.label)||e})]})},e)})})}},48218:function(e,t,l){"use strict";var a=l(85893),s=l(82353),n=l(16165),r=l(67294);t.Z=e=>{let{width:t,height:l,scene:i}=e,c=(0,r.useCallback)(()=>{switch(i){case"chat_knowledge":return s.je;case"chat_with_db_execute":return s.zM;case"chat_excel":return s.DL;case"chat_with_db_qa":case"chat_dba":return s.RD;case"chat_dashboard":return s.In;case"chat_agent":return s.si;case"chat_normal":return s.O7;default:return}},[i]);return(0,a.jsx)(n.Z,{className:"w-".concat(t||7," h-").concat(l||7),component:c()})}},91467:function(e,t,l){"use strict";l.d(t,{TH:function(){return p},ZS:function(){return f}});var a=l(85893),s=l(89705),n=l(83062),r=l(96074),i=l(45030),c=l(85418),o=l(93967),d=l.n(o),m=l(36609),u=l(25675),h=l.n(u);l(67294);var x=l(48218);l(11873);let p=e=>{let{onClick:t,Icon:l="/pictures/card_chat.png",text:s=(0,m.t)("start_chat")}=e;return"string"==typeof l&&(l=(0,a.jsx)(h(),{src:l,alt:l,width:17,height:15})),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-default",onClick:e=>{e.stopPropagation(),t&&t()},children:[l,(0,a.jsx)("span",{children:s})]})},f=e=>{let{menu:t}=e;return(0,a.jsx)(c.Z,{menu:t,getPopupContainer:e=>e.parentNode,placement:"bottomRight",autoAdjustOverflow:!1,children:(0,a.jsx)(s.Z,{className:"p-2 hover:bg-white hover:dark:bg-black rounded-md"})})};t.ZP=e=>{let{RightTop:t,Tags:l,LeftBottom:s,RightBottom:c,onClick:o,rightTopHover:m=!0,logo:u,name:p,description:f,className:j,scene:g,code:b}=e;return"string"==typeof f&&(f=(0,a.jsx)("p",{className:"line-clamp-2 relative bottom-4 text-ellipsis min-h-[42px] text-sm text-[#525964] dark:text-[rgba(255,255,255,0.65)]",children:f})),(0,a.jsx)("div",{className:d()("hover-underline-gradient flex justify-center mt-6 relative group w-1/3 px-2 mb-6",j),children:(0,a.jsxs)("div",{onClick:o,className:"backdrop-filter backdrop-blur-lg cursor-pointer  bg-white bg-opacity-70 border-2 border-white rounded-lg shadow p-4 relative w-full h-full dark:border-[#6f7f95] dark:bg-[#6f7f95] dark:bg-opacity-60",children:[(0,a.jsxs)("div",{className:"flex items-end relative bottom-8 justify-between w-full",children:[(0,a.jsxs)("div",{className:"flex items-end gap-4 w-11/12  flex-1",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm w-14 h-14 flex items-center p-3",children:g?(0,a.jsx)(x.Z,{scene:g,width:14,height:14}):u&&(0,a.jsx)(h(),{src:u,width:44,height:44,alt:p,className:"w-8 min-w-8 rounded-full max-w-none"})}),(0,a.jsx)("div",{className:"flex-1",children:p.length>6?(0,a.jsx)(n.Z,{title:p,children:(0,a.jsx)("span",{className:"line-clamp-1 text-ellipsis font-semibold text-base",style:{maxWidth:"60%"},children:p})}):(0,a.jsx)("span",{className:"line-clamp-1 text-ellipsis font-semibold text-base",style:{maxWidth:"60%"},children:p})})]}),(0,a.jsx)("span",{className:d()("shrink-0",{hidden:m,"group-hover:block":m}),onClick:e=>{e.stopPropagation()},children:t})]}),f,(0,a.jsx)("div",{className:"relative bottom-2",children:l}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{children:s}),(0,a.jsx)("div",{children:c})]}),b&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{className:"my-3"}),(0,a.jsx)(i.Z.Text,{copyable:!0,className:"absolute bottom-1 right-4 text-xs text-gray-500",children:b})]})]})})}},1771:function(e,t,l){"use strict";var a=l(85893),s=l(82353),n=l(41156),r=l(9641),i=l(16165),c=l(9020),o=l(92962),d=l(38545),m=l(50067),u=l(28459),h=l(92398),x=l(36609),p=l(11163);l(67294),l(30764),t.Z=function(e){let{children:t}=e,l=[{key:"app",name:(0,x.t)("App"),path:"/app",icon:(0,a.jsx)(n.Z,{})},{key:"flow",name:(0,x.t)("awel_flow"),icon:(0,a.jsx)(r.Z,{}),path:"/flow"},{key:"models",name:(0,x.t)("model_manage"),path:"/models",icon:(0,a.jsx)(i.Z,{component:s.IN})},{key:"database",name:(0,x.t)("Database"),icon:(0,a.jsx)(c.Z,{}),path:"/database"},{key:"knowledge",name:(0,x.t)("Knowledge_Space"),icon:(0,a.jsx)(o.Z,{}),path:"/knowledge"},{key:"prompt",name:(0,x.t)("Prompt"),icon:(0,a.jsx)(d.Z,{}),path:"/prompt"},{key:"dbgpts",name:(0,x.t)("dbgpts_community"),path:"/dbgpts",icon:(0,a.jsx)(m.Z,{})}],f=(0,p.useRouter)(),j=f.pathname.split("/")[2];return(0,a.jsx)("div",{className:"flex flex-col h-full w-full  dark:bg-gradient-dark bg-gradient-light bg-cover bg-center",children:(0,a.jsx)(u.ZP,{theme:{components:{Button:{},Segmented:{itemSelectedBg:"#2867f5",itemSelectedColor:"white"}}},children:(0,a.jsx)(h.Z,{activeKey:j,items:l.map(e=>({key:e.key,label:e.name,children:t,icon:e.icon})),onTabClick:e=>{f.push("/construct/".concat(e))}})})})}},10730:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return C}});var a=l(85893),s=l(76212),n=l(81799),r=l(34041),i=l(99859),c=l(45360),o=l(83062),d=l(14726),m=l(67294),u=l(67421),h=l(25278),x=l(13457),p=l(84567),f=function(e){let{params:t,form:l}=e;return((0,m.useEffect)(()=>{if(t){let e={};t.forEach(t=>{e[t.param_name]=t.default_value}),l.setFieldsValue(e)}},[t,l]),!t||(null==t?void 0:t.length)<1)?null:(0,a.jsx)(a.Fragment,{children:null==t?void 0:t.map(e=>{var t;return(0,a.jsx)(i.default.Item,{label:(0,a.jsx)("p",{className:"whitespace-normal overflow-wrap-break-word",children:(null===(t=e.description)||void 0===t?void 0:t.length)>20?e.param_name:e.description}),name:e.param_name,initialValue:e.default_value,valuePropName:"bool"===e.param_type?"checked":"value",tooltip:e.description,rules:[{required:e.required,message:"Please input ".concat(e.description)}],children:function(e){switch(e.param_type){case"str":return(0,a.jsx)(h.default,{});case"int":return(0,a.jsx)(x.Z,{});case"bool":return(0,a.jsx)(p.Z,{})}}(e)},e.param_name)})})};let{Option:j}=r.default;var g=function(e){let{onCancel:t,onSuccess:l}=e,{t:h}=(0,u.$G)(),[x,p]=(0,m.useState)([]),[g,b]=(0,m.useState)(),[v,w]=(0,m.useState)(null),[_,N]=(0,m.useState)(!1),[y]=i.default.useForm();async function k(){let[,e]=await (0,s.Vx)((0,s.xv)());e&&e.length&&p(e.sort((e,t)=>e.enabled&&!t.enabled?-1:!e.enabled&&t.enabled?1:e.model.localeCompare(t.model))),p(e)}async function Z(e){if(!g)return;delete e.model,N(!0);let[,,t]=await (0,s.Vx)((0,s.vA)({host:g.host,port:g.port,model:g.model,worker_type:null==g?void 0:g.worker_type,params:e}));if(N(!1),(null==t?void 0:t.success)===!0)return null==l||l(),c.ZP.success(h("start_model_success"))}return(0,m.useEffect)(()=>{k()},[]),(0,a.jsxs)(i.default,{labelCol:{span:8},wrapperCol:{span:16},onFinish:Z,form:y,children:[(0,a.jsx)(i.default.Item,{label:"Model",name:"model",rules:[{required:!0,message:h("model_select_tips")}],children:(0,a.jsx)(r.default,{showSearch:!0,onChange:function(e,t){b(t.model),w(t.model.params)},children:null==x?void 0:x.map(e=>(0,a.jsxs)(j,{value:e.model,label:e.model,model:e,disabled:!e.enabled,children:[(0,n.A)(e.model),(0,a.jsx)(o.Z,{title:e.enabled?e.model:h("download_model_tip"),children:(0,a.jsx)("span",{className:"ml-2",children:e.model})}),(0,a.jsx)(o.Z,{title:e.enabled?"".concat(e.host,":").concat(e.port):h("download_model_tip"),children:(0,a.jsxs)("p",{className:"inline-block absolute right-4",children:[(0,a.jsxs)("span",{children:[e.host,":"]}),(0,a.jsx)("span",{children:e.port})]})})]},e.model))})}),(0,a.jsx)(f,{params:v,form:y}),(0,a.jsxs)("div",{className:"flex justify-center",children:[(0,a.jsx)(d.ZP,{type:"primary",htmlType:"submit",loading:_,children:h("submit")}),(0,a.jsx)(d.ZP,{className:"ml-10",onClick:t,children:"Cancel"})]})]})},b=l(91467),v=l(1771),w=l(19284),_=l(24969),N=l(66309),y=l(85576),k=l(30381),Z=l.n(k),C=function(){let{t:e}=(0,u.$G)(),[t,l]=(0,m.useState)([]),[n,r]=(0,m.useState)(!1);async function i(){let[,e]=await (0,s.Vx)((0,s.fZ)());l(null!=e?e:[])}(0,m.useEffect)(()=>{i()},[]);let c=e=>{let t=null==e?void 0:e.replaceAll("-","_").split("_")[0],l=Object.keys(w.Me);for(let e=0;e<l.length;e++){let a=l[e];if(null==t?void 0:t.includes(a))return w.Me[a]}return"/pictures/model.png"};return(0,a.jsx)(v.Z,{children:(0,a.jsxs)("div",{className:"px-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-4"}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsx)(d.ZP,{className:"border-none text-white bg-button-gradient",icon:(0,a.jsx)(_.Z,{}),onClick:()=>{r(!0)},children:e("create_model")})})]}),(0,a.jsx)("div",{className:"flex flex-wrap mx-[-8px] ",children:t.map(e=>(0,a.jsx)(b.ZP,{logo:c(e.model_name),description:(0,a.jsxs)("div",{className:"flex flex-col gap-1 relative text-xs bottom-4",children:[(0,a.jsxs)("div",{className:"flex overflow-hidden",children:[(0,a.jsx)("p",{className:"w-28 text-gray-500 mr-2",children:"Host:"}),(0,a.jsx)("p",{className:"flex-1 text-ellipsis",children:e.host})]}),(0,a.jsxs)("div",{className:"flex overflow-hidden",children:[(0,a.jsx)("p",{className:"w-28 text-gray-500 mr-2",children:"Manage Host:"}),(0,a.jsxs)("p",{className:"flex-1 text-ellipsis",children:[e.manager_host,":",e.manager_port]})]}),(0,a.jsxs)("div",{className:"flex overflow-hidden",children:[(0,a.jsx)("p",{className:"w-28 text-gray-500 mr-2",children:"Last Heart Beat:"}),(0,a.jsx)("p",{className:"flex-1 text-ellipsis",children:Z()(e.last_heartbeat).format("YYYY-MM-DD")})]})]}),name:e.model_name,rightTopHover:!1,Tags:(0,a.jsxs)("div",{children:[(0,a.jsx)(N.Z,{color:e.healthy?"green":"red",children:e.healthy?"Healthy":"Unhealthy"}),(0,a.jsx)(N.Z,{children:e.model_type})]})},e.model_name))}),(0,a.jsx)(y.default,{width:800,open:n,title:e("create_model"),onCancel:()=>{r(!1)},footer:null,children:(0,a.jsx)(g,{onCancel:()=>{r(!1)},onSuccess:()=>{r(!1),i()}})})]})})}},11873:function(){},30764:function(){}},function(e){e.O(0,[2648,3791,2913,5278,8791,5030,5418,4041,2398,9859,4567,3457,3756,9774,2888,179],function(){return e(e.s=47329)}),_N_E=e.O()}]);