(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7537],{63783:function(e,l,n){"use strict";var a=n(87462),t=n(67294),r=n(36688),s=n(13401),u=t.forwardRef(function(e,l){return t.createElement(s.Z,(0,a.Z)({},e,{ref:l,icon:r.Z}))});l.Z=u},15531:function(e,l,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construct/app/extra/components/auto-plan",function(){return n(78174)}])},78174:function(e,l,n){"use strict";n.r(l);var a=n(85893),t=n(76212),r=n(63783),s=n(65654),u=n(84567),i=n(83062),d=n(8232),c=n(42075),o=n(93967),m=n.n(o),v=n(96486),p=n(67294),f=n(67421),x=n(83072),g=n(77451);let _=e=>{let{value:l,onChange:n,agents:t,selectedTab:s,setSelectedTab:d}=e;return(0,a.jsx)(u.Z.Group,{className:"grid grid-cols-4 gap-4",onChange:e=>{null==n||n(e)},value:l,children:t.map(e=>(0,a.jsxs)("div",{className:"flex grow h-8 items-center px-3 border ".concat(e.name===s?"border-[#0c75fc]":"border-[#d6d8da]"," rounded-md hover:border-[#0c75fc] cursor-pointer"),onClick:()=>{d(e.name||"")},children:[(0,a.jsx)(u.Z,{value:e.name}),(0,a.jsxs)("div",{className:"flex items-center flex-1 justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"ml-2 mr-1",children:x.agentIcon[e.name||""]}),(0,a.jsx)("span",{className:"text-sm text-[rgba(0,10,26,0.68)] dark:text-[rgba(255,255,255,0.85)]",children:e.label})]}),(0,a.jsx)(i.Z,{title:e.desc,children:(0,a.jsx)(r.Z,{className:"text-sm"})})]})]},e.name))})};l.default=e=>{var l,n,r;let{initValue:u,updateData:i,classNames:o}=e,{t:h,i18n:b}=(0,f.$G)(),[j]=d.default.useForm(),N=d.default.useWatch("agent_name",j),[w,Z]=(0,p.useState)(""),y=(0,p.useRef)([]),k="en"===b.language,{data:E,loading:T}=(0,s.Z)(async()=>{var e,l;let n=await Promise.all([(0,t.Vx)((0,t.j8)()),(0,t.Vx)((0,t.Vd)()),(0,t.Vx)((0,t.Q5)())]),[,a]=(null==n?void 0:n[0])||[];return y.current=(null==a?void 0:a.map(e=>({agent_name:e.name,llm_strategy:"",llm_strategy_value:"",prompt_template:"",resources:[]})))||[],j.setFieldsValue({agent_name:null==u?void 0:u.map(e=>e.agent_name)}),Z((null===(e=null==u?void 0:u.map(e=>e.agent_name))||void 0===e?void 0:e[0])||(null==a?void 0:null===(l=a[0])||void 0===l?void 0:l.name)||""),null!=n?n:[]}),{data:V}=(0,s.Z)(async()=>{let[,e]=await (0,t.Vx)((0,t.xA)({page:1,page_size:1e5}));return null!=e?e:{items:[]}}),C=(0,p.useMemo)(()=>{let[,e]=(null==E?void 0:E[1])||[];return(null==e?void 0:e.length)?e.map(e=>({label:k?e.name:e.name_cn,value:e.value})):[]},[E]),I=(0,p.useMemo)(()=>{let[,e]=(null==E?void 0:E[2])||[];if(null==e?void 0:e.length){let l=e.map(e=>({label:(0,a.jsxs)(c.Z,{children:[x.resourceTypeIcon[e],e]}),value:e}));return(0,v.concat)([{label:(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[x.resourceTypeIcon.all,(0,a.jsx)("span",{className:"ml-2 text-[rgba(0,10,26,0.68)] dark:text-[#ffffffD9]",children:h("All")})]}),value:"all"}],l)}return[]},[E]);return(0,p.useEffect)(()=>{i([T,y.current.filter(e=>null==N?void 0:N.includes(e.agent_name))])},[T,N,i]),(0,a.jsxs)("div",{className:m()(o),children:[(0,a.jsx)(d.default,{form:j,style:{width:"100%"},labelCol:{span:4},wrapperCol:{span:20},children:(0,a.jsx)(d.default.Item,{label:"".concat(h("choose")," agent"),name:"agent_name",required:!0,rules:[{required:!0,message:h("please_choose")+" agent"}],children:(0,a.jsx)(_,{agents:(null==E?void 0:null===(l=E[0])||void 0===l?void 0:l[1])||[],selectedTab:w,setSelectedTab:Z})})}),null==E?void 0:null===(n=E[0])||void 0===n?void 0:null===(r=n[1])||void 0===r?void 0:r.map(e=>(0,a.jsx)(g.default,{classNames:e.name===w?"block":"hidden",updateData:e=>{y.current=y.current.map(l=>l.agent_name===(null==e?void 0:e.agent_name)?{...l,...e}:{...l}),i([T,y.current.filter(e=>null==N?void 0:N.includes(e.agent_name))])},initValue:u,name:e.name,modelStrategyOptions:C,resourceTypeOptions:I,promptList:(null==V?void 0:V.items)||[]},e.name))]})}}},function(e){e.O(0,[3662,7034,2648,3791,4296,5102,3293,4330,1776,5418,4041,1941,8232,2913,3780,5872,4567,6231,2783,1531,2611,3320,5265,7332,6540,9397,542,5852,8709,9256,9200,9774,2888,179],function(){return e(e.s=15531)}),_N_E=e.O()}]);