(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6366],{89301:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app",function(){return l(99786)}])},33984:function(e,t,l){"use strict";var a=l(91321);let n=(0,a.Z)({scriptUrl:"//at.alicdn.com/t/a/font_4440880_ljyggdw605.js"});t.Z=n},91085:function(e,t,l){"use strict";var a=l(85893),n=l(32983),s=l(14726),i=l(93967),r=l.n(i),c=l(67421);t.Z=function(e){let{className:t,error:l,description:i,refresh:o}=e,{t:d}=(0,c.$G)();return(0,a.jsx)(n.Z,{image:"/empty.png",imageStyle:{width:320,height:196,margin:"0 auto",maxWidth:"100%",maxHeight:"100%"},className:r()("flex items-center justify-center flex-col h-full w-full",t),description:l?(0,a.jsx)(s.ZP,{type:"primary",onClick:o,children:d("try_again")}):null!=i?i:d("no_data")})}},26892:function(e,t,l){"use strict";var a=l(85893),n=l(67294),s=l(66309),i=l(55241),r=l(83062),c=l(93967),o=l.n(c),d=l(25675),u=l.n(d);t.Z=(0,n.memo)(function(e){let{icon:t,iconBorder:l=!0,title:c,desc:d,tags:m,children:p,disabled:h,operations:x,className:f,extraContent:v,..._}=e,g=(0,n.useMemo)(()=>t?"string"==typeof t?(0,a.jsx)(u(),{className:o()("w-11 h-11 rounded-full mr-4 object-contain bg-white",{"border border-gray-200":l}),width:48,height:48,src:t,alt:c}):t:null,[t]),y=(0,n.useMemo)(()=>m&&m.length?(0,a.jsx)("div",{className:"flex items-center mt-1 flex-wrap",children:m.map((e,t)=>{var l;return"string"==typeof e?(0,a.jsx)(s.Z,{className:"text-xs",bordered:!1,color:"default",children:e},t):(0,a.jsx)(s.Z,{className:"text-xs",bordered:null!==(l=e.border)&&void 0!==l&&l,color:e.color,children:e.text},t)})}):null,[m]);return(0,a.jsxs)("div",{className:o()("group/card relative flex flex-col w-72 rounded justify-between text-black bg-white shadow-[0_8px_16px_-10px_rgba(100,100,100,.08)] hover:shadow-[0_14px_20px_-10px_rgba(100,100,100,.15)] dark:bg-[#232734] dark:text-white dark:hover:border-white transition-[transfrom_shadow] duration-300 hover:-translate-y-1 min-h-fit",{"grayscale cursor-no-drop":h,"cursor-pointer":!h&&!!_.onClick},f),..._,children:[(0,a.jsxs)("div",{className:"p-4 0",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[g,(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(i.Z,{title:c,children:(0,a.jsx)("h2",{className:"text-sm font-semibold line-clamp-1 pr-8",children:c})}),y]})]}),d&&(0,a.jsx)(r.Z,{title:d,children:(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500 font-normal line-clamp-2",children:d})})]}),(0,a.jsxs)("div",{children:[p,x&&!!x.length&&(0,a.jsx)("div",{className:"flex flex-wrap items-center justify-center border-t border-solid border-gray-100 dark:border-theme-dark",children:x.map((e,t)=>(0,a.jsx)(r.Z,{title:e.label,children:(0,a.jsxs)("div",{className:"relative flex flex-1 items-center justify-center h-11 text-gray-400 hover:text-blue-500 transition-colors duration-300 cursor-pointer",onClick:t=>{var l;t.stopPropagation(),null===(l=e.onClick)||void 0===l||l.call(e)},children:[e.children,t<x.length-1&&(0,a.jsx)("div",{className:"w-[1px] h-6 absolute top-2 right-0 bg-gray-100 rounded dark:bg-theme-dark"})]})},"operation-".concat(t)))})]}),(0,a.jsx)("div",{className:"absolute top-2 right-4 ",children:v})]})})},99743:function(e,t,l){"use strict";var a=l(85893);l(67294);var n=l(36851);t.Z=e=>{let{id:t,sourceX:l,sourceY:s,targetX:i,targetY:r,sourcePosition:c,targetPosition:o,style:d={},data:u,markerEnd:m}=e,[p,h,x]=(0,n.OQ)({sourceX:l,sourceY:s,sourcePosition:c,targetX:i,targetY:r,targetPosition:o}),f=(0,n._K)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.u5,{id:t,style:d,path:p,markerEnd:m}),(0,a.jsx)("foreignObject",{width:40,height:40,x:h-20,y:x-20,className:"bg-transparent w-10 h-10 relative",requiredExtensions:"http://www.w3.org/1999/xhtml",children:(0,a.jsx)("button",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-stone-400 dark:bg-zinc-700 cursor-pointer text-sm",onClick:e=>{e.stopPropagation(),f.setEdges(f.getEdges().filter(e=>e.id!==t))},children:"\xd7"})})]})}},23391:function(e,t,l){"use strict";var a=l(85893);l(67294);var n=l(36851),s=l(59819),i=l(99743),r=l(67919);l(4583),t.Z=e=>{let{flowData:t,minZoom:l}=e,c=(0,r.z5)(t);return(0,a.jsx)(n.x$,{nodes:c.nodes,edges:c.edges,edgeTypes:{buttonedge:i.Z},fitView:!0,minZoom:l||.1,children:(0,a.jsx)(s.A,{color:"#aaa",gap:16})})}},99786:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return H}});var a=l(85893),n=l(99859),s=l(85418),i=l(42075),r=l(85576),c=l(75081),o=l(79531),d=l(66184),u=l(92398),m=l(67294),p=l(67421);function h(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5649",width:"1.5em",height:"1.5em",children:(0,a.jsx)("path",{d:"M810.666667 554.666667h-256v256h-85.333334v-256H213.333333v-85.333334h256V213.333333h85.333334v256h256v85.333334z","p-id":"5650",fill:"#bfbfbf"})})}var x=l(76212),f=l(14726),v=l(27704),_=l(4393),g=l(72269);function y(e){let{resourceTypeOptions:t,updateResourcesByIndex:l,index:n,resource:s}=e,{t:i}=(0,p.$G)(),[r,c]=(0,m.useState)(s.type||(null==t?void 0:t[0].label)),[u,h]=(0,m.useState)([]),[f,y]=(0,m.useState)({name:s.name,type:s.type,value:s.value,is_dynamic:s.is_dynamic||!1}),j=async()=>{let[e,t]=await (0,x.Vx)((0,x.RX)({type:r}));t?h(null==t?void 0:t.map(e=>({label:e.label,value:e.key+""}))):h([])},b=e=>{c(e)},w=(e,t)=>{f[t]=e,y(f),l(f,n)},N=()=>{l(null,n)};return(0,m.useEffect)(()=>{j(),w(f.type||r,"type")},[r]),(0,m.useEffect)(()=>{var e,t;w(s.value||(null===(e=u[0])||void 0===e?void 0:e.label),"value"),y({...f,value:s.value||(null===(t=u[0])||void 0===t?void 0:t.label)})},[u]),(0,a.jsx)(_.Z,{className:"mb-3 dark:bg-[#232734] border-gray-200",title:"".concat(i("resource")," ").concat(n+1),extra:(0,a.jsx)(v.Z,{className:"text-[#ff1b2e] !text-lg",onClick:()=>{N()}}),children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center  mb-6",children:[(0,a.jsxs)("div",{className:"font-bold mr-4 w-32 text-center",children:[(0,a.jsx)("span",{className:"text-[#ff4d4f] font-normal",children:"*"}),"\xa0",i("resource_name"),":"]}),(0,a.jsx)(o.default,{className:"w-1/3",required:!0,value:f.name,onInput:e=>{w(e.target.value,"name")}}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"font-bold w-32 text-center",children:i("resource_dynamic")}),(0,a.jsx)(g.Z,{defaultChecked:s.is_dynamic||!1,style:{background:f.is_dynamic?"#1677ff":"#ccc"},onChange:e=>{w(e,"is_dynamic")}})]})]}),(0,a.jsxs)("div",{className:"flex mb-5  items-center",children:[(0,a.jsxs)("div",{className:"font-bold mr-4 w-32  text-center",children:[i("resource_type"),": "]}),(0,a.jsx)(d.default,{className:"w-1/3",options:t,value:f.type||(null==t?void 0:t[0]),onChange:e=>{w(e,"type"),b(e)}}),(0,a.jsxs)("div",{className:"font-bold w-32 text-center",children:[i("resource_value"),":"]}),(null==u?void 0:u.length)>0?(0,a.jsx)(d.default,{value:f.value,className:"flex-1",options:u,onChange:e=>{w(e,"value")}}):(0,a.jsx)(o.default,{className:"flex-1",value:f.value||s.value,onInput:e=>{w(e.target.value,"value")}})]})]})})}function j(e){var t;let{resourceTypes:l,updateDetailsByAgentKey:n,detail:s,editResources:i}=e,{t:r}=(0,p.$G)(),[c,u]=(0,m.useState)([...null!=i?i:[]]),[h,v]=(0,m.useState)({...s,resources:[]}),[_,g]=(0,m.useState)([]),[j,b]=(0,m.useState)([]),w=(e,t)=>{u(l=>{let a=[...l];return e?a.map((l,a)=>t===a?e:l):a.filter((e,l)=>t!==l)})},N=async()=>{let[e,t]=await (0,x.Vx)((0,x.Vd)());t&&g(null==t?void 0:t.map(e=>({label:e.name_cn,value:e.value})))},k=async e=>{let[t,l]=await (0,x.Vx)((0,x.m9)(e));if(l){var a;b(null!==(a=l.map(e=>({label:e,value:e})))&&void 0!==a?a:[])}};(0,m.useEffect)(()=>{N(),k(s.llm_strategy)},[]),(0,m.useEffect)(()=>{C(c,"resources")},[c]);let C=(e,t)=>{let l={...h};l[t]=e,v(l),n(s.key,l)},Z=(0,m.useMemo)(()=>null==l?void 0:l.map(e=>({label:e,value:e})),[l]);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center mb-6 mt-6",children:[(0,a.jsxs)("div",{className:"mr-2 w-16 text-center",children:[r("Prompt"),":"]}),(0,a.jsx)(o.default,{required:!0,className:"mr-6 w-1/4",value:h.prompt_template,onChange:e=>{C(e.target.value,"prompt_template")}}),(0,a.jsxs)("div",{className:"mr-2",children:[r("LLM_strategy"),":"]}),(0,a.jsx)(d.default,{value:h.llm_strategy,options:_,className:"w-1/6 mr-6",onChange:e=>{C(e,"llm_strategy"),k(e)}}),j&&j.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mr-2",children:[r("LLM_strategy_value"),":"]}),(0,a.jsx)(d.default,{value:(t=h.llm_strategy_value)?t.split(","):[],className:"w-1/4",mode:"multiple",options:j,onChange:e=>{if(!e||(null==e?void 0:e.length)===0)return C(null,"llm_strategy_value"),null;let t=e.reduce((e,t,l)=>0===l?t:"".concat(e,",").concat(t),"");C(t,"llm_strategy_value")}})]})]}),(0,a.jsx)("div",{className:"mb-3 text-lg font-bold",children:r("available_resources")}),c.map((e,t)=>(0,a.jsx)(y,{resource:e,index:t,updateResourcesByIndex:w,resourceTypeOptions:Z},t)),(0,a.jsx)(f.ZP,{type:"primary",className:"mt-2",size:"middle",onClick:()=>{u([...c,{name:"",type:"",introduce:"",value:"",is_dynamic:""}])},children:r("add_resource")})]})}var b=l(23391),w=l(41664),N=l.n(w),k=l(36609);function C(e){var t;let{onFlowsChange:l,teamContext:n}=e,[s,i]=(0,m.useState)(),[r,c]=(0,m.useState)(),[o,u]=(0,m.useState)(),p=async()=>{let[e,t]=await (0,x.Vx)((0,x.Wf)());if(t){var a;c(null==t?void 0:null===(a=t.items)||void 0===a?void 0:a.map(e=>({label:e.name,value:e.name}))),i(t.items),l(null==t?void 0:t.items[0])}};return(0,m.useEffect)(()=>{p()},[]),(0,m.useEffect)(()=>{u((null==s?void 0:s.find(e=>(null==n?void 0:n.name)===e.name))||(null==s?void 0:s[0]))},[n,s]),(0,a.jsxs)("div",{className:"w-full h-[300px]",children:[(0,a.jsx)("div",{className:"mr-24 mb-4 mt-2",children:"Flows:"}),(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)(d.default,{onChange:e=>{u(null==s?void 0:s.find(t=>e===t.name)),l(null==s?void 0:s.find(t=>e===t.name))},value:(null==o?void 0:o.name)||(null==r?void 0:null===(t=r[0])||void 0===t?void 0:t.value),className:"w-1/4",options:r}),(0,a.jsx)(N(),{href:"/flow/canvas/",className:"ml-6",children:(0,k.t)("edit_new_applications")}),(0,a.jsx)("div",{className:"text-gray-500 ml-16",children:null==o?void 0:o.description})]}),o&&(0,a.jsx)("div",{className:"w-full h-full border-[0.5px] border-dark-gray",children:(0,a.jsx)(b.Z,{flowData:null==o?void 0:o.flow_data})})]})}function Z(e){let{handleCancel:t,open:l,updateApps:f,type:v,app:_}=e,{t:g}=(0,p.$G)(),[y,b]=(0,m.useState)(!1),[w,N]=(0,m.useState)(),[k,Z]=(0,m.useState)(),[S,E]=(0,m.useState)([]),[V,P]=(0,m.useState)([]),[T,A]=(0,m.useState)([...(null==_?void 0:_.details)||[]]),[z,q]=(0,m.useState)(),[F,I]=(0,m.useState)(),[M,O]=(0,m.useState)(_.team_modal||"auto_plan"),[D]=n.default.useForm(),$=[{value:"zh",label:g("Chinese")},{value:"en",label:g("English")}],G=async e=>{await (0,x.Vx)("add"===v?(0,x.L5)(e):(0,x.KT)(e)),await f()},H=async()=>{let e=_.details,[t,l]=await (0,x.Vx)((0,x.Q5)());(null==e?void 0:e.length)>0&&E(null==e?void 0:e.map(e=>({label:null==e?void 0:e.agent_name,children:(0,a.jsx)(j,{editResources:"edit"===v&&e.resources,detail:{key:null==e?void 0:e.agent_name,llm_strategy:null==e?void 0:e.llm_strategy,agent_name:null==e?void 0:e.agent_name,prompt_template:null==e?void 0:e.prompt_template,llm_strategy_value:null==e?void 0:e.llm_strategy_value},updateDetailsByAgentKey:R,resourceTypes:l}),key:null==e?void 0:e.agent_name})))},K=async()=>{let[e,t]=await (0,x.Vx)((0,x.lz)());if(!t)return null;let l=t.map(e=>({value:e,label:e}));Z(l)},B=async()=>{let[e,t]=await (0,x.Vx)((0,x.j8)());if(!t)return null;P(t.map(e=>({label:e.name,key:e.name,onClick:()=>{Q(e)},agent:e})).filter(e=>{var t,l;return _.details&&(null===(t=_.details)||void 0===t?void 0:t.length)!==0?null==_?void 0:null===(l=_.details)||void 0===l?void 0:l.every(t=>t.agent_name!==e.label):e}))},L=async()=>{let[e,t]=await (0,x.Vx)((0,x.Q5)());t&&I(t)};(0,m.useEffect)(()=>{K(),B(),L()},[]),(0,m.useEffect)(()=>{"edit"===v&&H()},[F]),(0,m.useEffect)(()=>{O(_.team_mode||"auto_plan")},[_]);let R=(e,t)=>{A(l=>l.map(l=>e===(l.agent_name||l.key)?t:l))},Q=async e=>{let t=e.name,[l,n]=await (0,x.Vx)((0,x.Q5)());N(t),A(e=>[...e,{key:t,name:"",llm_strategy:"priority"}]),E(e=>[...e,{label:t,children:(0,a.jsx)(j,{detail:{key:t,llm_strategy:"default",agent_name:t,prompt_template:"",llm_strategy_value:null},updateDetailsByAgentKey:R,resourceTypes:n}),key:t}]),P(t=>t.filter(t=>t.key!==e.name))},W=e=>{let t=w,l=-1;if(!S)return null;S.forEach((t,a)=>{t.key===e&&(l=a-1)});let a=S.filter(t=>t.key!==e);a.length&&t===e&&(t=l>=0?a[l].key:a[0].key),A(t=>null==t?void 0:t.filter(t=>(t.agent_name||t.key)!==e)),E(a),N(t),P(t=>[...t,{label:e,key:e,onClick:()=>{Q({name:e,describe:"",system_message:""})}}])},X=async()=>{let e=await D.validateFields();if(!e)return;b(!0);let l={...D.getFieldsValue()};if("edit"===v&&(l.app_code=_.app_code),"awel_layout"!==l.team_mode)l.details=T;else{let e={...z};delete e.flow_data,l.team_context=e}try{await G(l)}catch(e){return}b(!1),t()};return(0,a.jsx)("div",{children:(0,a.jsx)(r.default,{okText:g("Submit"),title:"edit"===v?"edit application":"add application",open:l,width:"65%",onCancel:t,onOk:X,destroyOnClose:!0,children:(0,a.jsx)(c.Z,{spinning:y,children:(0,a.jsxs)(n.default,{form:D,preserve:!1,size:"large",className:"mt-4 max-h-[70vh] overflow-auto h-[90vh]",layout:"horizontal",labelAlign:"left",labelCol:{span:4},initialValues:{app_name:_.app_name,app_describe:_.app_describe,language:_.language||$[0].value,team_mode:_.team_mode||"auto_plan"},autoComplete:"off",onFinish:X,children:[(0,a.jsx)(n.default.Item,{label:"App Name",name:"app_name",rules:[{required:!0,message:g("Please_input_the_name")}],children:(0,a.jsx)(o.default,{placeholder:g("Please_input_the_name")})}),(0,a.jsx)(n.default.Item,{label:g("Description"),name:"app_describe",rules:[{required:!0,message:g("Please_input_the_description")}],children:(0,a.jsx)(o.default.TextArea,{rows:3,placeholder:g("Please_input_the_description")})}),(0,a.jsxs)("div",{className:"flex w-full",children:[(0,a.jsx)(n.default.Item,{labelCol:{span:7},label:g("language"),name:"language",className:"w-1/2",rules:[{required:!0}],children:(0,a.jsx)(d.default,{className:"w-2/3 ml-4",placeholder:g("language_select_tips"),options:$})}),(0,a.jsx)(n.default.Item,{label:g("team_modal"),name:"team_mode",className:"w-1/2",labelCol:{span:6},rules:[{required:!0}],children:(0,a.jsx)(d.default,{defaultValue:_.team_mode||"auto_plan",className:"ml-4 w-72",onChange:e=>{O(e)},placeholder:g("Please_input_the_work_modal"),options:k})})]}),"awel_layout"!==M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-5",children:"Agents"}),(0,a.jsx)(u.Z,{addIcon:(0,a.jsx)(s.Z,{menu:{items:V},trigger:["click"],children:(0,a.jsx)("a",{className:"h-8 flex items-center",onClick:e=>e.preventDefault(),children:(0,a.jsx)(i.Z,{children:(0,a.jsx)(h,{})})})}),type:"editable-card",onChange:e=>{N(e)},activeKey:w,onEdit:(e,t)=>{"add"===t||W(e)},items:S})]}):(0,a.jsx)(C,{onFlowsChange:e=>{q(e)},teamContext:_.team_context})]})})})})}var S=l(41468),E=l(28058),V=l(37017),P=l(90598),T=l(45360),A=l(86738),z=l(83062),q=l(11163),F=l(33984),I=l(65654),M=l(26892);let{confirm:O}=r.default;function D(e){let{updateApps:t,app:l,handleEdit:n,activeKey:s}=e,{model:i}=(0,m.useContext)(S.p),r=(0,q.useRouter)(),{setAgent:c}=(0,m.useContext)(S.p),{t:o}=(0,p.$G)(),d={en:o("English"),zh:o("Chinese")},u=()=>{O({title:o("Tips"),icon:(0,a.jsx)(E.Z,{}),content:"do you want delete the application?",okText:"Yes",okType:"danger",cancelText:"No",async onOk(){await (0,x.Vx)((0,x.Nl)({app_code:l.app_code})),"collected"===s?t({is_collected:"true",ignore_user:"true"}):t()}})},h=async()=>{let[e]=await (0,x.Vx)("true"===l.is_collected?(0,x.gD)({app_code:l.app_code}):(0,x.mo)({app_code:l.app_code}));e||("collected"===s?t({is_collected:"true",ignore_user:"true"}):"common"===s?t({ignore_user:"true",published:"true"}):t())},f=async()=>{let[,e]=await (0,x.Vx)((0,x.sW)({chat_mode:"chat_agent"}));if(e){if("native_app"===l.team_mode){let{chat_scene:t=""}=l.team_context;r.push("/chat?scene=".concat(t,"&id=").concat(e.conv_uid).concat(i?"&model=".concat(i):""))}else null==c||c(l.app_code),r.push("/chat/?scene=chat_agent&id=".concat(e.conv_uid).concat(i?"&model=".concat(i):""))}},{run:_}=(0,I.Z)(async()=>"true"===l.published?await (0,x.Vx)((0,x.Fq)(l.app_code)):await (0,x.Vx)((0,x.b1)(l.app_code)),{manual:!0,onSuccess:e=>{var a;(null===(a=e[2])||void 0===a?void 0:a.success)&&("true"===l.published?T.ZP.success(o("cancel_success")):T.ZP.success(o("published_success"))),null==t||t()}}),g=(0,m.useMemo)(()=>"app"===s,[s]),y=(0,m.useMemo)(()=>{let e=[{label:o("Chat"),children:(0,a.jsx)(V.Z,{}),onClick:f},{label:o("collect"),children:(0,a.jsx)(P.Z,{className:"false"===l.is_collected?"text-gray-400":"text-yellow-400"}),onClick:h}];return g&&e.push({label:o("Delete"),children:(0,a.jsx)(v.Z,{}),onClick:()=>u()}),e},[l,g]);return(0,a.jsx)(M.Z,{title:l.app_name,icon:"/icons/node/vis.png",iconBorder:!1,desc:l.app_describe,tags:[{text:d[l.language],color:"default"},{text:l.team_mode,color:"default"}],onClick:()=>{g&&n(l)},operations:y,extraContent:g&&(()=>{let{published:e=""}=l,t=e=>{e.stopPropagation()};return(0,a.jsx)(A.Z,{title:o("Tips"),description:o("true"==e?"unPublish_desc":"publish_desc"),onCancel:e=>{t(e)},onConfirm:async e=>{t(e),_()},children:(0,a.jsx)(z.Z,{title:o("true"==e?"unPublish":"publish"),children:"true"==e?(0,a.jsx)(F.Z,{type:"icon-unPublish-cloud",style:{fontSize:20},onClick:t}):(0,a.jsx)(F.Z,{type:"icon-publish-cloud",style:{fontSize:20},onClick:t})})})})()})}var $=l(24969),G=l(91085);function H(){let{t:e}=(0,p.$G)(),[t,l]=(0,m.useState)(!1),[n,s]=(0,m.useState)(!1),[i,r]=(0,m.useState)("app"),[o,d]=(0,m.useState)([]),[h,v]=(0,m.useState)(),[_,g]=(0,m.useState)("add"),y=()=>{g("add"),l(!0)},j=e=>{g("edit"),v(e),l(!0)},b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(!0);let[t,l]=await (0,x.Vx)((0,x.yk)(e));if(t){s(!1);return}l&&(d(l.app_list||[]),s(!1))};(0,m.useEffect)(()=>{b()},[]);let w=t=>{let l=t.isCollected?o.every(e=>!e.is_collected):0===o.length;return(0,a.jsxs)("div",{children:[!t.isCollected&&(0,a.jsx)(f.ZP,{onClick:y,type:"primary",className:"mb-4",icon:(0,a.jsx)($.Z,{}),children:e("create")}),l?(0,a.jsx)(G.Z,{}):(0,a.jsx)("div",{className:" w-full flex flex-wrap pb-0 gap-4",children:o.map((e,t)=>(0,a.jsx)(D,{handleEdit:j,app:e,updateApps:b,isCollected:"collected"===i},t))})]})},N=[{key:"app",label:e("App"),children:w({isCollected:!1})},{key:"collected",label:e("collected"),children:w({isCollected:!0})}];return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(c.Z,{spinning:n,children:(0,a.jsxs)("div",{className:"h-screen w-full p-4 md:p-6 overflow-y-auto",children:[(0,a.jsx)(u.Z,{defaultActiveKey:"app",items:N,onChange:e=>{r(e),"collected"===e?b({is_collected:!0}):b()}}),t&&(0,a.jsx)(Z,{app:"edit"===_?h:{},type:_,updateApps:b,open:t,handleCancel:()=>{l(!1)}})]})})})}},67919:function(e,t,l){"use strict";l.d(t,{Rv:function(){return i},VZ:function(){return a},Wf:function(){return n},z5:function(){return s}});let a=(e,t)=>{let l=0;return t.forEach(t=>{t.data.name===e.name&&l++}),"".concat(e.id,"_").concat(l)},n=e=>{let{nodes:t,edges:l,...a}=e,n=t.map(e=>{let{positionAbsolute:t,...l}=e;return{position_absolute:t,...l}}),s=l.map(e=>{let{sourceHandle:t,targetHandle:l,...a}=e;return{source_handle:t,target_handle:l,...a}});return{nodes:n,edges:s,...a}},s=e=>{let{nodes:t,edges:l,...a}=e,n=t.map(e=>{let{position_absolute:t,...l}=e;return{positionAbsolute:t,...l}}),s=l.map(e=>{let{source_handle:t,target_handle:l,...a}=e;return{sourceHandle:t,targetHandle:l,...a}});return{nodes:n,edges:s,...a}},i=e=>{let{nodes:t,edges:l}=e,a=[!0,t[0],""];e:for(let e=0;e<t.length;e++){let n=t[e].data,{inputs:s=[],parameters:i=[]}=n;for(let i=0;i<s.length;i++)if(!l.some(l=>l.targetHandle==="".concat(t[e].id,"|inputs|").concat(i))){a=[!1,t[e],"The input ".concat(s[i].type_name," of node ").concat(n.label," is required")];break e}for(let s=0;s<i.length;s++){let r=i[s];if(r.optional||"resource"!==r.category||l.some(l=>l.targetHandle==="".concat(t[e].id,"|parameters|").concat(s))){if(!r.optional&&"common"===r.category&&(void 0===r.value||null===r.value)){a=[!1,t[e],"The parameter ".concat(r.type_name," of node ").concat(n.label," is required")];break e}}else{a=[!1,t[e],"The parameter ".concat(r.type_name," of node ").concat(n.label," is required")];break e}}}return a}}},function(e){e.O(0,[8241,7779,3791,7656,2913,5081,8791,1203,6184,9859,2398,7434,1687,9924,4393,2456,9774,2888,179],function(){return e(e.s=89301)}),_N_E=e.O()}]);