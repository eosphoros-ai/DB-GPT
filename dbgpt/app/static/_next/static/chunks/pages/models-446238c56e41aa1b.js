(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8495],{80476:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/models",function(){return s(93167)}])},81799:function(e,l,s){"use strict";s.d(l,{A:function(){return m}});var t=s(85893),a=s(41468),r=s(51009),n=s(19284),o=s(25675),i=s.n(o),d=s(67294),c=s(67421);function m(e,l){var s;let{width:a,height:r}=l||{};return e?(0,t.jsx)(i(),{className:"rounded-full border border-gray-200 object-contain bg-white inline-block",width:a||24,height:r||24,src:(null===(s=n.H[e])||void 0===s?void 0:s.icon)||"/models/huggingface.svg",alt:"llm"}):null}l.Z=function(e){let{onChange:l}=e,{t:s}=(0,c.$G)(),{modelList:o,model:i}=(0,d.useContext)(a.p);return!o||o.length<=0?null:(0,t.jsx)(r.default,{value:i,placeholder:s("choose_model"),className:"w-52",onChange:e=>{null==l||l(e)},children:o.map(e=>{var l;return(0,t.jsx)(r.default.Option,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[m(e),(0,t.jsx)("span",{className:"ml-2",children:(null===(l=n.H[e])||void 0===l?void 0:l.label)||e})]})},e)})})}},26892:function(e,l,s){"use strict";var t=s(85893),a=s(67294),r=s(66309),n=s(83062),o=s(94184),i=s.n(o),d=s(25675),c=s.n(d);l.Z=(0,a.memo)(function(e){let{icon:l,iconBorder:s=!0,title:o,desc:d,tags:m,children:u,disabled:h,operations:x,className:p,...f}=e,j=(0,a.useMemo)(()=>l?"string"==typeof l?(0,t.jsx)(c(),{className:i()("w-11 h-11 rounded-full mr-4 object-contain bg-white",{"border border-gray-200":s}),width:48,height:48,src:l,alt:o}):l:null,[l]),v=(0,a.useMemo)(()=>m&&m.length?(0,t.jsx)("div",{className:"flex items-center mt-1 flex-wrap",children:m.map((e,l)=>{var s;return"string"==typeof e?(0,t.jsx)(r.Z,{className:"text-xs",bordered:!1,color:"default",children:e},l):(0,t.jsx)(r.Z,{className:"text-xs",bordered:null!==(s=e.border)&&void 0!==s&&s,color:e.color,children:e.text},l)})}):null,[m]);return(0,t.jsxs)("div",{className:i()("group/card relative flex flex-col w-72 rounded justify-between text-black bg-white shadow-[0_8px_16px_-10px_rgba(100,100,100,.08)] hover:shadow-[0_14px_20px_-10px_rgba(100,100,100,.15)] dark:bg-[#232734] dark:text-white dark:hover:border-white transition-[transfrom_shadow] duration-300 hover:-translate-y-1 min-h-fit",{"grayscale cursor-no-drop":h,"cursor-pointer":!h&&!!f.onClick},p),...f,children:[(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[j,(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold",children:o}),v]})]}),d&&(0,t.jsx)(n.Z,{title:d,children:(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-500 font-normal line-clamp-2",children:d})})]}),(0,t.jsxs)("div",{children:[u,x&&!!x.length&&(0,t.jsx)("div",{className:"flex flex-wrap items-center justify-center border-t border-solid border-gray-100 dark:border-theme-dark",children:x.map((e,l)=>(0,t.jsx)(n.Z,{title:e.label,children:(0,t.jsxs)("div",{className:"relative flex flex-1 items-center justify-center h-11 text-gray-400 hover:text-blue-500 transition-colors duration-300 cursor-pointer",onClick:l=>{var s;l.stopPropagation(),null===(s=e.onClick)||void 0===s||s.call(e)},children:[e.children,l<x.length-1&&(0,t.jsx)("div",{className:"w-[1px] h-6 absolute top-2 right-0 bg-gray-100 rounded dark:bg-theme-dark"})]})},"operation-".concat(l)))})]})]})})},93167:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return Z}});var t=s(85893),a=s(89182),r=s(67294),n=s(67421),o=s(2453),i=s(30381),d=s.n(i),c=s(26892),m=s(30159),u=s(62418),h=function(e){var l;let{info:s}=e,{t:i}=(0,n.$G)(),[h,x]=(0,r.useState)(!1);async function p(e){if(h)return;x(!0);let[,l]=await (0,a.Vx)((0,a.kU)({host:e.host,port:e.port,model:e.model_name,worker_type:e.model_type,params:{}}));x(!1),!0===l&&o.ZP.success(i("stop_model_success"))}return(0,t.jsx)(c.Z,{className:"w-96",title:s.model_name,tags:[{text:s.healthy?"Healthy":"Unhealthy",color:s.healthy?"green":"red",border:!0},s.model_type],icon:(null===(l=u.Hf[s.model_name])||void 0===l?void 0:l.icon)||"/models/huggingface.svg",operations:[{children:(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Z,{className:"mr-2"}),(0,t.jsx)("span",{className:"text-sm",children:"Stop Model"})]}),onClick:()=>{p(s)}}],children:(0,t.jsxs)("div",{className:"flex flex-col gap-1 px-4 pb-4 text-xs",children:[(0,t.jsxs)("div",{className:"flex overflow-hidden",children:[(0,t.jsx)("p",{className:"w-28 text-gray-500 mr-2",children:"Host:"}),(0,t.jsx)("p",{className:"flex-1 text-ellipsis",children:s.host})]}),(0,t.jsxs)("div",{className:"flex overflow-hidden",children:[(0,t.jsx)("p",{className:"w-28 text-gray-500 mr-2",children:"Manage Host:"}),(0,t.jsxs)("p",{className:"flex-1 text-ellipsis",children:[s.manager_host,":",s.manager_port]})]}),(0,t.jsxs)("div",{className:"flex overflow-hidden",children:[(0,t.jsx)("p",{className:"w-28 text-gray-500 mr-2",children:"Last Heart Beat:"}),(0,t.jsx)("p",{className:"flex-1 text-ellipsis",children:d()(s.last_heartbeat).format("YYYY-MM-DD")})]})]})})},x=s(51009),p=s(39479),f=s(83062),j=s(71577),v=s(81799),b=s(79531),g=s(48928),_=s(84567),w=function(e){let{params:l,form:s}=e;return((0,r.useEffect)(()=>{if(l){let e={};l.forEach(l=>{e[l.param_name]=l.default_value}),s.setFieldsValue(e)}},[l,s]),!l||(null==l?void 0:l.length)<1)?null:(0,t.jsx)(t.Fragment,{children:null==l?void 0:l.map(e=>{var l;return(0,t.jsx)(p.Z.Item,{label:(0,t.jsx)("p",{className:"whitespace-normal overflow-wrap-break-word",children:(null===(l=e.description)||void 0===l?void 0:l.length)>20?e.param_name:e.description}),name:e.param_name,initialValue:e.default_value,valuePropName:"bool"===e.param_type?"checked":"value",tooltip:e.description,rules:[{required:e.required,message:"Please input ".concat(e.description)}],children:function(e){switch(e.param_type){case"str":return(0,t.jsx)(b.default,{});case"int":return(0,t.jsx)(g.Z,{});case"bool":return(0,t.jsx)(_.Z,{})}}(e)},e.param_name)})})};let{Option:N}=x.default;var y=function(e){let{onCancel:l,onSuccess:s}=e,{t:i}=(0,n.$G)(),[d,c]=(0,r.useState)([]),[m,u]=(0,r.useState)(),[h,b]=(0,r.useState)(null),[g,_]=(0,r.useState)(!1),[y]=p.Z.useForm();async function k(){let[,e]=await (0,a.Vx)((0,a.xv)());e&&e.length&&c(e.sort((e,l)=>e.enabled&&!l.enabled?-1:!e.enabled&&l.enabled?1:e.model.localeCompare(l.model))),c(e)}async function Z(e){if(!m)return;delete e.model,_(!0);let[,,l]=await (0,a.Vx)((0,a.vA)({host:m.host,port:m.port,model:m.model,worker_type:null==m?void 0:m.worker_type,params:e}));if(_(!1),(null==l?void 0:l.success)===!0)return s&&s(),o.ZP.success(i("start_model_success"))}return(0,r.useEffect)(()=>{k()},[]),(0,t.jsxs)(p.Z,{labelCol:{span:8},wrapperCol:{span:16},onFinish:Z,form:y,children:[(0,t.jsx)(p.Z.Item,{label:"Model",name:"model",rules:[{required:!0,message:i("model_select_tips")}],children:(0,t.jsx)(x.default,{showSearch:!0,onChange:function(e,l){u(l.model),b(l.model.params)},children:null==d?void 0:d.map(e=>(0,t.jsxs)(N,{value:e.model,label:e.model,model:e,disabled:!e.enabled,children:[(0,v.A)(e.model),(0,t.jsx)(f.Z,{title:e.enabled?e.model:i("download_model_tip"),children:(0,t.jsx)("span",{className:"ml-2",children:e.model})}),(0,t.jsx)(f.Z,{title:e.enabled?"".concat(e.host,":").concat(e.port):i("download_model_tip"),children:(0,t.jsxs)("p",{className:"inline-block absolute right-4",children:[(0,t.jsxs)("span",{children:[e.host,":"]}),(0,t.jsx)("span",{children:e.port})]})})]},e.model))})}),(0,t.jsx)(w,{params:h,form:y}),(0,t.jsxs)("div",{className:"flex justify-center",children:[(0,t.jsx)(j.ZP,{type:"primary",htmlType:"submit",loading:g,children:i("submit")}),(0,t.jsx)(j.ZP,{className:"ml-10",onClick:l,children:"Cancel"})]})]})},k=s(36147),Z=function(){let{t:e}=(0,n.$G)(),[l,s]=(0,r.useState)([]),[o,i]=(0,r.useState)(!1);async function d(){let[,e]=await (0,a.Vx)((0,a.fZ)());s(null!=e?e:[])}return(0,r.useEffect)(()=>{d()},[]),(0,t.jsxs)("div",{className:"p-4 md:p-6 overflow-y-auto",children:[(0,t.jsx)(j.ZP,{className:"mb-4",type:"primary",onClick:()=>{i(!0)},children:e("create_model")}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 md:gap-4",children:l.map(e=>(0,t.jsx)(h,{info:e},e.model_name))}),(0,t.jsx)(k.default,{width:800,open:o,title:e("create_model"),onCancel:()=>{i(!1)},footer:null,children:(0,t.jsx)(y,{onCancel:()=>{i(!1)},onSuccess:()=>{i(!1),d()}})})]})}}},function(e){e.O(0,[4885,2185,5503,1009,9479,8928,3444,9774,2888,179],function(){return e(e.s=80476)}),_N_E=e.O()}]);