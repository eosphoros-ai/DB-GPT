(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2012],{27547:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;var l=r(n(64938)),a=n(85893),u=(0,l.default)((0,a.jsx)("path",{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91zM4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29zM20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24v-1.57zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}),"Groups");t.Z=u},15398:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;var l=r(n(64938)),a=n(85893),u=(0,l.default)((0,a.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");t.Z=u},64938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(52869)},52869:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return l.Z},createChainedFunction:function(){return a},createSvgIcon:function(){return u.Z},debounce:function(){return o},deprecatedPropType:function(){return s},isMuiElement:function(){return c},ownerDocument:function(){return i},ownerWindow:function(){return d},requirePropFactory:function(){return f},setRef:function(){return p},unstable_ClassNameGenerator:function(){return g},unstable_useEnhancedEffect:function(){return m},unstable_useId:function(){return v},unsupportedProp:function(){return _},useControlled:function(){return b},useEventCallback:function(){return x},useForkRef:function(){return h},useIsFocusVisible:function(){return y}});var r=n(37078),l=n(98216),a=function(...e){return e.reduce((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)},()=>{})},u=n(34678),o=n(39336).Z,s=function(e,t){return()=>null},c=n(18719).Z,i=n(82690).Z,d=n(74161).Z;n(87462);var f=function(e,t){return()=>null},p=n(7960).Z,m=n(73546).Z,v=n(92996).Z,_=function(e,t,n,r,l){return null},b=n(19032).Z,x=n(59948).Z,h=n(33703).Z,y=n(99962).Z;let g={configure:e=>{r.Z.configure(e)}}},38780:function(e,t){"use strict";t.Z=function(){let e=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let t=1;t<arguments.length;t++){let n=t<0||arguments.length<=t?void 0:arguments[t];n&&Object.keys(n).forEach(t=>{let r=n[t];void 0!==r&&(e[t]=r)})}return e}},57838:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(67294);function l(){let[,e]=r.useReducer(e=>e+1,0);return e}},84567:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(94184),l=n.n(r),a=n(50132),u=n(67294),o=n(53124),s=n(98866),c=n(65223);let i=u.createContext(null);var d=n(63185),f=n(45353),p=n(17415),m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,r=Object.getOwnPropertySymbols(e);l<r.length;l++)0>t.indexOf(r[l])&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(n[r[l]]=e[r[l]]);return n};let v=u.forwardRef((e,t)=>{var n;let{prefixCls:r,className:v,rootClassName:_,children:b,indeterminate:x=!1,style:h,onMouseEnter:y,onMouseLeave:g,skipGroup:Z=!1,disabled:j}=e,P=m(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:C,direction:O,checkbox:I}=u.useContext(o.E_),w=u.useContext(i),{isFormItemInput:E}=u.useContext(c.aM),k=u.useContext(s.Z),S=null!==(n=(null==w?void 0:w.disabled)||j)&&void 0!==n?n:k,N=u.useRef(P.value);u.useEffect(()=>{null==w||w.registerValue(P.value)},[]),u.useEffect(()=>{if(!Z)return P.value!==N.current&&(null==w||w.cancelValue(N.current),null==w||w.registerValue(P.value),N.current=P.value),()=>null==w?void 0:w.cancelValue(P.value)},[P.value]);let V=C("checkbox",r),[M,z]=(0,d.ZP)(V),$=Object.assign({},P);w&&!Z&&($.onChange=function(){P.onChange&&P.onChange.apply(P,arguments),w.toggleOption&&w.toggleOption({label:b,value:P.value})},$.name=w.name,$.checked=w.value.includes(P.value));let F=l()(`${V}-wrapper`,{[`${V}-rtl`]:"rtl"===O,[`${V}-wrapper-checked`]:$.checked,[`${V}-wrapper-disabled`]:S,[`${V}-wrapper-in-form-item`]:E},null==I?void 0:I.className,v,_,z),R=l()({[`${V}-indeterminate`]:x},p.A,z);return M(u.createElement(f.Z,{component:"Checkbox",disabled:S},u.createElement("label",{className:F,style:Object.assign(Object.assign({},null==I?void 0:I.style),h),onMouseEnter:y,onMouseLeave:g},u.createElement(a.Z,Object.assign({"aria-checked":x?"mixed":void 0},$,{prefixCls:V,className:R,disabled:S,ref:t})),void 0!==b&&u.createElement("span",null,b))))});var _=n(74902),b=n(98423),x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,r=Object.getOwnPropertySymbols(e);l<r.length;l++)0>t.indexOf(r[l])&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(n[r[l]]=e[r[l]]);return n};let h=u.forwardRef((e,t)=>{let{defaultValue:n,children:r,options:a=[],prefixCls:s,className:c,rootClassName:f,style:p,onChange:m}=e,h=x(e,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:y,direction:g}=u.useContext(o.E_),[Z,j]=u.useState(h.value||n||[]),[P,C]=u.useState([]);u.useEffect(()=>{"value"in h&&j(h.value||[])},[h.value]);let O=u.useMemo(()=>a.map(e=>"string"==typeof e||"number"==typeof e?{label:e,value:e}:e),[a]),I=y("checkbox",s),w=`${I}-group`,[E,k]=(0,d.ZP)(I),S=(0,b.Z)(h,["value","disabled"]),N=a.length?O.map(e=>u.createElement(v,{prefixCls:I,key:e.value.toString(),disabled:"disabled"in e?e.disabled:h.disabled,value:e.value,checked:Z.includes(e.value),onChange:e.onChange,className:`${w}-item`,style:e.style,title:e.title},e.label)):r,V={toggleOption:e=>{let t=Z.indexOf(e.value),n=(0,_.Z)(Z);-1===t?n.push(e.value):n.splice(t,1),"value"in h||j(n),null==m||m(n.filter(e=>P.includes(e)).sort((e,t)=>{let n=O.findIndex(t=>t.value===e),r=O.findIndex(e=>e.value===t);return n-r}))},value:Z,disabled:h.disabled,name:h.name,registerValue:e=>{C(t=>[].concat((0,_.Z)(t),[e]))},cancelValue:e=>{C(t=>t.filter(t=>t!==e))}},M=l()(w,{[`${w}-rtl`]:"rtl"===g},c,f,k);return E(u.createElement("div",Object.assign({className:M,style:p},S,{ref:t}),u.createElement(i.Provider,{value:V},N)))});var y=u.memo(h);v.Group=y,v.__ANT_CHECKBOX=!0;var g=v},40534:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/prompt",function(){return n(10519)}])},10519:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(85893),l=n(67294),a=n(83062),u=n(71577),o=n(82610),s=n(45396),c=n(36147),i=n(24969),d=n(27547),f=n(15398),p=n(67421),m=n(43893),v=n(39479),_=n(75081),b=n(51009),x=n(79531),h=(0,l.forwardRef)(function(e,t){let{t:n}=(0,p.$G)(),[a]=v.Z.useForm(),{prompt:u,onFinish:o,scenes:s}=e,[c,i]=(0,l.useState)(!1);(0,l.useEffect)(()=>{u&&a.setFieldsValue(u)},[]);let d=async()=>{let e=a.getFieldsValue();i(!0),await o(e),i(!1)};return(0,r.jsx)(_.Z,{spinning:c,children:(0,r.jsxs)(v.Z,{form:a,ref:t,name:"prompt-item-".concat((null==u?void 0:u.prompt_name)||"new"),layout:"vertical",className:"mt-4",onFinish:d,children:[(0,r.jsx)(v.Z.Item,{name:"chat_scene",label:n("Prompt_Info_Scene"),rules:[{required:!0,message:n("Please_Input")+n("Prompt_Info_Scene")}],children:(0,r.jsx)(b.default,{options:s})}),(0,r.jsx)(v.Z.Item,{name:"sub_chat_scene",label:n("Prompt_Info_Sub_Scene"),rules:[{required:!0,message:n("Please_Input")+n("Prompt_Info_Sub_Scene")}],children:(0,r.jsx)(x.default,{})}),(0,r.jsx)(v.Z.Item,{name:"prompt_name",label:n("Prompt_Info_Name"),rules:[{required:!0,message:n("Please_Input")+n("Prompt_Info_Name")}],children:(0,r.jsx)(x.default,{disabled:!!u})}),(0,r.jsx)(v.Z.Item,{name:"content",label:n("Prompt_Info_Content"),rules:[{required:!0,message:n("Please_Input")+n("Prompt_Info_Content")}],children:(0,r.jsx)(x.default.TextArea,{rows:6})})]})})});let y=e=>[{label:e("Public")+" Prompts",key:"common",icon:(0,r.jsx)(d.Z,{})},{label:e("Private")+" Prompts",key:"private",icon:(0,r.jsx)(f.Z,{})}],g=(e,t)=>[{title:e("Prompt_Info_Name"),dataIndex:"prompt_name",key:"prompt_name"},{title:e("Prompt_Info_Scene"),dataIndex:"chat_scene",key:"chat_scene"},{title:e("Prompt_Info_Sub_Scene"),dataIndex:"sub_chat_scene",key:"sub_chat_scene"},{title:e("Prompt_Info_Content"),dataIndex:"content",key:"content",render:e=>(0,r.jsx)(a.Z,{placement:"topLeft",title:e,children:e})},{title:e("Operation"),dataIndex:"operate",key:"operate",render:(n,l)=>(0,r.jsx)(u.ZP,{onClick:()=>{t(l)},type:"primary",children:e("Edit")})}];var Z=()=>{let{t:e}=(0,p.$G)(),[t,n]=(0,l.useState)("common"),[a,d]=(0,l.useState)(),[f,v]=(0,l.useState)(!1),[_,b]=(0,l.useState)(),[x,Z]=(0,l.useState)(!1),[j,P]=(0,l.useState)(),C=(0,l.useRef)(),O=async()=>{v(!0);let[e,n]=await (0,m.Vx)((0,m.xA)({prompt_type:t,current:1,pageSize:1e3,hideOnSinglePage:!0,showQuickJumper:!0}));d(n),v(!1)},I=async()=>{let[,e]=await (0,m.Vx)((0,m.CU)());P(null==e?void 0:e.map(e=>({value:e.chat_scene,label:e.scene_name})))},w=async e=>{_?await (0,m.Vx)((0,m.Fu)({...e,prompt_type:t})):await (0,m.Vx)((0,m.Hy)({...e,prompt_type:t})),O(),E()},E=()=>{Z(!1)};return(0,l.useEffect)(()=>{O()},[t]),(0,l.useEffect)(()=>{I()},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Z,{onClick:e=>{let t=e.key;n(t)},selectedKeys:[t],mode:"horizontal",items:y(e)}),(0,r.jsxs)("div",{className:"px-6 py-4",children:[(0,r.jsxs)("div",{className:"flex flex-row-reverse mb-4",children:[(0,r.jsxs)(u.ZP,{className:"flex items-center",onClick:()=>{Z(!0),b(void 0)},children:[(0,r.jsx)(i.Z,{}),e("Add")," Prompts"]}),"common"===t&&(0,r.jsxs)(u.ZP,{className:"mr-2 flex items-center",disabled:!0,children:[(0,r.jsx)(i.Z,{}),e("Add")," Prompts ",e("template")]})]}),(0,r.jsx)(s.Z,{columns:g(e,e=>{b(e),Z(!0)}),dataSource:a,loading:f,rowKey:e=>e.prompt_name,scroll:{y:600}})]}),(0,r.jsx)(c.default,{title:"".concat(e(_?"Edit":"Add")," Prompts"),destroyOnClose:!0,open:x,onCancel:E,cancelText:e("cancel"),okText:e("submit"),onOk:()=>{var e;null===(e=C.current)||void 0===e||e.submit()},children:(0,r.jsx)(h,{scenes:j,ref:C,prompt:_,onFinish:w})})]})}}},function(e){e.O(0,[7113,5503,1009,9479,4810,8548,4733,5396,9774,2888,179],function(){return e(e.s=40534)}),_N_E=e.O()}]);