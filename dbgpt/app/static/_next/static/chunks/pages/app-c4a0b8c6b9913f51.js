(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6366],{89301:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app",function(){return l(20405)}])},20405:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return eh}});var n=l(85893),t=l(23323),i=l(85418),s=l(78957),c=l(17788),r=l(75081),d=l(79531),o=l(66184),u=l(92398),m=l(67294),h=l(67421);function p(){return(0,n.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5649",width:"1.5em",height:"1.5em",children:(0,n.jsx)("path",{d:"M810.666667 554.666667h-256v256h-85.333334v-256H213.333333v-85.333334h256V213.333333h85.333334v256h256v85.333334z","p-id":"5650",fill:"#bfbfbf"})})}var g=l(89182),v=l(14726),f=l(27704),x=l(85813),_=l(50888),b=l(93967),y=l.n(b),w=l(87462),k=l(4942),$=l(97685),j=l(45987),S=l(21770),C=l(15105),I=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],N=m.forwardRef(function(e,a){var l,n=e.prefixCls,t=void 0===n?"rc-switch":n,i=e.className,s=e.checked,c=e.defaultChecked,r=e.disabled,d=e.loadingIcon,o=e.checkedChildren,u=e.unCheckedChildren,h=e.onClick,p=e.onChange,g=e.onKeyDown,v=(0,j.Z)(e,I),f=(0,S.Z)(!1,{value:s,defaultValue:c}),x=(0,$.Z)(f,2),_=x[0],b=x[1];function N(e,a){var l=_;return r||(b(l=e),null==p||p(l,a)),l}var E=y()(t,i,(l={},(0,k.Z)(l,"".concat(t,"-checked"),_),(0,k.Z)(l,"".concat(t,"-disabled"),r),l));return m.createElement("button",(0,w.Z)({},v,{type:"button",role:"switch","aria-checked":_,disabled:r,className:E,ref:a,onKeyDown:function(e){e.which===C.Z.LEFT?N(!1,e):e.which===C.Z.RIGHT&&N(!0,e),null==g||g(e)},onClick:function(e){var a=N(!_,e);null==h||h(a,e)}}),d,m.createElement("span",{className:"".concat(t,"-inner")},m.createElement("span",{className:"".concat(t,"-inner-checked")},o),m.createElement("span",{className:"".concat(t,"-inner-unchecked")},u)))});N.displayName="Switch";var E=l(45353),Z=l(53124),q=l(98866),O=l(98675),T=l(39302),M=l(10274),V=l(14747),D=l(91945),z=l(45503);let A=e=>{let{componentCls:a,trackHeightSM:l,trackPadding:n,trackMinWidthSM:t,innerMinMarginSM:i,innerMaxMarginSM:s,handleSizeSM:c,calc:r}=e,d=`${a}-inner`,o=(0,T.bf)(r(c).add(r(n).mul(2)).equal()),u=(0,T.bf)(r(s).mul(2).equal());return{[a]:{[`&${a}-small`]:{minWidth:t,height:l,lineHeight:(0,T.bf)(l),[`${a}-inner`]:{paddingInlineStart:s,paddingInlineEnd:i,[`${d}-checked`]:{marginInlineStart:`calc(-100% + ${o} - ${u})`,marginInlineEnd:`calc(100% - ${o} + ${u})`},[`${d}-unchecked`]:{marginTop:r(l).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${a}-handle`]:{width:c,height:c},[`${a}-loading-icon`]:{top:r(r(c).sub(e.switchLoadingIconSize)).div(2).equal(),fontSize:e.switchLoadingIconSize},[`&${a}-checked`]:{[`${a}-inner`]:{paddingInlineStart:i,paddingInlineEnd:s,[`${d}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${d}-unchecked`]:{marginInlineStart:`calc(100% - ${o} + ${u})`,marginInlineEnd:`calc(-100% + ${o} - ${u})`}},[`${a}-handle`]:{insetInlineStart:`calc(100% - ${(0,T.bf)(r(c).add(n).equal())})`}},[`&:not(${a}-disabled):active`]:{[`&:not(${a}-checked) ${d}`]:{[`${d}-unchecked`]:{marginInlineStart:r(e.marginXXS).div(2).equal(),marginInlineEnd:r(e.marginXXS).mul(-1).div(2).equal()}},[`&${a}-checked ${d}`]:{[`${d}-checked`]:{marginInlineStart:r(e.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:r(e.marginXXS).div(2).equal()}}}}}}},L=e=>{let{componentCls:a,handleSize:l,calc:n}=e;return{[a]:{[`${a}-loading-icon${e.iconCls}`]:{position:"relative",top:n(n(l).sub(e.fontSize)).div(2).equal(),color:e.switchLoadingIconColor,verticalAlign:"top"},[`&${a}-checked ${a}-loading-icon`]:{color:e.switchColor}}}},P=e=>{let{componentCls:a,trackPadding:l,handleBg:n,handleShadow:t,handleSize:i,calc:s}=e,c=`${a}-handle`;return{[a]:{[c]:{position:"absolute",top:l,insetInlineStart:l,width:i,height:i,transition:`all ${e.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:n,borderRadius:s(i).div(2).equal(),boxShadow:t,transition:`all ${e.switchDuration} ease-in-out`,content:'""'}},[`&${a}-checked ${c}`]:{insetInlineStart:`calc(100% - ${(0,T.bf)(s(i).add(l).equal())})`},[`&:not(${a}-disabled):active`]:{[`${c}::before`]:{insetInlineEnd:e.switchHandleActiveInset,insetInlineStart:0},[`&${a}-checked ${c}::before`]:{insetInlineEnd:0,insetInlineStart:e.switchHandleActiveInset}}}}},R=e=>{let{componentCls:a,trackHeight:l,trackPadding:n,innerMinMargin:t,innerMaxMargin:i,handleSize:s,calc:c}=e,r=`${a}-inner`,d=(0,T.bf)(c(s).add(c(n).mul(2)).equal()),o=(0,T.bf)(c(i).mul(2).equal());return{[a]:{[r]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:i,paddingInlineEnd:t,transition:`padding-inline-start ${e.switchDuration} ease-in-out, padding-inline-end ${e.switchDuration} ease-in-out`,[`${r}-checked, ${r}-unchecked`]:{display:"block",color:e.colorTextLightSolid,fontSize:e.fontSizeSM,transition:`margin-inline-start ${e.switchDuration} ease-in-out, margin-inline-end ${e.switchDuration} ease-in-out`,pointerEvents:"none"},[`${r}-checked`]:{marginInlineStart:`calc(-100% + ${d} - ${o})`,marginInlineEnd:`calc(100% - ${d} + ${o})`},[`${r}-unchecked`]:{marginTop:c(l).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${a}-checked ${r}`]:{paddingInlineStart:t,paddingInlineEnd:i,[`${r}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${r}-unchecked`]:{marginInlineStart:`calc(100% - ${d} + ${o})`,marginInlineEnd:`calc(-100% + ${d} - ${o})`}},[`&:not(${a}-disabled):active`]:{[`&:not(${a}-checked) ${r}`]:{[`${r}-unchecked`]:{marginInlineStart:c(n).mul(2).equal(),marginInlineEnd:c(n).mul(-1).mul(2).equal()}},[`&${a}-checked ${r}`]:{[`${r}-checked`]:{marginInlineStart:c(n).mul(-1).mul(2).equal(),marginInlineEnd:c(n).mul(2).equal()}}}}}},H=e=>{let{componentCls:a,trackHeight:l,trackMinWidth:n}=e;return{[a]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,V.Wf)(e)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:n,height:l,lineHeight:`${(0,T.bf)(l)}`,verticalAlign:"middle",background:e.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${e.motionDurationMid}`,userSelect:"none",[`&:hover:not(${a}-disabled)`]:{background:e.colorTextTertiary}}),(0,V.Qy)(e)),{[`&${a}-checked`]:{background:e.switchColor,[`&:hover:not(${a}-disabled)`]:{background:e.colorPrimaryHover}},[`&${a}-loading, &${a}-disabled`]:{cursor:"not-allowed",opacity:e.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${a}-rtl`]:{direction:"rtl"}})}};var X=(0,D.I$)("Switch",e=>{let a=(0,z.TS)(e,{switchDuration:e.motionDurationMid,switchColor:e.colorPrimary,switchDisabledOpacity:e.opacityLoading,switchLoadingIconSize:e.calc(e.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${e.opacityLoading})`,switchHandleActiveInset:"-30%"});return[H(a),R(a),P(a),L(a),A(a)]},e=>{let{fontSize:a,lineHeight:l,controlHeight:n,colorWhite:t}=e,i=a*l,s=n/2,c=i-4,r=s-4;return{trackHeight:i,trackHeightSM:s,trackMinWidth:2*c+8,trackMinWidthSM:2*r+4,trackPadding:2,handleBg:t,handleSize:c,handleSizeSM:r,handleShadow:`0 2px 4px 0 ${new M.C("#00230b").setAlpha(.2).toRgbString()}`,innerMinMargin:c/2,innerMaxMargin:c+2+4,innerMinMarginSM:r/2,innerMaxMarginSM:r+2+4}}),F=function(e,a){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>a.indexOf(n)&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var t=0,n=Object.getOwnPropertySymbols(e);t<n.length;t++)0>a.indexOf(n[t])&&Object.prototype.propertyIsEnumerable.call(e,n[t])&&(l[n[t]]=e[n[t]]);return l};let K=m.forwardRef((e,a)=>{let{prefixCls:l,size:n,disabled:t,loading:i,className:s,rootClassName:c,style:r,checked:d,value:o,defaultChecked:u,defaultValue:h,onChange:p}=e,g=F(e,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[v,f]=(0,S.Z)(!1,{value:null!=d?d:o,defaultValue:null!=u?u:h}),{getPrefixCls:x,direction:b,switch:w}=m.useContext(Z.E_),k=m.useContext(q.Z),$=(null!=t?t:k)||i,j=x("switch",l),C=m.createElement("div",{className:`${j}-handle`},i&&m.createElement(_.Z,{className:`${j}-loading-icon`})),[I,T,M]=X(j),V=(0,O.Z)(n),D=y()(null==w?void 0:w.className,{[`${j}-small`]:"small"===V,[`${j}-loading`]:i,[`${j}-rtl`]:"rtl"===b},s,c,T,M),z=Object.assign(Object.assign({},null==w?void 0:w.style),r);return I(m.createElement(E.Z,{component:"Switch"},m.createElement(N,Object.assign({},g,{checked:v,onChange:function(){f(arguments.length<=0?void 0:arguments[0]),null==p||p.apply(void 0,arguments)},prefixCls:j,className:D,style:z,disabled:$,ref:a,loadingIcon:C}))))});function W(e){let{resourceTypeOptions:a,updateResourcesByIndex:l,index:t,resource:i}=e,{t:s}=(0,h.$G)(),[c,r]=(0,m.useState)(i.type||(null==a?void 0:a[0].label)),[u,p]=(0,m.useState)([]),[v,_]=(0,m.useState)({name:i.name,type:i.type,value:i.value,is_dynamic:i.is_dynamic||!1}),b=async()=>{let[e,a]=await (0,g.Vx)((0,g.RX)({type:c}));a?p(null==a?void 0:a.map(e=>({label:e,value:e}))):p([])},y=e=>{r(e)},w=(e,a)=>{v[a]=e,_(v),l(v,t)},k=()=>{l(null,t)};return(0,m.useEffect)(()=>{b(),w(v.type||c,"type")},[c]),(0,m.useEffect)(()=>{var e,a;w((null===(e=u[0])||void 0===e?void 0:e.label)||i.value,"value"),_({...v,value:(null===(a=u[0])||void 0===a?void 0:a.label)||i.value})},[u]),(0,n.jsx)(x.Z,{className:"mb-3 dark:bg-[#232734] border-gray-200",title:"".concat(s("resource")," ").concat(t+1),extra:(0,n.jsx)(f.Z,{className:"text-[#ff1b2e] !text-lg",onClick:()=>{k()}}),children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center  mb-6",children:[(0,n.jsxs)("div",{className:"font-bold mr-4 w-32 text-center",children:[(0,n.jsx)("span",{className:"text-[#ff4d4f] font-normal",children:"*"}),"\xa0",s("resource_name"),":"]}),(0,n.jsx)(d.default,{className:"w-1/3",required:!0,value:v.name,onInput:e=>{w(e.target.value,"name")}}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"font-bold w-32 text-center",children:s("resource_dynamic")}),(0,n.jsx)(K,{defaultChecked:i.is_dynamic||!1,style:{background:v.is_dynamic?"#1677ff":"#ccc"},onChange:e=>{w(e,"is_dynamic")}})]})]}),(0,n.jsxs)("div",{className:"flex mb-5  items-center",children:[(0,n.jsxs)("div",{className:"font-bold mr-4 w-32  text-center",children:[s("resource_type"),": "]}),(0,n.jsx)(o.default,{className:"w-1/3",options:a,value:v.type||(null==a?void 0:a[0]),onChange:e=>{w(e,"type"),y(e)}}),(0,n.jsxs)("div",{className:"font-bold w-32 text-center",children:[s("resource_value"),":"]}),(null==u?void 0:u.length)>0?(0,n.jsx)(o.default,{value:v.value,className:"flex-1",options:u,onChange:e=>{w(e,"value")}}):(0,n.jsx)(d.default,{className:"flex-1",value:v.value||i.value,onInput:e=>{w(e.target.value,"value")}})]})]})})}function B(e){var a;let{resourceTypes:l,updateDetailsByAgentKey:t,detail:i,editResources:s}=e,{t:c}=(0,h.$G)(),[r,u]=(0,m.useState)([...null!=s?s:[]]),[p,f]=(0,m.useState)({...i,resources:[]}),[x,_]=(0,m.useState)([]),[b,y]=(0,m.useState)([]),w=(e,a)=>{u(l=>{let n=[...l];return e?n.map((l,n)=>a===n?e:l):n.filter((e,l)=>a!==l)})},k=async()=>{let[e,a]=await (0,g.Vx)((0,g.Vd)());a&&_(null==a?void 0:a.map(e=>({label:e,value:e})))},$=async e=>{let[a,l]=await (0,g.Vx)((0,g.m9)(e));if(l){var n;y(null!==(n=l.map(e=>({label:e,value:e})))&&void 0!==n?n:[])}};(0,m.useEffect)(()=>{k(),$(i.llm_strategy)},[]),(0,m.useEffect)(()=>{j(r,"resources")},[r]);let j=(e,a)=>{let l={...p};l[a]=e,f(l),t(i.key,l)},S=(0,m.useMemo)(()=>null==l?void 0:l.map(e=>({label:e,value:e})),[l]);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center mb-6 mt-6",children:[(0,n.jsxs)("div",{className:"mr-2 w-16 text-center",children:[c("Prompt"),":"]}),(0,n.jsx)(d.default,{required:!0,className:"mr-6 w-1/4",value:p.prompt_template,onChange:e=>{j(e.target.value,"prompt_template")}}),(0,n.jsxs)("div",{className:"mr-2",children:[c("LLM_strategy"),":"]}),(0,n.jsx)(o.default,{value:p.llm_strategy,options:x,className:"w-1/6 mr-6",onChange:e=>{j(e,"llm_strategy"),$(e)}}),b&&b.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mr-2",children:[c("LLM_strategy_value"),":"]}),(0,n.jsx)(o.default,{value:(a=p.llm_strategy_value)?a.split(","):[],className:"w-1/4",mode:"multiple",options:b,onChange:e=>{if(!e||(null==e?void 0:e.length)===0)return j(null,"llm_strategy_value"),null;let a=e.reduce((e,a,l)=>0===l?a:"".concat(e,",").concat(a),"");j(a,"llm_strategy_value")}})]})]}),(0,n.jsx)("div",{className:"mb-3 text-lg font-bold",children:c("available_resources")}),r.map((e,a)=>(0,n.jsx)(W,{resource:e,index:a,updateResourcesByIndex:w,resourceTypeOptions:S},a)),(0,n.jsx)(v.ZP,{type:"primary",className:"mt-2",size:"middle",onClick:()=>{u([...r,{name:"",type:"",introduce:"",value:"",is_dynamic:""}])},children:c("add_resource")})]})}K.__ANT_SWITCH=!0;var G=l(23391),Q=l(41664),Y=l.n(Q),J=l(36609);function U(e){var a;let{onFlowsChange:l,teamContext:t}=e,[i,s]=(0,m.useState)(),[c,r]=(0,m.useState)(),[d,u]=(0,m.useState)(),h=async()=>{let[e,a]=await (0,g.Vx)((0,g.Wf)());if(a){var n;r(null==a?void 0:null===(n=a.items)||void 0===n?void 0:n.map(e=>({label:e.name,value:e.name}))),s(a.items),l(null==a?void 0:a.items[0])}};return(0,m.useEffect)(()=>{h()},[]),(0,m.useEffect)(()=>{u((null==i?void 0:i.find(e=>(null==t?void 0:t.name)===e.name))||(null==i?void 0:i[0]))},[t,i]),(0,n.jsxs)("div",{className:"w-full h-[300px]",children:[(0,n.jsx)("div",{className:"mr-24 mb-4 mt-2",children:"Flows:"}),(0,n.jsxs)("div",{className:"flex items-center mb-6",children:[(0,n.jsx)(o.default,{onChange:e=>{u(null==i?void 0:i.find(a=>e===a.name)),l(null==i?void 0:i.find(a=>e===a.name))},value:(null==d?void 0:d.name)||(null==c?void 0:null===(a=c[0])||void 0===a?void 0:a.value),className:"w-1/4",options:c}),(0,n.jsx)(Y(),{href:"/flow/canvas/",className:"ml-6",children:(0,J.t)("edit_new_applications")}),(0,n.jsx)("div",{className:"text-gray-500 ml-16",children:null==d?void 0:d.description})]}),d&&(0,n.jsx)("div",{className:"w-full h-full border-[0.5px] border-dark-gray",children:(0,n.jsx)(G.Z,{flowData:null==d?void 0:d.flow_data})})]})}function ee(e){let{handleCancel:a,open:l,updateApps:v,type:f,app:x}=e,{t:_}=(0,h.$G)(),[b,y]=(0,m.useState)(!1),[w,k]=(0,m.useState)(),[$,j]=(0,m.useState)(),[S,C]=(0,m.useState)([]),[I,N]=(0,m.useState)([]),[E,Z]=(0,m.useState)([...(null==x?void 0:x.details)||[]]),[q,O]=(0,m.useState)(),[T,M]=(0,m.useState)(),[V,D]=(0,m.useState)(x.team_modal||"auto_plan"),[z]=t.Z.useForm(),A=[{value:"zh",label:_("Chinese")},{value:"en",label:_("English")}],L=async e=>{await (0,g.Vx)("add"===f?(0,g.L5)(e):(0,g.KT)(e)),await v()},P=async()=>{let e=x.details,[a,l]=await (0,g.Vx)((0,g.Q5)());(null==e?void 0:e.length)>0&&C(null==e?void 0:e.map(e=>({label:null==e?void 0:e.agent_name,children:(0,n.jsx)(B,{editResources:"edit"===f&&e.resources,detail:{key:null==e?void 0:e.agent_name,llm_strategy:null==e?void 0:e.llm_strategy,agent_name:null==e?void 0:e.agent_name,prompt_template:null==e?void 0:e.prompt_template,llm_strategy_value:null==e?void 0:e.llm_strategy_value},updateDetailsByAgentKey:F,resourceTypes:l}),key:null==e?void 0:e.agent_name})))},R=async()=>{let[e,a]=await (0,g.Vx)((0,g.lz)());if(!a)return null;let l=a.map(e=>({value:e,label:e}));j(l)},H=async()=>{let[e,a]=await (0,g.Vx)((0,g.j8)());if(!a)return null;N(a.map(e=>({label:e.name,key:e.name,onClick:()=>{K(e)},agent:e})).filter(e=>{var a,l;return x.details&&(null===(a=x.details)||void 0===a?void 0:a.length)!==0?null==x?void 0:null===(l=x.details)||void 0===l?void 0:l.every(a=>a.agent_name!==e.label):e}))},X=async()=>{let[e,a]=await (0,g.Vx)((0,g.Q5)());a&&M(a)};(0,m.useEffect)(()=>{R(),H(),X()},[]),(0,m.useEffect)(()=>{"edit"===f&&P()},[T]),(0,m.useEffect)(()=>{D(x.team_mode||"auto_plan")},[x]);let F=(e,a)=>{Z(l=>l.map(l=>e===(l.agent_name||l.key)?a:l))},K=async e=>{let a=e.name,[l,t]=await (0,g.Vx)((0,g.Q5)());k(a),Z(e=>[...e,{key:a,name:"",llm_strategy:"priority"}]),C(e=>[...e,{label:a,children:(0,n.jsx)(B,{detail:{key:a,llm_strategy:"default",agent_name:a,prompt_template:"",llm_strategy_value:null},updateDetailsByAgentKey:F,resourceTypes:t}),key:a}]),N(a=>a.filter(a=>a.key!==e.name))},W=e=>{let a=w,l=-1;if(!S)return null;S.forEach((a,n)=>{a.key===e&&(l=n-1)});let n=S.filter(a=>a.key!==e);n.length&&a===e&&(a=l>=0?n[l].key:n[0].key),Z(a=>null==a?void 0:a.filter(a=>(a.agent_name||a.key)!==e)),C(n),k(a),N(a=>[...a,{label:e,key:e,onClick:()=>{K({name:e,describe:"",system_message:""})}}])},G=async()=>{let e=await z.validateFields();if(!e)return;y(!0);let l={...z.getFieldsValue()};if("edit"===f&&(l.app_code=x.app_code),"awel_layout"!==l.team_mode)l.details=E;else{let e={...q};delete e.flow_data,l.team_context=e}try{await L(l)}catch(e){return}y(!1),a()};return(0,n.jsx)("div",{children:(0,n.jsx)(c.default,{okText:_("Submit"),title:_("edit"===f?"edit_application":"add_application"),open:l,width:"65%",onCancel:a,onOk:G,destroyOnClose:!0,children:(0,n.jsx)(r.Z,{spinning:b,children:(0,n.jsxs)(t.Z,{form:z,preserve:!1,size:"large",className:"mt-4 max-h-[70vh] overflow-auto h-[90vh]",layout:"horizontal",labelAlign:"left",labelCol:{span:4},initialValues:{app_name:x.app_name,app_describe:x.app_describe,language:x.language||A[0].value,team_mode:x.team_mode||"auto_plan"},autoComplete:"off",onFinish:G,children:[(0,n.jsx)(t.Z.Item,{label:_("app_name"),name:"app_name",rules:[{required:!0,message:_("Please_input_the_name")}],children:(0,n.jsx)(d.default,{placeholder:_("Please_input_the_name")})}),(0,n.jsx)(t.Z.Item,{label:_("Description"),name:"app_describe",rules:[{required:!0,message:_("Please_input_the_description")}],children:(0,n.jsx)(d.default.TextArea,{rows:3,placeholder:_("Please_input_the_description")})}),(0,n.jsxs)("div",{className:"flex w-full",children:[(0,n.jsx)(t.Z.Item,{labelCol:{span:7},label:_("language"),name:"language",className:"w-1/2",rules:[{required:!0}],children:(0,n.jsx)(o.default,{className:"w-2/3 ml-4",placeholder:_("language_select_tips"),options:A})}),(0,n.jsx)(t.Z.Item,{label:_("team_modal"),name:"team_mode",className:"w-1/2",labelCol:{span:6},rules:[{required:!0}],children:(0,n.jsx)(o.default,{defaultValue:x.team_mode||"auto_plan",className:"ml-4 w-72",onChange:e=>{D(e)},placeholder:_("Please_input_the_work_modal"),options:$})})]}),"awel_layout"!==V?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mb-5",children:_("Agents")}),(0,n.jsx)(u.Z,{addIcon:(0,n.jsx)(i.Z,{menu:{items:I},trigger:["click"],children:(0,n.jsx)("a",{className:"h-8 flex items-center",onClick:e=>e.preventDefault(),children:(0,n.jsx)(s.Z,{children:(0,n.jsx)(p,{})})})}),type:"editable-card",onChange:e=>{k(e)},activeKey:w,onEdit:(e,a)=>{"add"===a||W(e)},items:S})]}):(0,n.jsx)(U,{onFlowsChange:e=>{O(e)},teamContext:x.team_context})]})})})})}var ea=l(28058),el=l(37017),en={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},et=l(84089),ei=m.forwardRef(function(e,a){return m.createElement(et.Z,(0,w.Z)({},e,{ref:a,icon:en}))}),es=l(11163),ec=l(41468),er=l(26892);let{confirm:ed}=c.default;function eo(e){let{updateApps:a,app:l,handleEdit:t,isCollected:i}=e,{model:s}=(0,m.useContext)(ec.p),c=(0,es.useRouter)(),[r,d]=(0,m.useState)(l.is_collected),{setAgent:o}=(0,m.useContext)(ec.p),{t:u}=(0,h.$G)(),p={en:u("English"),zh:u("Chinese")},v=()=>{ed({title:u("Tips"),icon:(0,n.jsx)(ea.Z,{}),content:"do you want delete the application?",okText:"Yes",okType:"danger",cancelText:"No",async onOk(){await (0,g.Vx)((0,g.Nl)({app_code:l.app_code})),a(i?{is_collected:i}:void 0)}})};(0,m.useEffect)(()=>{d(l.is_collected)},[l]);let x=async()=>{let[e]=await (0,g.Vx)("true"===r?(0,g.gD)({app_code:l.app_code}):(0,g.mo)({app_code:l.app_code}));e||(a(i?{is_collected:i}:void 0),d("true"===r?"false":"true"))},_=async()=>{null==o||o(l.app_code);let[,e]=await (0,g.Vx)((0,g.sW)({chat_mode:"chat_agent"}));e&&c.push("/chat/?scene=chat_agent&id=".concat(e.conv_uid).concat(s?"&model=".concat(s):""))};return(0,n.jsx)(er.Z,{title:l.app_name,icon:"/icons/node/vis.png",iconBorder:!1,desc:l.app_describe,tags:[{text:p[l.language],color:"default"},{text:l.team_mode,color:"default"}],onClick:()=>{t(l)},operations:[{label:u("Chat"),children:(0,n.jsx)(el.Z,{}),onClick:_},{label:u("collect"),children:(0,n.jsx)(ei,{className:"false"===l.is_collected?"text-gray-400":"text-yellow-400"}),onClick:x},{label:u("Delete"),children:(0,n.jsx)(f.Z,{}),onClick:()=>{v()}}]})}var eu=l(24969),em=l(91085);function eh(){let{t:e}=(0,h.$G)(),[a,l]=(0,m.useState)(!1),[t,i]=(0,m.useState)(!1),[s,c]=(0,m.useState)("app"),[d,o]=(0,m.useState)([]),[p,f]=(0,m.useState)(),[x,_]=(0,m.useState)("add"),b=()=>{_("add"),l(!0)},y=e=>{_("edit"),f(e),l(!0)},w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(!0);let[a,l]=await (0,g.Vx)((0,g.yk)(e));if(a){i(!1);return}l&&(o(l.app_list||[]),i(!1))};(0,m.useEffect)(()=>{w()},[]);let k=a=>{let l=a.isCollected?d.every(e=>!e.is_collected):0===d.length;return(0,n.jsxs)("div",{children:[!a.isCollected&&(0,n.jsx)(v.ZP,{onClick:b,type:"primary",className:"mb-4",icon:(0,n.jsx)(eu.Z,{}),children:e("create")}),l?(0,n.jsx)(em.Z,{}):(0,n.jsx)("div",{className:" w-full flex flex-wrap pb-0 gap-4",children:d.map((e,a)=>(0,n.jsx)(eo,{handleEdit:y,app:e,updateApps:w,isCollected:"collected"===s},a))})]})},$=[{key:"app",label:e("App"),children:k({isCollected:!1})},{key:"collected",label:e("collected"),children:k({isCollected:!0})}];return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.Z,{spinning:t,children:(0,n.jsxs)("div",{className:"h-screen w-full p-4 md:p-6 overflow-y-auto",children:[(0,n.jsx)(u.Z,{defaultActiveKey:"app",items:$,onChange:e=>{c(e),"collected"===e?w({is_collected:!0}):w()}}),a&&(0,n.jsx)(ee,{app:"edit"===x?p:{},type:x,updateApps:w,open:a,handleCancel:()=>{l(!1)}})]})})})}}},function(e){e.O(0,[8241,6274,5503,3323,6184,5081,2398,5813,9924,6165,9774,2888,179],function(){return e(e.s=89301)}),_N_E=e.O()}]);