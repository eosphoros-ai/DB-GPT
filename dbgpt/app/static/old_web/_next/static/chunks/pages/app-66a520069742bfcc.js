(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6366],{89301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app",function(){return t(20405)}])},20405:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eh}});var a=t(85893),i=t(39479),l=t(85418),s=t(42075),c=t(36147),r=t(75081),d=t(79531),o=t(51009),u=t(44442),h=t(67294),m=t(67421);function p(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5649",width:"1.5em",height:"1.5em",children:(0,a.jsx)("path",{d:"M810.666667 554.666667h-256v256h-85.333334v-256H213.333333v-85.333334h256V213.333333h85.333334v256h256v85.333334z","p-id":"5650",fill:"#bfbfbf"})})}var g=t(89182),x=t(71577),w=t(27704),v=t(85813),f=t(50888),_=t(93967),y=t.n(_),b=t(87462),S=t(4942),$=t(97685),k=t(45987),j=t(21770),I=t(15105),M=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],C=h.forwardRef(function(e,n){var t,a=e.prefixCls,i=void 0===a?"rc-switch":a,l=e.className,s=e.checked,c=e.defaultChecked,r=e.disabled,d=e.loadingIcon,o=e.checkedChildren,u=e.unCheckedChildren,m=e.onClick,p=e.onChange,g=e.onKeyDown,x=(0,k.Z)(e,M),w=(0,j.Z)(!1,{value:s,defaultValue:c}),v=(0,$.Z)(w,2),f=v[0],_=v[1];function C(e,n){var t=f;return r||(_(t=e),null==p||p(t,n)),t}var N=y()(i,l,(t={},(0,S.Z)(t,"".concat(i,"-checked"),f),(0,S.Z)(t,"".concat(i,"-disabled"),r),t));return h.createElement("button",(0,b.Z)({},x,{type:"button",role:"switch","aria-checked":f,disabled:r,className:N,ref:n,onKeyDown:function(e){e.which===I.Z.LEFT?C(!1,e):e.which===I.Z.RIGHT&&C(!0,e),null==g||g(e)},onClick:function(e){var n=C(!f,e);null==m||m(n,e)}}),d,h.createElement("span",{className:"".concat(i,"-inner")},h.createElement("span",{className:"".concat(i,"-inner-checked")},o),h.createElement("span",{className:"".concat(i,"-inner-unchecked")},u)))});C.displayName="Switch";var N=t(45353),E=t(53124),P=t(98866),Z=t(98675),z=t(10274),O=t(14747),T=t(67968),D=t(45503);let V=e=>{let{componentCls:n}=e,t=`${n}-inner`;return{[n]:{[`&${n}-small`]:{minWidth:e.switchMinWidthSM,height:e.switchHeightSM,lineHeight:`${e.switchHeightSM}px`,[`${n}-inner`]:{paddingInlineStart:e.switchInnerMarginMaxSM,paddingInlineEnd:e.switchInnerMarginMinSM,[`${t}-checked`]:{marginInlineStart:`calc(-100% + ${e.switchPinSizeSM+2*e.switchPadding}px - ${2*e.switchInnerMarginMaxSM}px)`,marginInlineEnd:`calc(100% - ${e.switchPinSizeSM+2*e.switchPadding}px + ${2*e.switchInnerMarginMaxSM}px)`},[`${t}-unchecked`]:{marginTop:-e.switchHeightSM,marginInlineStart:0,marginInlineEnd:0}},[`${n}-handle`]:{width:e.switchPinSizeSM,height:e.switchPinSizeSM},[`${n}-loading-icon`]:{top:(e.switchPinSizeSM-e.switchLoadingIconSize)/2,fontSize:e.switchLoadingIconSize},[`&${n}-checked`]:{[`${n}-inner`]:{paddingInlineStart:e.switchInnerMarginMinSM,paddingInlineEnd:e.switchInnerMarginMaxSM,[`${t}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${t}-unchecked`]:{marginInlineStart:`calc(100% - ${e.switchPinSizeSM+2*e.switchPadding}px + ${2*e.switchInnerMarginMaxSM}px)`,marginInlineEnd:`calc(-100% + ${e.switchPinSizeSM+2*e.switchPadding}px - ${2*e.switchInnerMarginMaxSM}px)`}},[`${n}-handle`]:{insetInlineStart:`calc(100% - ${e.switchPinSizeSM+e.switchPadding}px)`}},[`&:not(${n}-disabled):active`]:{[`&:not(${n}-checked) ${t}`]:{[`${t}-unchecked`]:{marginInlineStart:e.marginXXS/2,marginInlineEnd:-e.marginXXS/2}},[`&${n}-checked ${t}`]:{[`${t}-checked`]:{marginInlineStart:-e.marginXXS/2,marginInlineEnd:e.marginXXS/2}}}}}}},H=e=>{let{componentCls:n}=e;return{[n]:{[`${n}-loading-icon${e.iconCls}`]:{position:"relative",top:(e.switchPinSize-e.fontSize)/2,color:e.switchLoadingIconColor,verticalAlign:"top"},[`&${n}-checked ${n}-loading-icon`]:{color:e.switchColor}}}},A=e=>{let{componentCls:n,motion:t}=e,a=`${n}-handle`;return{[n]:{[a]:{position:"absolute",top:e.switchPadding,insetInlineStart:e.switchPadding,width:e.switchPinSize,height:e.switchPinSize,transition:`all ${e.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:e.colorWhite,borderRadius:e.switchPinSize/2,boxShadow:e.switchHandleShadow,transition:`all ${e.switchDuration} ease-in-out`,content:'""'}},[`&${n}-checked ${a}`]:{insetInlineStart:`calc(100% - ${e.switchPinSize+e.switchPadding}px)`},[`&:not(${n}-disabled):active`]:t?{[`${a}::before`]:{insetInlineEnd:e.switchHandleActiveInset,insetInlineStart:0},[`&${n}-checked ${a}::before`]:{insetInlineEnd:0,insetInlineStart:e.switchHandleActiveInset}}:{}}}},L=e=>{let{componentCls:n}=e,t=`${n}-inner`;return{[n]:{[t]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:e.switchInnerMarginMax,paddingInlineEnd:e.switchInnerMarginMin,transition:`padding-inline-start ${e.switchDuration} ease-in-out, padding-inline-end ${e.switchDuration} ease-in-out`,[`${t}-checked, ${t}-unchecked`]:{display:"block",color:e.colorTextLightSolid,fontSize:e.fontSizeSM,transition:`margin-inline-start ${e.switchDuration} ease-in-out, margin-inline-end ${e.switchDuration} ease-in-out`,pointerEvents:"none"},[`${t}-checked`]:{marginInlineStart:`calc(-100% + ${e.switchPinSize+2*e.switchPadding}px - ${2*e.switchInnerMarginMax}px)`,marginInlineEnd:`calc(100% - ${e.switchPinSize+2*e.switchPadding}px + ${2*e.switchInnerMarginMax}px)`},[`${t}-unchecked`]:{marginTop:-e.switchHeight,marginInlineStart:0,marginInlineEnd:0}},[`&${n}-checked ${t}`]:{paddingInlineStart:e.switchInnerMarginMin,paddingInlineEnd:e.switchInnerMarginMax,[`${t}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${t}-unchecked`]:{marginInlineStart:`calc(100% - ${e.switchPinSize+2*e.switchPadding}px + ${2*e.switchInnerMarginMax}px)`,marginInlineEnd:`calc(-100% + ${e.switchPinSize+2*e.switchPadding}px - ${2*e.switchInnerMarginMax}px)`}},[`&:not(${n}-disabled):active`]:{[`&:not(${n}-checked) ${t}`]:{[`${t}-unchecked`]:{marginInlineStart:2*e.switchPadding,marginInlineEnd:-(2*e.switchPadding)}},[`&${n}-checked ${t}`]:{[`${t}-checked`]:{marginInlineStart:-(2*e.switchPadding),marginInlineEnd:2*e.switchPadding}}}}}},R=e=>{let{componentCls:n}=e;return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,O.Wf)(e)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:e.switchMinWidth,height:e.switchHeight,lineHeight:`${e.switchHeight}px`,verticalAlign:"middle",background:e.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${e.motionDurationMid}`,userSelect:"none",[`&:hover:not(${n}-disabled)`]:{background:e.colorTextTertiary}}),(0,O.Qy)(e)),{[`&${n}-checked`]:{background:e.switchColor,[`&:hover:not(${n}-disabled)`]:{background:e.colorPrimaryHover}},[`&${n}-loading, &${n}-disabled`]:{cursor:"not-allowed",opacity:e.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${n}-rtl`]:{direction:"rtl"}})}};var W=(0,T.Z)("Switch",e=>{let n=e.fontSize*e.lineHeight,t=e.controlHeight/2,a=n-4,i=t-4,l=(0,D.TS)(e,{switchMinWidth:2*a+8,switchHeight:n,switchDuration:e.motionDurationMid,switchColor:e.colorPrimary,switchDisabledOpacity:e.opacityLoading,switchInnerMarginMin:a/2,switchInnerMarginMax:a+2+4,switchPadding:2,switchPinSize:a,switchBg:e.colorBgContainer,switchMinWidthSM:2*i+4,switchHeightSM:t,switchInnerMarginMinSM:i/2,switchInnerMarginMaxSM:i+2+4,switchPinSizeSM:i,switchHandleShadow:`0 2px 4px 0 ${new z.C("#00230b").setAlpha(.2).toRgbString()}`,switchLoadingIconSize:.75*e.fontSizeIcon,switchLoadingIconColor:`rgba(0, 0, 0, ${e.opacityLoading})`,switchHandleActiveInset:"-30%"});return[R(l),L(l),A(l),H(l),V(l)]}),X=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>n.indexOf(a)&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)0>n.indexOf(a[i])&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(t[a[i]]=e[a[i]]);return t};let F=h.forwardRef((e,n)=>{let{prefixCls:t,size:a,disabled:i,loading:l,className:s,rootClassName:c,style:r}=e,d=X(e,["prefixCls","size","disabled","loading","className","rootClassName","style"]),{getPrefixCls:o,direction:u,switch:m}=h.useContext(E.E_),p=h.useContext(P.Z),g=(null!=i?i:p)||l,x=o("switch",t),w=h.createElement("div",{className:`${x}-handle`},l&&h.createElement(f.Z,{className:`${x}-loading-icon`})),[v,_]=W(x),b=(0,Z.Z)(a),S=y()(null==m?void 0:m.className,{[`${x}-small`]:"small"===b,[`${x}-loading`]:l,[`${x}-rtl`]:"rtl"===u},s,c,_),$=Object.assign(Object.assign({},null==m?void 0:m.style),r);return v(h.createElement(N.Z,{component:"Switch"},h.createElement(C,Object.assign({},d,{prefixCls:x,className:S,style:$,disabled:g,ref:n,loadingIcon:w}))))});function B(e){let{resourceTypeOptions:n,updateResourcesByIndex:t,index:i,resource:l}=e,{t:s}=(0,m.$G)(),[c,r]=(0,h.useState)(l.type||(null==n?void 0:n[0].label)),[u,p]=(0,h.useState)([]),[x,f]=(0,h.useState)({name:l.name,type:l.type,value:l.value,is_dynamic:l.is_dynamic||!1}),_=async()=>{let[e,n]=await (0,g.Vx)((0,g.RX)({type:c}));n?p(null==n?void 0:n.map(e=>({label:e,value:e}))):p([])},y=e=>{r(e)},b=(e,n)=>{x[n]=e,f(x),t(x,i)},S=()=>{t(null,i)};return(0,h.useEffect)(()=>{_(),b(x.type||c,"type")},[c]),(0,h.useEffect)(()=>{var e,n;b(l.value||(null===(e=u[0])||void 0===e?void 0:e.label),"value"),f({...x,value:l.value||(null===(n=u[0])||void 0===n?void 0:n.label)})},[u]),(0,a.jsx)(v.Z,{className:"mb-3 dark:bg-[#232734] border-gray-200",title:"".concat(s("resource")," ").concat(i+1),extra:(0,a.jsx)(w.Z,{className:"text-[#ff1b2e] !text-lg",onClick:()=>{S()}}),children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center  mb-6",children:[(0,a.jsxs)("div",{className:"font-bold mr-4 w-32 text-center",children:[(0,a.jsx)("span",{className:"text-[#ff4d4f] font-normal",children:"*"}),"\xa0",s("resource_name"),":"]}),(0,a.jsx)(d.default,{className:"w-1/3",required:!0,value:x.name,onInput:e=>{b(e.target.value,"name")}}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"font-bold w-32 text-center",children:s("resource_dynamic")}),(0,a.jsx)(F,{defaultChecked:l.is_dynamic||!1,style:{background:x.is_dynamic?"#1677ff":"#ccc"},onChange:e=>{b(e,"is_dynamic")}})]})]}),(0,a.jsxs)("div",{className:"flex mb-5  items-center",children:[(0,a.jsxs)("div",{className:"font-bold mr-4 w-32  text-center",children:[s("resource_type"),": "]}),(0,a.jsx)(o.default,{className:"w-1/3",options:n,value:x.type||(null==n?void 0:n[0]),onChange:e=>{b(e,"type"),y(e)}}),(0,a.jsxs)("div",{className:"font-bold w-32 text-center",children:[s("resource_value"),":"]}),(null==u?void 0:u.length)>0?(0,a.jsx)(o.default,{value:x.value,className:"flex-1",options:u,onChange:e=>{b(e,"value")}}):(0,a.jsx)(d.default,{className:"flex-1",value:x.value||l.value,onInput:e=>{b(e.target.value,"value")}})]})]})})}function K(e){var n;let{resourceTypes:t,updateDetailsByAgentKey:i,detail:l,editResources:s}=e,{t:c}=(0,m.$G)(),[r,u]=(0,h.useState)([...null!=s?s:[]]),[p,w]=(0,h.useState)({...l,resources:[]}),[v,f]=(0,h.useState)([]),[_,y]=(0,h.useState)([]),b=(e,n)=>{u(t=>{let a=[...t];return e?a.map((t,a)=>n===a?e:t):a.filter((e,t)=>n!==t)})},S=async()=>{let[e,n]=await (0,g.Vx)((0,g.Vd)());n&&f(null==n?void 0:n.map(e=>({label:e,value:e})))},$=async e=>{let[n,t]=await (0,g.Vx)((0,g.m9)(e));if(t){var a;y(null!==(a=t.map(e=>({label:e,value:e})))&&void 0!==a?a:[])}};(0,h.useEffect)(()=>{S(),$(l.llm_strategy)},[]),(0,h.useEffect)(()=>{k(r,"resources")},[r]);let k=(e,n)=>{let t={...p};t[n]=e,w(t),i(l.key,t)},j=(0,h.useMemo)(()=>null==t?void 0:t.map(e=>({label:e,value:e})),[t]);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center mb-6 mt-6",children:[(0,a.jsxs)("div",{className:"mr-2 w-16 text-center",children:[c("Prompt"),":"]}),(0,a.jsx)(d.default,{required:!0,className:"mr-6 w-1/4",value:p.prompt_template,onChange:e=>{k(e.target.value,"prompt_template")}}),(0,a.jsxs)("div",{className:"mr-2",children:[c("LLM_strategy"),":"]}),(0,a.jsx)(o.default,{value:p.llm_strategy,options:v,className:"w-1/6 mr-6",onChange:e=>{k(e,"llm_strategy"),$(e)}}),_&&_.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mr-2",children:[c("LLM_strategy_value"),":"]}),(0,a.jsx)(o.default,{value:(n=p.llm_strategy_value)?n.split(","):[],className:"w-1/4",mode:"multiple",options:_,onChange:e=>{if(!e||(null==e?void 0:e.length)===0)return k(null,"llm_strategy_value"),null;let n=e.reduce((e,n,t)=>0===t?n:"".concat(e,",").concat(n),"");k(n,"llm_strategy_value")}})]})]}),(0,a.jsx)("div",{className:"mb-3 text-lg font-bold",children:c("available_resources")}),r.map((e,n)=>(0,a.jsx)(B,{resource:e,index:n,updateResourcesByIndex:b,resourceTypeOptions:j},n)),(0,a.jsx)(x.ZP,{type:"primary",className:"mt-2",size:"middle",onClick:()=>{u([...r,{name:"",type:"",introduce:"",value:"",is_dynamic:""}])},children:c("add_resource")})]})}F.__ANT_SWITCH=!0;var q=t(23391),G=t(41664),Q=t.n(G),Y=t(36609);function J(e){var n;let{onFlowsChange:t,teamContext:i}=e,[l,s]=(0,h.useState)(),[c,r]=(0,h.useState)(),[d,u]=(0,h.useState)(),m=async()=>{let[e,n]=await (0,g.Vx)((0,g.Wf)());if(n){var a;r(null==n?void 0:null===(a=n.items)||void 0===a?void 0:a.map(e=>({label:e.name,value:e.name}))),s(n.items),t(null==n?void 0:n.items[0])}};return(0,h.useEffect)(()=>{m()},[]),(0,h.useEffect)(()=>{u((null==l?void 0:l.find(e=>(null==i?void 0:i.name)===e.name))||(null==l?void 0:l[0]))},[i,l]),(0,a.jsxs)("div",{className:"w-full h-[300px]",children:[(0,a.jsx)("div",{className:"mr-24 mb-4 mt-2",children:"Flows:"}),(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)(o.default,{onChange:e=>{u(null==l?void 0:l.find(n=>e===n.name)),t(null==l?void 0:l.find(n=>e===n.name))},value:(null==d?void 0:d.name)||(null==c?void 0:null===(n=c[0])||void 0===n?void 0:n.value),className:"w-1/4",options:c}),(0,a.jsx)(Q(),{href:"/flow/canvas/",className:"ml-6",children:(0,Y.t)("edit_new_applications")}),(0,a.jsx)("div",{className:"text-gray-500 ml-16",children:null==d?void 0:d.description})]}),d&&(0,a.jsx)("div",{className:"w-full h-full border-[0.5px] border-dark-gray",children:(0,a.jsx)(q.Z,{flowData:null==d?void 0:d.flow_data})})]})}function U(e){let{handleCancel:n,open:t,updateApps:x,type:w,app:v}=e,{t:f}=(0,m.$G)(),[_,y]=(0,h.useState)(!1),[b,S]=(0,h.useState)(),[$,k]=(0,h.useState)(),[j,I]=(0,h.useState)([]),[M,C]=(0,h.useState)([]),[N,E]=(0,h.useState)([...(null==v?void 0:v.details)||[]]),[P,Z]=(0,h.useState)(),[z,O]=(0,h.useState)(),[T,D]=(0,h.useState)(v.team_modal||"auto_plan"),[V]=i.Z.useForm(),H=[{value:"zh",label:f("Chinese")},{value:"en",label:f("English")}],A=async e=>{await (0,g.Vx)("add"===w?(0,g.L5)(e):(0,g.KT)(e)),await x()},L=async()=>{let e=v.details,[n,t]=await (0,g.Vx)((0,g.Q5)());(null==e?void 0:e.length)>0&&I(null==e?void 0:e.map(e=>({label:null==e?void 0:e.agent_name,children:(0,a.jsx)(K,{editResources:"edit"===w&&e.resources,detail:{key:null==e?void 0:e.agent_name,llm_strategy:null==e?void 0:e.llm_strategy,agent_name:null==e?void 0:e.agent_name,prompt_template:null==e?void 0:e.prompt_template,llm_strategy_value:null==e?void 0:e.llm_strategy_value},updateDetailsByAgentKey:F,resourceTypes:t}),key:null==e?void 0:e.agent_name})))},R=async()=>{let[e,n]=await (0,g.Vx)((0,g.lz)());if(!n)return null;let t=n.map(e=>({value:e,label:e}));k(t)},W=async()=>{let[e,n]=await (0,g.Vx)((0,g.j8)());if(!n)return null;C(n.map(e=>({label:e.name,key:e.name,onClick:()=>{B(e)},agent:e})).filter(e=>{var n,t;return v.details&&(null===(n=v.details)||void 0===n?void 0:n.length)!==0?null==v?void 0:null===(t=v.details)||void 0===t?void 0:t.every(n=>n.agent_name!==e.label):e}))},X=async()=>{let[e,n]=await (0,g.Vx)((0,g.Q5)());n&&O(n)};(0,h.useEffect)(()=>{R(),W(),X()},[]),(0,h.useEffect)(()=>{"edit"===w&&L()},[z]),(0,h.useEffect)(()=>{D(v.team_mode||"auto_plan")},[v]);let F=(e,n)=>{E(t=>t.map(t=>e===(t.agent_name||t.key)?n:t))},B=async e=>{let n=e.name,[t,i]=await (0,g.Vx)((0,g.Q5)());S(n),E(e=>[...e,{key:n,name:"",llm_strategy:"priority"}]),I(e=>[...e,{label:n,children:(0,a.jsx)(K,{detail:{key:n,llm_strategy:"default",agent_name:n,prompt_template:"",llm_strategy_value:null},updateDetailsByAgentKey:F,resourceTypes:i}),key:n}]),C(n=>n.filter(n=>n.key!==e.name))},q=e=>{let n=b,t=-1;if(!j)return null;j.forEach((n,a)=>{n.key===e&&(t=a-1)});let a=j.filter(n=>n.key!==e);a.length&&n===e&&(n=t>=0?a[t].key:a[0].key),E(n=>null==n?void 0:n.filter(n=>(n.agent_name||n.key)!==e)),I(a),S(n),C(n=>[...n,{label:e,key:e,onClick:()=>{B({name:e,describe:"",system_message:""})}}])},G=async()=>{let e=await V.validateFields();if(!e)return;y(!0);let t={...V.getFieldsValue()};if("edit"===w&&(t.app_code=v.app_code),"awel_layout"!==t.team_mode)t.details=N;else{let e={...P};delete e.flow_data,t.team_context=e}try{await A(t)}catch(e){return}y(!1),n()};return(0,a.jsx)("div",{children:(0,a.jsx)(c.default,{okText:f("Submit"),title:f("edit"===w?"edit_application":"add_application"),open:t,width:"65%",onCancel:n,onOk:G,destroyOnClose:!0,children:(0,a.jsx)(r.Z,{spinning:_,children:(0,a.jsxs)(i.Z,{form:V,preserve:!1,size:"large",className:"mt-4 max-h-[70vh] overflow-auto h-[90vh]",layout:"horizontal",labelAlign:"left",labelCol:{span:4},initialValues:{app_name:v.app_name,app_describe:v.app_describe,language:v.language||H[0].value,team_mode:v.team_mode||"auto_plan"},autoComplete:"off",onFinish:G,children:[(0,a.jsx)(i.Z.Item,{label:f("app_name"),name:"app_name",rules:[{required:!0,message:f("Please_input_the_name")}],children:(0,a.jsx)(d.default,{placeholder:f("Please_input_the_name")})}),(0,a.jsx)(i.Z.Item,{label:f("Description"),name:"app_describe",rules:[{required:!0,message:f("Please_input_the_description")}],children:(0,a.jsx)(d.default.TextArea,{rows:3,placeholder:f("Please_input_the_description")})}),(0,a.jsxs)("div",{className:"flex w-full",children:[(0,a.jsx)(i.Z.Item,{labelCol:{span:7},label:f("language"),name:"language",className:"w-1/2",rules:[{required:!0}],children:(0,a.jsx)(o.default,{className:"w-2/3 ml-4",placeholder:f("language_select_tips"),options:H})}),(0,a.jsx)(i.Z.Item,{label:f("team_modal"),name:"team_mode",className:"w-1/2",labelCol:{span:6},rules:[{required:!0}],children:(0,a.jsx)(o.default,{defaultValue:v.team_mode||"auto_plan",className:"ml-4 w-72",onChange:e=>{D(e)},placeholder:f("Please_input_the_work_modal"),options:$})})]}),"awel_layout"!==T?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-5",children:f("Agents")}),(0,a.jsx)(u.Z,{addIcon:(0,a.jsx)(l.Z,{menu:{items:M},trigger:["click"],children:(0,a.jsx)("a",{className:"h-8 flex items-center",onClick:e=>e.preventDefault(),children:(0,a.jsx)(s.Z,{children:(0,a.jsx)(p,{})})})}),type:"editable-card",onChange:e=>{S(e)},activeKey:b,onEdit:(e,n)=>{"add"===n||q(e)},items:j})]}):(0,a.jsx)(J,{onFlowsChange:e=>{Z(e)},teamContext:v.team_context})]})})})})}var ee=t(28058),en=t(37017),et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},ea=t(84089),ei=h.forwardRef(function(e,n){return h.createElement(ea.Z,(0,b.Z)({},e,{ref:n,icon:et}))}),el=t(11163),es=t(41468),ec=t(26892);let{confirm:er}=c.default;function ed(e){let{updateApps:n,app:t,handleEdit:i,isCollected:l}=e,{model:s}=(0,h.useContext)(es.p),c=(0,el.useRouter)(),[r,d]=(0,h.useState)(t.is_collected),{setAgent:o}=(0,h.useContext)(es.p),{t:u}=(0,m.$G)(),p={en:u("English"),zh:u("Chinese")},x=()=>{er({title:u("Tips"),icon:(0,a.jsx)(ee.Z,{}),content:"do you want delete the application?",okText:"Yes",okType:"danger",cancelText:"No",async onOk(){await (0,g.Vx)((0,g.Nl)({app_code:t.app_code})),n(l?{is_collected:l}:void 0)}})};(0,h.useEffect)(()=>{d(t.is_collected)},[t]);let v=async()=>{let[e]=await (0,g.Vx)("true"===r?(0,g.gD)({app_code:t.app_code}):(0,g.mo)({app_code:t.app_code}));e||(n(l?{is_collected:l}:void 0),d("true"===r?"false":"true"))},f=async()=>{null==o||o(t.app_code);let[,e]=await (0,g.Vx)((0,g.sW)({chat_mode:"chat_agent"}));e&&c.push("/chat/?scene=chat_agent&id=".concat(e.conv_uid).concat(s?"&model=".concat(s):""))};return(0,a.jsx)(ec.Z,{title:t.app_name,icon:"/icons/node/vis.png",iconBorder:!1,desc:t.app_describe,tags:[{text:p[t.language],color:"default"},{text:t.team_mode,color:"default"}],onClick:()=>{i(t)},operations:[{label:u("Chat"),children:(0,a.jsx)(en.Z,{}),onClick:f},{label:u("collect"),children:(0,a.jsx)(ei,{className:"false"===t.is_collected?"text-gray-400":"text-yellow-400"}),onClick:v},{label:u("Delete"),children:(0,a.jsx)(w.Z,{}),onClick:()=>{x()}}]})}var eo=t(24969),eu=t(91085);function eh(){let{t:e}=(0,m.$G)(),[n,t]=(0,h.useState)(!1),[i,l]=(0,h.useState)(!1),[s,c]=(0,h.useState)("app"),[d,o]=(0,h.useState)([]),[p,w]=(0,h.useState)(),[v,f]=(0,h.useState)("add"),_=()=>{f("add"),t(!0)},y=e=>{f("edit"),w(e),t(!0)},b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(!0);let[n,t]=await (0,g.Vx)((0,g.yk)(e));if(n){l(!1);return}t&&(o(t.app_list||[]),l(!1))};(0,h.useEffect)(()=>{b()},[]);let S=n=>{let t=n.isCollected?d.every(e=>!e.is_collected):0===d.length;return(0,a.jsxs)("div",{children:[!n.isCollected&&(0,a.jsx)(x.ZP,{onClick:_,type:"primary",className:"mb-4",icon:(0,a.jsx)(eo.Z,{}),children:e("create")}),t?(0,a.jsx)(eu.Z,{}):(0,a.jsx)("div",{className:" w-full flex flex-wrap pb-0 gap-4",children:d.map((e,n)=>(0,a.jsx)(ed,{handleEdit:y,app:e,updateApps:b,isCollected:"collected"===s},n))})]})},$=[{key:"app",label:e("App"),children:S({isCollected:!1})},{key:"collected",label:e("collected"),children:S({isCollected:!0})}];return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.Z,{spinning:i,children:(0,a.jsxs)("div",{className:"h-screen w-full p-4 md:p-6 overflow-y-auto",children:[(0,a.jsx)(u.Z,{defaultActiveKey:"app",items:$,onChange:e=>{c(e),"collected"===e?b({is_collected:!0}):b()}}),n&&(0,a.jsx)(U,{app:"edit"===v?p:{},type:v,updateApps:b,open:n,handleCancel:()=>{t(!1)}})]})})})}}},function(e){e.O(0,[8241,2185,5503,1009,9479,785,5813,7434,9924,6165,9774,2888,179],function(){return e(e.s=89301)}),_N_E=e.O()}]);