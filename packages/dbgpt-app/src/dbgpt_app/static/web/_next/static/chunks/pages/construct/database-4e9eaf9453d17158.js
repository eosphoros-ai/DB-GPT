(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1286],{27704:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var n=a(87462),l=a(67294),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},o=a(13401),s=l.forwardRef(function(e,t){return l.createElement(o.Z,(0,n.Z)({},e,{ref:t,icon:r}))})},36531:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var n=a(87462),l=a(67294),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},o=a(13401),s=l.forwardRef(function(e,t){return l.createElement(o.Z,(0,n.Z)({},e,{ref:t,icon:r}))})},87740:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var n=a(87462),l=a(67294),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},o=a(13401),s=l.forwardRef(function(e,t){return l.createElement(o.Z,(0,n.Z)({},e,{ref:t,icon:r}))})},2093:function(e,t,a){"use strict";var n=a(97582),l=a(67294),r=a(92770);t.Z=function(e,t){(0,l.useEffect)(function(){var t=e(),a=!1;return!function(){(0,n.mG)(this,void 0,void 0,function(){return(0,n.Jh)(this,function(e){switch(e.label){case 0:if(!(0,r.mf)(t[Symbol.asyncIterator]))return[3,4];e.label=1;case 1:return[4,t.next()];case 2:if(e.sent().done||a)return[3,3];return[3,1];case 3:return[3,6];case 4:return[4,t];case 5:e.sent(),e.label=6;case 6:return[2]}})})}(),function(){a=!0}},t)}},85265:function(e,t,a){"use strict";a.d(t,{Z:function(){return q}});var n=a(67294),l=a(93967),r=a.n(l),o=a(1413),s=a(97685),i=a(2788),c=a(8410),d=n.createContext(null),u=n.createContext({}),m=a(4942),p=a(87462),f=a(29372),v=a(15105),h=a(64217),b=a(45987),x=a(42550),g=["prefixCls","className","containerRef"],y=function(e){var t=e.prefixCls,a=e.className,l=e.containerRef,o=(0,b.Z)(e,g),s=n.useContext(u).panel,i=(0,x.x1)(s,l);return n.createElement("div",(0,p.Z)({className:r()("".concat(t,"-content"),a),role:"dialog",ref:i},(0,h.Z)(e,{aria:!0}),{"aria-modal":"true"},o))},w=a(80334);function j(e){return"string"==typeof e&&String(Number(e))===e?((0,w.ZP)(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var k={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"},Z=n.forwardRef(function(e,t){var a,l,i,c=e.prefixCls,u=e.open,b=e.placement,x=e.inline,g=e.push,w=e.forceRender,Z=e.autoFocus,C=e.keyboard,N=e.classNames,_=e.rootClassName,E=e.rootStyle,S=e.zIndex,O=e.className,$=e.id,D=e.style,P=e.motion,I=e.width,M=e.height,R=e.children,T=e.mask,F=e.maskClosable,L=e.maskMotion,V=e.maskClassName,z=e.maskStyle,B=e.afterOpenChange,H=e.onClose,K=e.onMouseEnter,A=e.onMouseOver,W=e.onMouseLeave,U=e.onClick,X=e.onKeyDown,q=e.onKeyUp,G=e.styles,Y=e.drawerRender,J=n.useRef(),Q=n.useRef(),ee=n.useRef();n.useImperativeHandle(t,function(){return J.current}),n.useEffect(function(){if(u&&Z){var e;null===(e=J.current)||void 0===e||e.focus({preventScroll:!0})}},[u]);var et=n.useState(!1),ea=(0,s.Z)(et,2),en=ea[0],el=ea[1],er=n.useContext(d),eo=null!==(a=null!==(l=null===(i="boolean"==typeof g?g?{}:{distance:0}:g||{})||void 0===i?void 0:i.distance)&&void 0!==l?l:null==er?void 0:er.pushDistance)&&void 0!==a?a:180,es=n.useMemo(function(){return{pushDistance:eo,push:function(){el(!0)},pull:function(){el(!1)}}},[eo]);n.useEffect(function(){var e,t;u?null==er||null===(e=er.push)||void 0===e||e.call(er):null==er||null===(t=er.pull)||void 0===t||t.call(er)},[u]),n.useEffect(function(){return function(){var e;null==er||null===(e=er.pull)||void 0===e||e.call(er)}},[]);var ei=T&&n.createElement(f.ZP,(0,p.Z)({key:"mask"},L,{visible:u}),function(e,t){var a=e.className,l=e.style;return n.createElement("div",{className:r()("".concat(c,"-mask"),a,null==N?void 0:N.mask,V),style:(0,o.Z)((0,o.Z)((0,o.Z)({},l),z),null==G?void 0:G.mask),onClick:F&&u?H:void 0,ref:t})}),ec="function"==typeof P?P(b):P,ed={};if(en&&eo)switch(b){case"top":ed.transform="translateY(".concat(eo,"px)");break;case"bottom":ed.transform="translateY(".concat(-eo,"px)");break;case"left":ed.transform="translateX(".concat(eo,"px)");break;default:ed.transform="translateX(".concat(-eo,"px)")}"left"===b||"right"===b?ed.width=j(I):ed.height=j(M);var eu={onMouseEnter:K,onMouseOver:A,onMouseLeave:W,onClick:U,onKeyDown:X,onKeyUp:q},em=n.createElement(f.ZP,(0,p.Z)({key:"panel"},ec,{visible:u,forceRender:w,onVisibleChanged:function(e){null==B||B(e)},removeOnLeave:!1,leavedClassName:"".concat(c,"-content-wrapper-hidden")}),function(t,a){var l=t.className,s=t.style,i=n.createElement(y,(0,p.Z)({id:$,containerRef:a,prefixCls:c,className:r()(O,null==N?void 0:N.content),style:(0,o.Z)((0,o.Z)({},D),null==G?void 0:G.content)},(0,h.Z)(e,{aria:!0}),eu),R);return n.createElement("div",(0,p.Z)({className:r()("".concat(c,"-content-wrapper"),null==N?void 0:N.wrapper,l),style:(0,o.Z)((0,o.Z)((0,o.Z)({},ed),s),null==G?void 0:G.wrapper)},(0,h.Z)(e,{data:!0})),Y?Y(i):i)}),ep=(0,o.Z)({},E);return S&&(ep.zIndex=S),n.createElement(d.Provider,{value:es},n.createElement("div",{className:r()(c,"".concat(c,"-").concat(b),_,(0,m.Z)((0,m.Z)({},"".concat(c,"-open"),u),"".concat(c,"-inline"),x)),style:ep,tabIndex:-1,ref:J,onKeyDown:function(e){var t,a,n=e.keyCode,l=e.shiftKey;switch(n){case v.Z.TAB:n===v.Z.TAB&&(l||document.activeElement!==ee.current?l&&document.activeElement===Q.current&&(null===(a=ee.current)||void 0===a||a.focus({preventScroll:!0})):null===(t=Q.current)||void 0===t||t.focus({preventScroll:!0}));break;case v.Z.ESC:H&&C&&(e.stopPropagation(),H(e))}}},ei,n.createElement("div",{tabIndex:0,ref:Q,style:k,"aria-hidden":"true","data-sentinel":"start"}),em,n.createElement("div",{tabIndex:0,ref:ee,style:k,"aria-hidden":"true","data-sentinel":"end"})))}),C=function(e){var t=e.open,a=e.prefixCls,l=e.placement,r=e.autoFocus,d=e.keyboard,m=e.width,p=e.mask,f=void 0===p||p,v=e.maskClosable,h=e.getContainer,b=e.forceRender,x=e.afterOpenChange,g=e.destroyOnClose,y=e.onMouseEnter,w=e.onMouseOver,j=e.onMouseLeave,k=e.onClick,C=e.onKeyDown,N=e.onKeyUp,_=e.panelRef,E=n.useState(!1),S=(0,s.Z)(E,2),O=S[0],$=S[1],D=n.useState(!1),P=(0,s.Z)(D,2),I=P[0],M=P[1];(0,c.Z)(function(){M(!0)},[]);var R=!!I&&void 0!==t&&t,T=n.useRef(),F=n.useRef();(0,c.Z)(function(){R&&(F.current=document.activeElement)},[R]);var L=n.useMemo(function(){return{panel:_}},[_]);if(!b&&!O&&!R&&g)return null;var V=(0,o.Z)((0,o.Z)({},e),{},{open:R,prefixCls:void 0===a?"rc-drawer":a,placement:void 0===l?"right":l,autoFocus:void 0===r||r,keyboard:void 0===d||d,width:void 0===m?378:m,mask:f,maskClosable:void 0===v||v,inline:!1===h,afterOpenChange:function(e){var t,a;$(e),null==x||x(e),e||!F.current||null!==(t=T.current)&&void 0!==t&&t.contains(F.current)||null===(a=F.current)||void 0===a||a.focus({preventScroll:!0})},ref:T},{onMouseEnter:y,onMouseOver:w,onMouseLeave:j,onClick:k,onKeyDown:C,onKeyUp:N});return n.createElement(u.Provider,{value:L},n.createElement(i.Z,{open:R||b||O,autoDestroy:!1,getContainer:h,autoLock:f&&(R||O)},n.createElement(Z,V)))},N=a(89942),_=a(87263),E=a(33603),S=a(43945),O=a(53124),$=a(16569),D=a(69760),P=a(48054),I=e=>{var t,a;let{prefixCls:l,title:o,footer:s,extra:i,loading:c,onClose:d,headerStyle:u,bodyStyle:m,footerStyle:p,children:f,classNames:v,styles:h}=e,{drawer:b}=n.useContext(O.E_),x=n.useCallback(e=>n.createElement("button",{type:"button",onClick:d,"aria-label":"Close",className:`${l}-close`},e),[d]),[g,y]=(0,D.Z)((0,D.w)(e),(0,D.w)(b),{closable:!0,closeIconRender:x}),w=n.useMemo(()=>{var e,t;return o||g?n.createElement("div",{style:Object.assign(Object.assign(Object.assign({},null===(e=null==b?void 0:b.styles)||void 0===e?void 0:e.header),u),null==h?void 0:h.header),className:r()(`${l}-header`,{[`${l}-header-close-only`]:g&&!o&&!i},null===(t=null==b?void 0:b.classNames)||void 0===t?void 0:t.header,null==v?void 0:v.header)},n.createElement("div",{className:`${l}-header-title`},y,o&&n.createElement("div",{className:`${l}-title`},o)),i&&n.createElement("div",{className:`${l}-extra`},i)):null},[g,y,i,u,l,o]),j=n.useMemo(()=>{var e,t;if(!s)return null;let a=`${l}-footer`;return n.createElement("div",{className:r()(a,null===(e=null==b?void 0:b.classNames)||void 0===e?void 0:e.footer,null==v?void 0:v.footer),style:Object.assign(Object.assign(Object.assign({},null===(t=null==b?void 0:b.styles)||void 0===t?void 0:t.footer),p),null==h?void 0:h.footer)},s)},[s,p,l]);return n.createElement(n.Fragment,null,w,n.createElement("div",{className:r()(`${l}-body`,null==v?void 0:v.body,null===(t=null==b?void 0:b.classNames)||void 0===t?void 0:t.body),style:Object.assign(Object.assign(Object.assign({},null===(a=null==b?void 0:b.styles)||void 0===a?void 0:a.body),m),null==h?void 0:h.body)},c?n.createElement(P.Z,{active:!0,title:!1,paragraph:{rows:5},className:`${l}-body-skeleton`}):f),j)},M=a(25446),R=a(14747),T=a(83559),F=a(83262);let L=e=>{let t="100%";return({left:`translateX(-${t})`,right:`translateX(${t})`,top:`translateY(-${t})`,bottom:`translateY(${t})`})[e]},V=(e,t)=>({"&-enter, &-appear":Object.assign(Object.assign({},e),{"&-active":t}),"&-leave":Object.assign(Object.assign({},t),{"&-active":e})}),z=(e,t)=>Object.assign({"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:`all ${t}`}}},V({opacity:e},{opacity:1})),B=(e,t)=>[z(.7,t),V({transform:L(e)},{transform:"none"})];var H=e=>{let{componentCls:t,motionDurationSlow:a}=e;return{[t]:{[`${t}-mask-motion`]:z(0,a),[`${t}-panel-motion`]:["left","right","top","bottom"].reduce((e,t)=>Object.assign(Object.assign({},e),{[`&-${t}`]:B(t,a)}),{})}}};let K=e=>{let{borderRadiusSM:t,componentCls:a,zIndexPopup:n,colorBgMask:l,colorBgElevated:r,motionDurationSlow:o,motionDurationMid:s,paddingXS:i,padding:c,paddingLG:d,fontSizeLG:u,lineHeightLG:m,lineWidth:p,lineType:f,colorSplit:v,marginXS:h,colorIcon:b,colorIconHover:x,colorBgTextHover:g,colorBgTextActive:y,colorText:w,fontWeightStrong:j,footerPaddingBlock:k,footerPaddingInline:Z,calc:C}=e,N=`${a}-content-wrapper`;return{[a]:{position:"fixed",inset:0,zIndex:n,pointerEvents:"none",color:w,"&-pure":{position:"relative",background:r,display:"flex",flexDirection:"column",[`&${a}-left`]:{boxShadow:e.boxShadowDrawerLeft},[`&${a}-right`]:{boxShadow:e.boxShadowDrawerRight},[`&${a}-top`]:{boxShadow:e.boxShadowDrawerUp},[`&${a}-bottom`]:{boxShadow:e.boxShadowDrawerDown}},"&-inline":{position:"absolute"},[`${a}-mask`]:{position:"absolute",inset:0,zIndex:n,background:l,pointerEvents:"auto"},[N]:{position:"absolute",zIndex:n,maxWidth:"100vw",transition:`all ${o}`,"&-hidden":{display:"none"}},[`&-left > ${N}`]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowDrawerLeft},[`&-right > ${N}`]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:e.boxShadowDrawerRight},[`&-top > ${N}`]:{top:0,insetInline:0,boxShadow:e.boxShadowDrawerUp},[`&-bottom > ${N}`]:{bottom:0,insetInline:0,boxShadow:e.boxShadowDrawerDown},[`${a}-content`]:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"auto",background:r,pointerEvents:"auto"},[`${a}-header`]:{display:"flex",flex:0,alignItems:"center",padding:`${(0,M.bf)(c)} ${(0,M.bf)(d)}`,fontSize:u,lineHeight:m,borderBottom:`${(0,M.bf)(p)} ${f} ${v}`,"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},[`${a}-extra`]:{flex:"none"},[`${a}-close`]:Object.assign({display:"inline-flex",width:C(u).add(i).equal(),height:C(u).add(i).equal(),borderRadius:t,justifyContent:"center",alignItems:"center",marginInlineEnd:h,color:b,fontWeight:j,fontSize:u,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,cursor:"pointer",transition:`all ${s}`,textRendering:"auto","&:hover":{color:x,backgroundColor:g,textDecoration:"none"},"&:active":{backgroundColor:y}},(0,R.Qy)(e)),[`${a}-title`]:{flex:1,margin:0,fontWeight:e.fontWeightStrong,fontSize:u,lineHeight:m},[`${a}-body`]:{flex:1,minWidth:0,minHeight:0,padding:d,overflow:"auto",[`${a}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center"}},[`${a}-footer`]:{flexShrink:0,padding:`${(0,M.bf)(k)} ${(0,M.bf)(Z)}`,borderTop:`${(0,M.bf)(p)} ${f} ${v}`},"&-rtl":{direction:"rtl"}}}};var A=(0,T.I$)("Drawer",e=>{let t=(0,F.IX)(e,{});return[K(t),H(t)]},e=>({zIndexPopup:e.zIndexPopupBase,footerPaddingBlock:e.paddingXS,footerPaddingInline:e.padding})),W=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)0>t.indexOf(n[l])&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]]);return a};let U={distance:180},X=e=>{let{rootClassName:t,width:a,height:l,size:o="default",mask:s=!0,push:i=U,open:c,afterOpenChange:d,onClose:u,prefixCls:m,getContainer:p,style:f,className:v,visible:h,afterVisibleChange:b,maskStyle:x,drawerStyle:g,contentWrapperStyle:y}=e,w=W(e,["rootClassName","width","height","size","mask","push","open","afterOpenChange","onClose","prefixCls","getContainer","style","className","visible","afterVisibleChange","maskStyle","drawerStyle","contentWrapperStyle"]),{getPopupContainer:j,getPrefixCls:k,direction:Z,drawer:D}=n.useContext(O.E_),P=k("drawer",m),[M,R,T]=A(P),F=r()({"no-mask":!s,[`${P}-rtl`]:"rtl"===Z},t,R,T),L=n.useMemo(()=>null!=a?a:"large"===o?736:378,[a,o]),V=n.useMemo(()=>null!=l?l:"large"===o?736:378,[l,o]),z={motionName:(0,E.m)(P,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500},B=(0,$.H)(),[H,K]=(0,_.Cn)("Drawer",w.zIndex),{classNames:X={},styles:q={}}=w,{classNames:G={},styles:Y={}}=D||{};return M(n.createElement(N.Z,{form:!0,space:!0},n.createElement(S.Z.Provider,{value:K},n.createElement(C,Object.assign({prefixCls:P,onClose:u,maskMotion:z,motion:e=>({motionName:(0,E.m)(P,`panel-motion-${e}`),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500})},w,{classNames:{mask:r()(X.mask,G.mask),content:r()(X.content,G.content),wrapper:r()(X.wrapper,G.wrapper)},styles:{mask:Object.assign(Object.assign(Object.assign({},q.mask),x),Y.mask),content:Object.assign(Object.assign(Object.assign({},q.content),g),Y.content),wrapper:Object.assign(Object.assign(Object.assign({},q.wrapper),y),Y.wrapper)},open:null!=c?c:h,mask:s,push:i,width:L,height:V,style:Object.assign(Object.assign({},null==D?void 0:D.style),f),className:r()(null==D?void 0:D.className,v),rootClassName:F,getContainer:void 0===p&&j?()=>j(document.body):p,afterOpenChange:null!=d?d:b,panelRef:B,zIndex:H}),n.createElement(I,Object.assign({prefixCls:P},w,{onClose:u}))))))};X._InternalPanelDoNotUseOrYouWillBeFired=e=>{let{prefixCls:t,style:a,className:l,placement:o="right"}=e,s=W(e,["prefixCls","style","className","placement"]),{getPrefixCls:i}=n.useContext(O.E_),c=i("drawer",t),[d,u,m]=A(c),p=r()(c,`${c}-pure`,`${c}-${o}`,u,m,l);return d(n.createElement("div",{className:p,style:a},n.createElement(I,Object.assign({prefixCls:c},s))))};var q=X},25606:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construct/database",function(){return a(22314)}])},98198:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var n=a(85893),l=a(34041),r=a(25278),o=a(13457),s=a(84567),i=a(99859),c=a(67294),d=e=>{let{parentName:t,fields:a,form:d}=e,[u,m]=(0,c.useState)(null);(0,c.useEffect)(()=>{let e=d.getFieldValue(t);(null==e?void 0:e.type)&&!u&&m(e.type)},[d,t]);let p=e=>{let a;let c=e.param_type.toLowerCase(),d=[t,e.param_name];return a="str"===c||"string"===c?e.valid_values?(0,n.jsx)(l.default,{children:e.valid_values.map(e=>(0,n.jsx)(l.default.Option,{value:e,children:e},e))}):(0,n.jsx)(r.default,{}):"int"===c||"integer"===c||"number"===c||"float"===c?(0,n.jsx)(o.Z,{className:"w-full"}):"bool"===c||"boolean"===c?(0,n.jsx)(s.Z,{}):(0,n.jsx)(r.default,{}),(0,n.jsx)(i.default.Item,{label:e.label||e.param_name,name:d,valuePropName:"bool"===c||"boolean"===c?"checked":"value",tooltip:e.description,rules:u&&e.required?[{required:!0,message:"Please input ".concat(e.param_name)}]:[],children:a},e.param_name)};return(0,n.jsxs)("div",{className:"space-y-4 border rounded-md p-4",children:[(0,n.jsx)(i.default.Item,{label:"Type",name:[t,"type"],children:(0,n.jsx)(l.default,{onChange:e=>{m(e);let n=a[e]||[],l={type:e};n.forEach(e=>{l[e.param_name]=e.default_value}),d.setFieldsValue({[t]:l})},placeholder:"Select a type",children:Object.keys(a).map(e=>(0,n.jsx)(l.default.Option,{value:e,children:e},e))})}),u&&a[u]&&(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsxs)("h4",{className:"mb-4 text-base font-medium",children:[u," Configuration"]}),(0,n.jsx)("div",{className:"space-y-4",children:a[u].map(e=>p(e))})]})]})},u=function(e){let{params:t,form:a}=e;if((0,c.useEffect)(()=>{if(t){let e={};t.forEach(t=>{if(!t.nested_fields){let n=a.getFieldValue(t.param_name);void 0===n&&(e[t.param_name]=t.default_value)}}),a.setFieldsValue(e)}},[t,a]),!t||(null==t?void 0:t.length)<1)return null;let u=e=>{let a={...e};return null==t||t.forEach(e=>{if(e.nested_fields&&a[e.param_name]){let t=a[e.param_name];if(t.type){let n=e.nested_fields[t.type]||[],l={};n.forEach(e=>{void 0!==t[e.param_name]&&(l[e.param_name]=t[e.param_name])}),a[e.param_name]={type:t.type,...l}}}}),a},m=a.submit;return a.submit=()=>{let e=a.getFieldsValue(),t=u(e);a.setFieldsValue(t),m.call(a)},(0,n.jsx)("div",{className:"space-y-4",children:null==t?void 0:t.map(e=>(0,n.jsx)(i.default.Item,{label:(0,n.jsx)("p",{className:"whitespace-normal overflow-wrap-break-word",children:e.label||e.param_name}),name:e.param_name,initialValue:e.default_value,valuePropName:"bool"===e.param_type.toLowerCase()||"boolean"===e.param_type.toLowerCase()?"checked":"value",tooltip:e.description,rules:e.required?[{required:!0,message:"Please input ".concat(e.param_name)}]:[],children:function(e){var t,i,c,u;if(e.nested_fields)return(0,n.jsx)(d,{parentName:e.param_name,fields:e.nested_fields,form:a});let m=e.param_type.toLowerCase(),p=null===(t=e.ext_metadata)||void 0===t?void 0:null===(i=t.tags)||void 0===i?void 0:i.includes("fixed"),f=null===(c=e.ext_metadata)||void 0===c?void 0:null===(u=c.tags)||void 0===u?void 0:u.includes("privacy");return"str"===m||"string"===m?e.valid_values?(0,n.jsx)(l.default,{disabled:p,children:e.valid_values.map(e=>(0,n.jsx)(l.default.Option,{value:e,children:e},e))}):f?(0,n.jsx)(r.default.Password,{disabled:p,autoComplete:"new-password",placeholder:"请输入密码"}):(0,n.jsx)(r.default,{disabled:p}):"int"===m||"integer"===m||"number"===m||"float"===m?(0,n.jsx)(o.Z,{className:"w-full",disabled:p}):"bool"===m||"boolean"===m?(0,n.jsx)(s.Z,{disabled:p}):(0,n.jsx)(r.default,{disabled:p})}(e)},e.param_name))})}},45247:function(e,t,a){"use strict";var n=a(85893),l=a(50888);t.Z=function(e){let{visible:t}=e;return t?(0,n.jsx)("div",{className:"absolute w-full h-full top-0 left-0 flex justify-center items-center z-10 bg-white dark:bg-black bg-opacity-50 dark:bg-opacity-50 backdrop-blur-sm text-3xl animate-fade animate-duration-200",children:(0,n.jsx)(l.Z,{})}):null}},1771:function(e,t,a){"use strict";var n=a(85893),l=a(82353),r=a(41156),o=a(9641),s=a(16165),i=a(9020),c=a(92962),d=a(38545),u=a(50067),m=a(28459),p=a(92398),f=a(36609),v=a(11163);a(67294),a(53878),t.Z=function(e){let{children:t}=e,a=[{key:"app",name:(0,f.t)("App"),path:"/app",icon:(0,n.jsx)(r.Z,{})},{key:"flow",name:(0,f.t)("awel_flow"),icon:(0,n.jsx)(o.Z,{}),path:"/flow"},{key:"models",name:(0,f.t)("model_manage"),path:"/models",icon:(0,n.jsx)(s.Z,{component:l.IN})},{key:"database",name:(0,f.t)("Database"),icon:(0,n.jsx)(i.Z,{}),path:"/database"},{key:"knowledge",name:(0,f.t)("Knowledge_Space"),icon:(0,n.jsx)(c.Z,{}),path:"/knowledge"},{key:"prompt",name:(0,f.t)("Prompt"),icon:(0,n.jsx)(d.Z,{}),path:"/prompt"},{key:"dbgpts",name:(0,f.t)("dbgpts_community"),path:"/dbgpts",icon:(0,n.jsx)(u.Z,{})}],h=(0,v.useRouter)(),b=h.pathname.split("/")[2];return(0,n.jsx)("div",{className:"flex flex-col h-full w-full  dark:bg-gradient-dark bg-gradient-light bg-cover bg-center",children:(0,n.jsx)(m.ZP,{theme:{components:{Button:{},Segmented:{itemSelectedBg:"#2867f5",itemSelectedColor:"white"}}},children:(0,n.jsx)(p.Z,{activeKey:b,items:a.map(e=>({key:e.key,label:e.name,children:t,icon:e.icon})),onTabClick:e=>{h.push("/construct/".concat(e))}})})})}},22314:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z},isFileDb:function(){return L}});var n=a(85893),l=a(76212),r=a(66309),o=a(55241),s=a(83062),i=a(93967),c=a.n(i),d=a(25675),u=a.n(d),m=a(67294),p=(0,m.memo)(function(e){let{icon:t,iconBorder:a=!0,title:l,desc:i,tags:d,children:p,disabled:f,operations:v,className:h,extraContent:b,...x}=e,g=(0,m.useMemo)(()=>t?"string"==typeof t?(0,n.jsx)(u(),{className:c()("w-11 h-11 rounded-full mr-4 object-contain bg-white",{"border border-gray-200":a}),width:48,height:48,src:t,alt:l}):t:null,[t]),y=(0,m.useMemo)(()=>d&&d.length?(0,n.jsx)("div",{className:"flex items-center mt-1 flex-wrap",children:d.map((e,t)=>{var a;return"string"==typeof e?(0,n.jsx)(r.Z,{className:"text-xs",bordered:!1,color:"default",children:e},t):(0,n.jsx)(r.Z,{className:"text-xs",bordered:null!==(a=e.border)&&void 0!==a&&a,color:e.color,children:e.text},t)})}):null,[d]);return(0,n.jsxs)("div",{className:c()("group/card relative flex flex-col w-72 rounded justify-between text-black bg-white shadow-[0_8px_16px_-10px_rgba(100,100,100,.08)] hover:shadow-[0_14px_20px_-10px_rgba(100,100,100,.15)] dark:bg-[#232734] dark:text-white dark:hover:border-white transition-[transfrom_shadow] duration-300 hover:-translate-y-1 min-h-fit",{"grayscale cursor-no-drop":f,"cursor-pointer":!f&&!!x.onClick},h),...x,children:[(0,n.jsxs)("div",{className:"p-4 0",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[g,(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(o.Z,{title:l,children:(0,n.jsx)("h2",{className:"text-sm font-semibold line-clamp-1 pr-8",children:l})}),y]})]}),i&&(0,n.jsx)(s.Z,{title:i,children:(0,n.jsx)("p",{className:"mt-2 text-sm text-gray-500 font-normal line-clamp-2",children:i})})]}),(0,n.jsxs)("div",{children:[p,v&&!!v.length&&(0,n.jsx)("div",{className:"flex flex-wrap items-center justify-center border-t border-solid border-gray-100 dark:border-theme-dark",children:v.map((e,t)=>(0,n.jsx)(s.Z,{title:e.label,children:(0,n.jsxs)("div",{className:"relative flex flex-1 items-center justify-center h-11 text-gray-400 hover:text-blue-500 transition-colors duration-300 cursor-pointer",onClick:t=>{var a;t.stopPropagation(),null===(a=e.onClick)||void 0===a||a.call(e)},children:[e.children,t<v.length-1&&(0,n.jsx)("div",{className:"w-[1px] h-6 absolute top-2 right-0 bg-gray-100 rounded dark:bg-theme-dark"})]})},"operation-".concat(t)))})]}),(0,n.jsx)("div",{className:"absolute top-2 right-4 ",children:b})]})}),f=a(45247),v=a(85576),h=a(67421),b=a(34041),x=a(99859),g=a(45360),y=a(25278),w=a(14726),j=a(98198);let{Option:k}=b.default,Z=x.default.Item;var C=function(e){let{onCancel:t,onSuccess:a,dbTypeList:r,editValue:o,choiceDBType:s,getFromRenderData:i,dbNames:c=[],description:d=""}=e,{t:u}=(0,h.$G)(),[p]=x.default.useForm(),[f,v]=(0,m.useState)(!1),[C,N]=(0,m.useState)(s),[_,E]=(0,m.useState)(i||null);console.log("dbTypeList",r),console.log("editValue",o),console.log("choiceDBType",s),(0,m.useEffect)(()=>{s&&N(s)},[s]),(0,m.useEffect)(()=>{o&&i&&(E(i),p.setFieldValue("description",d))},[o,i,d,p]);let S=async e=>{try{v(!0),console.log("dbNames:",c);let{description:t,type:n,...r}=e,s={type:C,params:r,description:t||""};o&&(s.id=o),console.log("Form submitted:",s);let[i]=await (0,l.Vx)((0,l.KS)(s));if(i)return;let[d]=await (0,l.Vx)((o?l.mR:l.b_)(s));if(d){g.ZP.error(d.message);return}g.ZP.success(u(o?"update_success":"create_success")),null==a||a()}catch(e){console.error("Failed to submit form:",e),g.ZP.error(u(o?"update_failed":"create_failed"))}finally{v(!1)}};return(0,n.jsxs)(x.default,{form:p,layout:"vertical",onFinish:S,initialValues:{type:C},children:[(0,n.jsx)(Z,{label:u("database_type"),name:"type",rules:[{required:!0,message:u("please_select_database_type")}],children:(0,n.jsx)(b.default,{placeholder:u("select_database_type"),onChange:e=>{N(e),p.resetFields(["params"]);let t=r.find(t=>t.value===e);(null==t?void 0:t.parameters)&&E(t.parameters)},disabled:!!o,children:r.map(e=>(0,n.jsx)(k,{value:e.value,disabled:e.disabled,children:e.label},e.value))})}),_&&(0,n.jsx)(j.Z,{params:_,form:p}),(0,n.jsx)(Z,{label:u("description"),name:"description",children:(0,n.jsx)(y.default.TextArea,{rows:2,placeholder:u("input_description")})}),(0,n.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,n.jsx)(w.ZP,{onClick:t,children:u("cancel")}),(0,n.jsx)(w.ZP,{type:"primary",htmlType:"submit",loading:f,children:u("submit")})]})]})},N=function(e){let{open:t,onClose:a,onSuccess:l,dbTypeList:r,editValue:o,choiceDBType:s,getFromRenderData:i,dbNames:c,description:d}=e,{t:u}=(0,h.$G)();return(0,n.jsx)(v.default,{title:u(o?"edit_database":"add_database"),open:t,onCancel:a,footer:null,width:800,destroyOnClose:!0,children:(0,n.jsx)(C,{onCancel:a,onSuccess:l,dbTypeList:r,editValue:o,choiceDBType:s,getFromRenderData:i,dbNames:c,description:d})})},_=a(1771),E=a(62418),S=a(24969),O=a(87740),$=a(36531),D=a(27704),P=a(2093),I=a(40411),M=a(85265),R=a(74330),T=a(4393),F=a(32983);function L(e,t){var a;return null===(a=e.find(e=>e.value===t))||void 0===a?void 0:a.isFileDb}let V=[];var z=function(){let{t:e}=(0,h.$G)(),[t,a]=(0,m.useState)([]),[r,o]=(0,m.useState)([]),[s,i]=(0,m.useState)(!1),[c,d]=(0,m.useState)({open:!1}),[u,b]=(0,m.useState)({open:!1}),[x,y]=(0,m.useState)(!1),j=async()=>{var e;let[,t]=await (0,l.Vx)((0,l.t$)());o(null!==(e=null==t?void 0:t.types)&&void 0!==e?e:[])},k=async()=>{i(!0);let[,e]=await (0,l.Vx)((0,l.Bw)());a(null!=e?e:[]),i(!1)},Z=(0,m.useMemo)(()=>{let e=r.map(e=>{let t=null==e?void 0:e.name;return{...E.S$[t],value:t,isFileDb:!0,parameters:e.parameters}}),t=Object.keys(E.S$).filter(t=>!e.some(e=>e.value===t)).map(e=>({...E.S$[e],value:E.S$[e].label,disabled:!0}));return[...e,...t]},[r]),C=e=>{for(let t=0;t<V.length;t++){let a=V[t];e.params[a.param_name]&&(a.default_value=e.params[a.param_name])}d({open:!0,info:e.id,dbType:e.type,description:e.description})},L=e=>{v.default.confirm({title:"Tips",content:"Do you Want to delete the database connection?",onOk:()=>new Promise((t,a)=>{z(e.id,t,a)})})},z=async(e,t,a)=>{try{let[n]=await (0,l.Vx)((0,l.J5)(e));if(n){g.ZP.error(n.message),a();return}g.ZP.success("success"),k(),t()}catch(e){a()}},B=(0,m.useMemo)(()=>{let e=Z.reduce((e,a)=>(e[a.value]=t.filter(e=>(null==e?void 0:e.type.toLowerCase())===a.value.toLowerCase()),e),{});return e},[t,Z]);(0,P.Z)(async()=>{await k(),await j()},[]);let H=e=>{let a=t.filter(t=>t.type===e.value);V=null==e?void 0:e.parameters,b({open:!0,dbList:a,name:e.label,type:e.value})},K=async t=>{y(!0);let[,a]=await (0,l.Vx)((0,l.yx)({id:t.id}));a&&g.ZP.success(e("refreshSuccess")),y(!1)},A=e=>{if(!e)return"";let t=e.split(/[/\\]/);return t[t.length-1]};return(0,n.jsx)(_.Z,{children:(0,n.jsxs)("div",{className:"relative min-h-full overflow-y-auto px-6 max-h-[90vh]",children:[(0,n.jsx)(f.Z,{visible:s}),(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("div",{className:"flex items-center gap-4"}),(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsx)(w.ZP,{className:"border-none text-white bg-button-gradient",icon:(0,n.jsx)(S.Z,{}),onClick:()=>{console.log(t),console.log(Z),d({open:!0,dbTypeData:Z})},children:e("Add_Datasource")})})]}),(0,n.jsx)("div",{className:"flex flex-wrap mx-[-8px] gap-2 md:gap-4",children:Z.map(e=>{var t,a;return(0,n.jsx)(I.Z,{count:null===(t=B[e.value])||void 0===t?void 0:t.length,className:"min-h-fit",children:(0,n.jsx)(p,{className:"h-full",title:e.label,desc:null!==(a=e.desc)&&void 0!==a?a:"",disabled:e.disabled,icon:e.icon,onClick:()=>{e.disabled||H(e)}})},e.value)})}),(0,n.jsx)(N,{open:c.open,dbTypeList:Z,getFromRenderData:V,description:c.description,choiceDBType:c.dbType,editValue:c.info,dbTypeData:c.dbTypeData,dbNames:t.map(e=>e.params.database),onSuccess:()=>{d({open:!1}),k()},onClose:()=>{d({open:!1})}}),(0,n.jsx)(M.Z,{title:u.name,placement:"right",onClose:()=>{b({open:!1})},open:u.open,children:u.type&&B[u.type]&&B[u.type].length?(0,n.jsxs)(R.Z,{spinning:x,children:[(0,n.jsx)(w.ZP,{type:"primary",className:"mb-4 flex items-center",icon:(0,n.jsx)(S.Z,{}),onClick:()=>{d({open:!0,dbType:u.type})},children:"Create"}),B[u.type].map(t=>{var a,l,r,o;return(0,n.jsxs)(T.Z,{title:(null===(a=t.params)||void 0===a?void 0:a.database)||A(null===(l=t.params)||void 0===l?void 0:l.path)||"",extra:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.Z,{className:"mr-2",style:{color:"gray"},onClick:()=>{K(t)}}),(0,n.jsx)($.Z,{className:"mr-2",style:{color:"#1b7eff"},onClick:()=>{C(t)}}),(0,n.jsx)(D.Z,{style:{color:"#ff1b2e"},onClick:()=>{L(t)}})]}),className:"mb-4",children:[(0,n.jsx)(n.Fragment,{children:["host","port","path","user","database","schema"].filter(e=>Object.prototype.hasOwnProperty.call(t.params,e)).map(e=>(0,n.jsxs)("p",{children:[e,": ","path"===e?A(t.params[e]):t.params[e]]},e))}),(0,n.jsxs)("p",{children:[e("description"),": ",t.description]})]},(null===(r=t.params)||void 0===r?void 0:r.database)||(null===(o=t.params)||void 0===o?void 0:o.path)||"")})]}):(0,n.jsx)(F.Z,{image:F.Z.PRESENTED_IMAGE_DEFAULT,children:(0,n.jsx)(w.ZP,{type:"primary",className:"flex items-center mx-auto",icon:(0,n.jsx)(S.Z,{}),onClick:()=>{d({open:!0,dbType:u.type})},children:"Create Now"})})})]})})}},53878:function(){}},function(e){e.O(0,[2913,3791,5278,8791,4330,4041,2398,4567,9859,3457,7896,4393,9774,2888,179],function(){return e(e.s=25606)}),_N_E=e.O()}]);