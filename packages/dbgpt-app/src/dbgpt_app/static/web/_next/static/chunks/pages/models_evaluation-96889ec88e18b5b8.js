(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8072],{33160:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});var r=l(87462),a=l(67294),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},o=l(13401),s=a.forwardRef(function(e,t){return a.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:n}))})},38780:function(e,t){"use strict";t.Z=function(){let e=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let t=1;t<arguments.length;t++){let l=t<0||arguments.length<=t?void 0:arguments[t];l&&Object.keys(l).forEach(t=>{let r=l[t];void 0!==r&&(e[t]=r)})}return e}},45360:function(e,t,l){"use strict";var r=l(74902),a=l(67294),n=l(38135),o=l(66968),s=l(53124),i=l(28459),c=l(66277),u=l(16474),d=l(84926);let p=null,m=e=>e(),_=[],f={};function h(){let{getContainer:e,duration:t,rtl:l,maxCount:r,top:a}=f,n=(null==e?void 0:e())||document.body;return{getContainer:()=>n,duration:t,rtl:l,maxCount:r,top:a}}let g=a.forwardRef((e,t)=>{let{messageConfig:l,sync:r}=e,{getPrefixCls:n}=(0,a.useContext)(s.E_),i=f.prefixCls||n("message"),c=(0,a.useContext)(o.J),[d,p]=(0,u.K)(Object.assign(Object.assign(Object.assign({},l),{prefixCls:i}),c.message));return a.useImperativeHandle(t,()=>{let e=Object.assign({},d);return Object.keys(e).forEach(t=>{e[t]=function(){return r(),d[t].apply(d,arguments)}}),{instance:e,sync:r}}),p}),v=a.forwardRef((e,t)=>{let[l,r]=a.useState(h),n=()=>{r(h)};a.useEffect(n,[]);let o=(0,i.w6)(),s=o.getRootPrefixCls(),c=o.getIconPrefixCls(),u=o.getTheme(),d=a.createElement(g,{ref:t,sync:n,messageConfig:l});return a.createElement(i.ZP,{prefixCls:s,iconPrefixCls:c,theme:u},o.holderRender?o.holderRender(d):d)});function b(){if(!p){let e=document.createDocumentFragment(),t={fragment:e};p=t,m(()=>{(0,n.s)(a.createElement(v,{ref:e=>{let{instance:l,sync:r}=e||{};Promise.resolve().then(()=>{!t.instance&&l&&(t.instance=l,t.sync=r,b())})}}),e)});return}p.instance&&(_.forEach(e=>{let{type:t,skipped:l}=e;if(!l)switch(t){case"open":m(()=>{let t=p.instance.open(Object.assign(Object.assign({},f),e.config));null==t||t.then(e.resolve),e.setCloseFn(t)});break;case"destroy":m(()=>{null==p||p.instance.destroy(e.key)});break;default:m(()=>{var l;let a=(l=p.instance)[t].apply(l,(0,r.Z)(e.args));null==a||a.then(e.resolve),e.setCloseFn(a)})}}),_=[])}let x={open:function(e){let t=(0,d.J)(t=>{let l;let r={type:"open",config:e,resolve:t,setCloseFn:e=>{l=e}};return _.push(r),()=>{l?m(()=>{l()}):r.skipped=!0}});return b(),t},destroy:e=>{_.push({type:"destroy",key:e}),b()},config:function(e){f=Object.assign(Object.assign({},f),e),m(()=>{var e;null===(e=null==p?void 0:p.sync)||void 0===e||e.call(p)})},useMessage:u.Z,_InternalPanelDoNotUseOrYouWillBeFired:c.ZP};["success","info","warning","error","loading"].forEach(e=>{x[e]=function(){for(var t=arguments.length,l=Array(t),r=0;r<t;r++)l[r]=arguments[r];return function(e,t){(0,i.w6)();let l=(0,d.J)(l=>{let r;let a={type:e,args:t,resolve:l,setCloseFn:e=>{r=e}};return _.push(a),()=>{r?m(()=>{r()}):a.skipped=!0}});return b(),l}(e,l)}}),t.ZP=x},85576:function(e,t,l){"use strict";l.d(t,{default:function(){return y}});var r=l(56080),a=l(38657),n=l(56745),o=l(67294),s=l(93967),i=l.n(s),c=l(40974),u=l(8745),d=l(53124),p=l(35792),m=l(32409),_=l(4941),f=l(71194),h=function(e,t){var l={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(l[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(l[r[a]]=e[r[a]]);return l},g=(0,u.i)(e=>{let{prefixCls:t,className:l,closeIcon:r,closable:a,type:n,title:s,children:u,footer:g}=e,v=h(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:b}=o.useContext(d.E_),x=b(),y=t||b("modal"),j=(0,p.Z)(x),[k,C,w]=(0,f.ZP)(y,j),O=`${y}-confirm`,P={};return P=n?{closable:null!=a&&a,title:"",footer:"",children:o.createElement(m.O,Object.assign({},e,{prefixCls:y,confirmPrefixCls:O,rootPrefixCls:x,content:u}))}:{closable:null==a||a,title:s,footer:null!==g&&o.createElement(_.$,Object.assign({},e)),children:u},k(o.createElement(c.s,Object.assign({prefixCls:y,className:i()(C,`${y}-pure-panel`,n&&O,n&&`${O}-${n}`,l,w,j)},v,{closeIcon:(0,_.b)(y,r),closable:a},P)))}),v=l(94423);function b(e){return(0,r.ZP)((0,r.uW)(e))}let x=n.Z;x.useModal=v.Z,x.info=function(e){return(0,r.ZP)((0,r.cw)(e))},x.success=function(e){return(0,r.ZP)((0,r.vq)(e))},x.error=function(e){return(0,r.ZP)((0,r.AQ)(e))},x.warning=b,x.warn=b,x.confirm=function(e){return(0,r.ZP)((0,r.Au)(e))},x.destroyAll=function(){for(;a.Z.length;){let e=a.Z.pop();e&&e()}},x.config=r.ai,x._InternalPanelDoNotUseOrYouWillBeFired=g;var y=x},66309:function(e,t,l){"use strict";l.d(t,{Z:function(){return E}});var r=l(67294),a=l(93967),n=l.n(a),o=l(98423),s=l(98787),i=l(69760),c=l(96159),u=l(45353),d=l(53124),p=l(25446),m=l(10274),_=l(14747),f=l(83262),h=l(83559);let g=e=>{let{paddingXXS:t,lineWidth:l,tagPaddingHorizontal:r,componentCls:a,calc:n}=e,o=n(r).sub(l).equal(),s=n(t).sub(l).equal();return{[a]:Object.assign(Object.assign({},(0,_.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:o,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,p.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:s,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:o}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},v=e=>{let{lineWidth:t,fontSizeIcon:l,calc:r}=e,a=e.fontSizeSM,n=(0,f.IX)(e,{tagFontSize:a,tagLineHeight:(0,p.bf)(r(e.lineHeightSM).mul(a).equal()),tagIconSize:r(l).sub(r(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg});return n},b=e=>({defaultBg:new m.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var x=(0,h.I$)("Tag",e=>{let t=v(e);return g(t)},b),y=function(e,t){var l={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(l[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(l[r[a]]=e[r[a]]);return l};let j=r.forwardRef((e,t)=>{let{prefixCls:l,style:a,className:o,checked:s,onChange:i,onClick:c}=e,u=y(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:m}=r.useContext(d.E_),_=p("tag",l),[f,h,g]=x(_),v=n()(_,`${_}-checkable`,{[`${_}-checkable-checked`]:s},null==m?void 0:m.className,o,h,g);return f(r.createElement("span",Object.assign({},u,{ref:t,style:Object.assign(Object.assign({},a),null==m?void 0:m.style),className:v,onClick:e=>{null==i||i(!s),null==c||c(e)}})))});var k=l(98719);let C=e=>(0,k.Z)(e,(t,l)=>{let{textColor:r,lightBorderColor:a,lightColor:n,darkColor:o}=l;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:r,background:n,borderColor:a,"&-inverse":{color:e.colorTextLightSolid,background:o,borderColor:o},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var w=(0,h.bk)(["Tag","preset"],e=>{let t=v(e);return C(t)},b);let O=(e,t,l)=>{let r=function(e){if("string"!=typeof e)return e;let t=e.charAt(0).toUpperCase()+e.slice(1);return t}(l);return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${l}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var P=(0,h.bk)(["Tag","status"],e=>{let t=v(e);return[O(t,"success","Success"),O(t,"processing","Info"),O(t,"error","Error"),O(t,"warning","Warning")]},b),S=function(e,t){var l={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(l[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(l[r[a]]=e[r[a]]);return l};let Z=r.forwardRef((e,t)=>{let{prefixCls:l,className:a,rootClassName:p,style:m,children:_,icon:f,color:h,onClose:g,bordered:v=!0,visible:b}=e,y=S(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:j,direction:k,tag:C}=r.useContext(d.E_),[O,Z]=r.useState(!0),E=(0,o.Z)(y,["closeIcon","closable"]);r.useEffect(()=>{void 0!==b&&Z(b)},[b]);let N=(0,s.o2)(h),$=(0,s.yT)(h),I=N||$,T=Object.assign(Object.assign({backgroundColor:h&&!I?h:void 0},null==C?void 0:C.style),m),L=j("tag",l),[A,q,F]=x(L),H=n()(L,null==C?void 0:C.className,{[`${L}-${h}`]:I,[`${L}-has-color`]:h&&!I,[`${L}-hidden`]:!O,[`${L}-rtl`]:"rtl"===k,[`${L}-borderless`]:!v},a,p,q,F),M=e=>{e.stopPropagation(),null==g||g(e),e.defaultPrevented||Z(!1)},[,B]=(0,i.Z)((0,i.w)(e),(0,i.w)(C),{closable:!1,closeIconRender:e=>{let t=r.createElement("span",{className:`${L}-close-icon`,onClick:M},e);return(0,c.wm)(e,t,e=>({onClick:t=>{var l;null===(l=null==e?void 0:e.onClick)||void 0===l||l.call(e,t),M(t)},className:n()(null==e?void 0:e.className,`${L}-close-icon`)}))}}),R="function"==typeof y.onClick||_&&"a"===_.type,J=f||null,V=J?r.createElement(r.Fragment,null,J,_&&r.createElement("span",null,_)):_,z=r.createElement("span",Object.assign({},E,{ref:t,className:H,style:T}),V,B,N&&r.createElement(w,{key:"preset",prefixCls:L}),$&&r.createElement(P,{key:"status",prefixCls:L}));return A(R?r.createElement(u.Z,{component:"Tag"},z):z)});Z.CheckableTag=j;var E=Z},44944:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/models_evaluation",function(){return l(75657)}])},80072:function(e,t,l){"use strict";l.d(t,{$:function(){return s}});var r=l(85893),a=l(14726),n=l(11163),o=l(67294);let s=e=>{let{href:t,type:l="link",className:s="",openNewTab:i=!1,children:c}=e,u=(0,o.useCallback)(()=>{d.push(t)},[t]),d=(0,n.useRouter)();return i?(0,r.jsx)(a.ZP,{type:l,className:s,children:(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:c})}):(0,r.jsx)(a.ZP,{type:l,className:s,onClick:u,children:c})}},75657:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return B}});var r=l(85893),a=l(28459),n=l(67294),o=l(33160),s=l(92783),i=l(83062),c=l(14726),u=l(36609),d=l(25035),p=l(65654),m=l(25278),_=l(99859),f=l(45360),h=l(85576),g=l(78045),v=l(34041),b=l(30568),x=l(13457),y=l(67421),j=l(76212),k=l(62418);let C=(0,k.n5)(),w=e=>(0,j.HT)("/api/v1/evaluate/benchmark_task_list",e,{headers:{"user-id":C}}),O=e=>(0,j.a4)("/api/v1/evaluate/execute_benchmark_task",e,{headers:{"user-id":C}}),{TextArea:P}=m.default,S=e=>{let{open:t,onCancel:l,onOk:a}=e,[o]=_.default.useForm(),{t:s}=(0,y.$G)(),[c,u]=(0,n.useState)([]),[k,C]=(0,n.useState)("LLM"),[w,S]=(0,n.useState)("JSON_PATH"),{loading:Z}=(0,p.Z)(async()=>{let[e,t]=await (0,j.Vx)((0,j.Vw)());return t||[]},{onSuccess:e=>{let t=e.map(e=>({label:e,value:e}));u(t)},onError:e=>{f.ZP.error(s("get_model_list_failed")+": "+e.message)}}),{loading:E,run:N}=(0,p.Z)(async e=>{if("LLM"===e.evaluation_type){let t={scene_value:e.scene_value,model_list:e.model_list,temperature:e.temperature,max_tokens:e.max_tokens,benchmark_type:e.evaluation_type,evaluation_env:e.evaluation_env},[l,r]=await (0,j.Vx)(O(t));return r}if("AGENT"===e.evaluation_type){let t={},l={};try{e.headers&&(t=JSON.parse(e.headers))}catch(e){throw Error("Header信息格式不正确,请输入有效的JSON格式")}try{"JSON_PATH"===e.parse_strategy&&e.response_mapping&&(l=JSON.parse(e.response_mapping))}catch(e){throw Error("Response Mapping配置格式不正确,请输入有效的JSON格式")}let r={scene_value:e.scene_value,benchmark_type:e.evaluation_type,evaluation_env:e.evaluation_env,api_url:e.api_url,headers:t,parse_strategy:e.parse_strategy,response_mapping:l,http_method:e.http_method||"POST",timeout:e.timeout||300},[a,n]=await (0,j.Vx)(O(r));return n}},{manual:!0,onSuccess:()=>{f.ZP.success(s("create_evaluation_success")),o.resetFields(),C("LLM"),S("JSON_PATH"),null==a||a(),l()},onError:e=>{f.ZP.error(s("create_evaluation_failed")+": "+e.message)}}),$=async()=>{try{let e=await o.validateFields();await N(e)}catch(e){console.error("表单验证失败:",e)}};return(0,r.jsx)(h.default,{title:s("new_evaluation_task"),open:t,onOk:$,onCancel:()=>{o.resetFields(),C("LLM"),S("JSON_PATH"),l()},confirmLoading:E,width:600,children:(0,r.jsxs)(_.default,{form:o,layout:"vertical",requiredMark:!1,initialValues:{temperature:.6,evaluation_type:"LLM",parse_strategy:"JSON_PATH",http_method:"POST",timeout:300,evaluation_env:"DEV"},children:[(0,r.jsx)(_.default.Item,{label:s("task_name"),name:"scene_value",rules:[{required:!0,message:s("please_input_task_name")}],children:(0,r.jsx)(m.default,{placeholder:s("please_input_task_name")})}),(0,r.jsx)(_.default.Item,{label:s("evaluation_env"),name:"evaluation_env",rules:[{required:!0,message:s("please_select_evaluation_env")}],children:(0,r.jsxs)(g.ZP.Group,{children:[(0,r.jsxs)(g.ZP,{value:"DEV",children:[s("evaluation_env_dev")," ",(0,r.jsx)(i.Z,{title:s("evaluation_env_dev_tooltip"),children:(0,r.jsx)(d.Z,{style:{color:"#999",cursor:"help"}})})]}),(0,r.jsxs)(g.ZP,{value:"TEST",children:[s("evaluation_env_test")," ",(0,r.jsx)(i.Z,{title:s("evaluation_env_test_tooltip"),children:(0,r.jsx)(d.Z,{style:{color:"#999",cursor:"help"}})})]})]})}),(0,r.jsx)(_.default.Item,{label:s("evaluation_type"),name:"evaluation_type",rules:[{required:!0,message:s("please_select_evaluation_type")}],children:(0,r.jsxs)(g.ZP.Group,{value:k,onChange:e=>C(e.target.value),children:[(0,r.jsx)(g.ZP,{value:"LLM",children:s("evaluate_model")}),(0,r.jsx)(g.ZP,{value:"AGENT",children:s("evaluate_agent")})]})}),"LLM"===k&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.default.Item,{label:s("models_to_evaluate"),name:"model_list",rules:[{required:!0,message:s("please_select_models_to_evaluate")},{type:"array",min:1,message:s("please_select_at_least_one_model")}],children:(0,r.jsx)(v.default,{mode:"multiple",placeholder:s("please_select_models_to_evaluate"),options:c,loading:Z,showSearch:!0,optionFilterProp:"label",allowClear:!0})}),(0,r.jsx)(_.default.Item,{label:s("temperature"),name:"temperature",rules:[{required:!0,message:s("please_input_temperature")}],children:(0,r.jsx)(b.Z,{min:0,max:1,step:.1,marks:{0:"0",.5:"0.5",1:"1"}})}),(0,r.jsx)(_.default.Item,{label:s("max_new_tokens"),name:"max_tokens",rules:[{required:!1,message:s("please_input_max_new_tokens")}],children:(0,r.jsx)(x.Z,{min:1,max:32768,style:{width:"100%"},placeholder:s("please_input_max_new_tokens")})})]}),"AGENT"===k&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.default.Item,{label:s("api_url"),name:"api_url",rules:[{required:!0,message:s("please_input_api_url")},{type:"url",message:s("please_input_valid_url")}],children:(0,r.jsx)(m.default,{placeholder:s("api_url_placeholder")})}),(0,r.jsx)(_.default.Item,{label:s("http_method"),name:"http_method",rules:[{required:!0,message:s("please_select_http_method")}],children:(0,r.jsxs)(v.default,{placeholder:s("please_select_http_method"),children:[(0,r.jsx)(v.default.Option,{value:"GET",children:"GET"}),(0,r.jsx)(v.default.Option,{value:"POST",children:"POST"})]})}),(0,r.jsx)(_.default.Item,{label:s("header_info"),name:"headers",rules:[{required:!1,message:s("please_input_header_info")}],children:(0,r.jsx)(P,{rows:4,placeholder:s("header_info_placeholder")})}),(0,r.jsx)(_.default.Item,{label:s("parse_strategy"),name:"parse_strategy",rules:[{required:!0,message:s("please_select_parse_strategy")}],children:(0,r.jsxs)(v.default,{value:w,onChange:e=>S(e),placeholder:s("please_select_parse_strategy"),children:[(0,r.jsx)(v.default.Option,{value:"DIRECT",children:s("parse_strategy_direct")}),(0,r.jsx)(v.default.Option,{value:"JSON_PATH",children:s("parse_strategy_json_path")})]})}),"JSON_PATH"===w&&(0,r.jsx)(_.default.Item,{label:s("response_mapping"),name:"response_mapping",rules:[{required:!0,message:s("please_input_response_mapping")}],children:(0,r.jsx)(P,{rows:4,placeholder:s("response_mapping_placeholder")})}),(0,r.jsx)(_.default.Item,{label:s("api_timeout"),name:"timeout",rules:[{required:!0,message:s("please_input_api_timeout")},{type:"number",min:1,max:2e3,message:s("timeout_range_validation")}],children:(0,r.jsx)(x.Z,{min:1,max:3e5,style:{width:"100%"},placeholder:s("api_timeout_placeholder")})})]})]})})};var Z=l(80072);let E=e=>{let{filterValue:t="",type:l="all"}=e,{data:r,loading:a,run:n,refresh:o}=(0,p.Z)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,[a,n]=await (0,j.Vx)(w({page:e,page_size:r,filter_param:t||void 0,sys_code:"all"===l?void 0:l}));return n},{manual:!0,onError:e=>{f.ZP.error(e.message||"获取评估列表失败")}});return{data:r,loading:a,getModelsEvaluation:n,refresh:o}},N=(0,n.createContext)(void 0),$=e=>{let{children:t,filterValue:l="",type:a="all"}=e,{data:n,loading:o,getModelsEvaluation:s,refresh:i}=E({filterValue:l,type:a});return(0,r.jsx)(N.Provider,{value:{refresh:i,data:n,loading:o,getModelsEvaluation:s},children:t})},I=()=>{let e=(0,n.useContext)(N);if(void 0===e)throw Error("useEvaluation must be used within an EvaluationProvider");return e},T=e=>{let{onTabChange:t,activeKey:l="all"}=e,{refresh:a}=I(),[d,p]=(0,n.useState)(!1);return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)(s.Z,{className:"backdrop-filter h-10 backdrop-blur-lg bg-white bg-opacity-30 border border-white rounded-lg shadow p-1 dark:border-[#6f7f95] dark:bg-[#6f7f95] dark:bg-opacity-60",options:[{value:"all",label:(0,u.t)("all_models_evaluation")}],onChange:t,value:l})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Z,{title:(0,u.t)("refresh_list"),children:(0,r.jsx)(o.Z,{onClick:a,className:"p-2 cursor-pointer"})}),(0,r.jsx)(Z.$,{href:"/models_evaluation/datasets",className:"border-none text-white bg-button-gradient h-full m-2",type:"primary",openNewTab:!0,children:(0,u.t)("evaluation_dataset_info")}),(0,r.jsx)(c.ZP,{className:"border-none text-white bg-button-gradient h-full",onClick:()=>{p(!0)},children:(0,u.t)("create_evaluation")}),(0,r.jsx)(S,{open:d,onCancel:()=>p(!1),onOk:a})]})]})};var L=l(66309),A=l(39773),q=l(11163),F=l(13578),H=l.n(F);let M=()=>{let{data:e,loading:t,getModelsEvaluation:l}=I(),a=(0,q.useRouter)();(0,n.useEffect)(()=>{null==l||l(1,20)},[]);let o=(0,n.useCallback)(e=>{a.push("/models_evaluation/".concat(e.evaluate_code))},[]),s=[{title:(0,u.t)("evaluation_scene"),dataIndex:"scene_key",key:"scene_key",width:"5%"},{title:(0,u.t)("task_name"),dataIndex:"scene_value",key:"scene_value",width:"12%"},{title:(0,u.t)("evaluation_env"),dataIndex:"evaluation_env",key:"evaluation_env",width:"5%",render:e=>"DEV"===e?(0,r.jsx)("span",{children:(0,u.t)("evaluation_env_dev")}):"TEST"===e?(0,r.jsx)("span",{children:(0,u.t)("evaluation_env_test")}):(0,r.jsx)("span",{children:e})},{title:(0,u.t)("evaluation_dataset_name"),dataIndex:"datasets_name",key:"datasets_name",width:"6%",render:e=>(0,r.jsx)(i.Z,{title:e,children:(0,r.jsx)("p",{className:"truncate",children:e})})},{title:(0,u.t)("create_time"),dataIndex:"gmt_create",key:"gmt_create",width:"10%"},{title:(0,u.t)("finish_time"),dataIndex:"gmt_modified",key:"gmt_modified",width:"10%"},{title:(0,u.t)("model_name"),dataIndex:"model_list",key:"model_list",width:"10%",render:e=>(0,r.jsx)("span",{children:e.join(",")})},{title:(0,u.t)("task_status"),dataIndex:"state",key:"state",width:"5%",render:(e,t)=>{let l="default",a=e;return("running"===e?(l="blue",a="运行中"):"complete"===e?(l="green",a="已完成"):"failed"===e?(l="red",a="失败"):"pending"===e&&(l="orange",a="待处理"),(null==t?void 0:t.state)==="failed")?(0,r.jsx)(i.Z,{title:t.log_info,children:(0,r.jsx)(L.Z,{color:l,children:a})}):(0,r.jsx)(L.Z,{color:l,children:a})}},{title:(0,u.t)("round_time"),dataIndex:"round_time",key:"round_time",width:"5%"},{title:(0,u.t)("operator"),width:"6%",key:"action",render:(e,t)=>(0,r.jsx)(c.ZP,{type:"link",disabled:"complete"!==t.state,onClick:()=>o(t),children:(0,u.t)("View_details")})}];return(0,r.jsx)(A.Z,{tableLayout:"fixed",className:"w-full ".concat(H().table),pagination:{total:(null==e?void 0:e.total_count)||0,current:(null==e?void 0:e.page)||1,pageSize:(null==e?void 0:e.page_size)||20,onChange:(e,t)=>null==l?void 0:l(e,t),showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},loading:t,columns:s,dataSource:(null==e?void 0:e.items)||[],rowKey:"evaluate_code"})};var B=()=>{let[e,t]=(0,n.useState)("all"),[l,o]=(0,n.useState)(""),{t:s}=(0,y.$G)();return(0,r.jsx)(a.ZP,{theme:{components:{Segmented:{itemSelectedBg:"#2867f5",itemSelectedColor:"white"}}},children:(0,r.jsx)($,{filterValue:l,type:e,children:(0,r.jsxs)("div",{className:"flex flex-col h-full w-full  dark:bg-gradient-dark bg-gradient-light bg-cover bg-center px-6 py-2 pt-12",children:[(0,r.jsx)(T,{activeKey:e,onTabChange:t,filterValue:l,onSearch:o}),(0,r.jsx)("div",{className:"flex flex-col h-full w-full overflow-y-auto",children:(0,r.jsx)(M,{filterValue:l,type:e})})]})})})}},13578:function(e){e.exports={table:"styles_table__bcZvX"}},36459:function(e,t,l){"use strict";function r(e){if(null==e)throw TypeError("Cannot destructure "+e)}l.d(t,{Z:function(){return r}})}},function(e){e.O(0,[2913,3791,5278,4330,7611,8791,9859,1049,1300,2783,4567,3457,9773,7124,9774,2888,179],function(){return e(e.s=44944)}),_N_E=e.O()}]);